2025-07-05T16:35:39.7818826Z ##[group]Run cd backend
2025-07-05T16:35:39.7819080Z [36;1mcd backend[0m
2025-07-05T16:35:39.7819417Z [36;1mpython -m pytest tests/ -v --cov=app --cov-report=xml --cov-report=term[0m
2025-07-05T16:35:39.7877147Z shell: /usr/bin/bash -e {0}
2025-07-05T16:35:39.7877370Z env:
2025-07-05T16:35:39.7877538Z   PYTHON_VERSION: 3.12
2025-07-05T16:35:39.7877744Z   NODE_VERSION: 20
2025-07-05T16:35:39.7877994Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.11/x64
2025-07-05T16:35:39.7878398Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib/pkgconfig
2025-07-05T16:35:39.7878779Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-07-05T16:35:39.7879122Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-07-05T16:35:39.7879461Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.11/x64
2025-07-05T16:35:39.7879810Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.11/x64/lib
2025-07-05T16:35:39.7880548Z   DATABASE_URL: ***localhost:5432/testdb
2025-07-05T16:35:39.7880797Z ##[endgroup]
2025-07-05T16:35:50.2050317Z ============================= test session starts ==============================
2025-07-05T16:35:50.2051495Z platform linux -- Python 3.12.11, pytest-8.2.0, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.12.11/x64/bin/python
2025-07-05T16:35:50.2052191Z cachedir: .pytest_cache
2025-07-05T16:35:50.2052599Z rootdir: /home/runner/work/esg-checklist-ai/esg-checklist-ai
2025-07-05T16:35:50.2053111Z configfile: pyproject.toml
2025-07-05T16:35:50.2053518Z plugins: cov-4.0.0, anyio-3.7.1, mock-3.14.1, asyncio-0.23.6
2025-07-05T16:35:50.2053952Z asyncio: mode=Mode.AUTO
2025-07-05T16:35:50.6199053Z collecting ... collected 81 items
2025-07-05T16:35:50.6199507Z 
2025-07-05T16:35:50.8279475Z tests/test_basic_api.py::test_health_endpoint FAILED                     [  1%]
2025-07-05T16:35:50.8345785Z tests/test_basic_api.py::test_root_endpoint PASSED                       [  2%]
2025-07-05T16:35:50.8403830Z tests/test_basic_api.py::test_api_docs_accessible PASSED                 [  3%]
2025-07-05T16:35:51.1879113Z tests/test_basic_api.py::test_openapi_schema PASSED                      [  4%]
2025-07-05T16:35:51.1899996Z tests/test_comprehensive_coverage.py::TestAIScorer::test_ai_scorer_initialization PASSED [  6%]
2025-07-05T16:35:51.1919694Z tests/test_comprehensive_coverage.py::TestAIScorer::test_ai_scorer_attributes PASSED [  7%]
2025-07-05T16:35:51.2698202Z tests/test_comprehensive_coverage.py::TestAIScorer::test_ai_scorer_scoring PASSED [  8%]
2025-07-05T16:35:51.2740681Z tests/test_comprehensive_coverage.py::TestSettings::test_settings_creation PASSED [  9%]
2025-07-05T16:35:51.2782717Z tests/test_comprehensive_coverage.py::TestSettings::test_settings_attributes PASSED [ 11%]
2025-07-05T16:35:51.2802357Z tests/test_comprehensive_coverage.py::TestDatabase::test_database_session PASSED [ 12%]
2025-07-05T16:35:51.3378018Z tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_admin_endpoints_coverage ERROR [ 13%]
2025-07-05T16:35:51.3592165Z tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_post_endpoints_coverage ERROR [ 14%]
2025-07-05T16:35:51.3802416Z tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_file_upload_endpoints ERROR [ 16%]
2025-07-05T16:35:51.4011549Z tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_submission_endpoints ERROR [ 17%]
2025-07-05T16:35:51.4042746Z tests/test_comprehensive_coverage.py::TestUtilityFunctions::test_audit_log_function PASSED [ 18%]
2025-07-05T16:35:51.4062205Z tests/test_comprehensive_coverage.py::TestUtilityFunctions::test_model_imports PASSED [ 19%]
2025-07-05T16:35:51.4081093Z tests/test_comprehensive_coverage.py::TestUtilityFunctions::test_schema_imports PASSED [ 20%]
2025-07-05T16:35:51.4099753Z tests/test_comprehensive_coverage.py::TestUtilityFunctions::test_auth_imports PASSED [ 22%]
2025-07-05T16:35:51.4118667Z tests/test_comprehensive_coverage.py::TestBasicFunctionality::test_datetime_functions PASSED [ 23%]
2025-07-05T16:35:51.4137809Z tests/test_comprehensive_coverage.py::TestBasicFunctionality::test_environment_variables PASSED [ 24%]
2025-07-05T16:35:51.4156699Z tests/test_comprehensive_coverage.py::TestBasicFunctionality::test_json_handling PASSED [ 25%]
2025-07-05T16:35:51.4177834Z tests/test_comprehensive_coverage.py::TestBasicFunctionality::test_pathlib_usage PASSED [ 27%]
2025-07-05T16:35:51.4497551Z tests/test_high_impact_coverage.py::TestUploadsRouter::test_file_upload_various_types ERROR [ 28%]
2025-07-05T16:35:51.4820180Z tests/test_high_impact_coverage.py::TestUploadsRouter::test_file_upload_edge_cases ERROR [ 29%]
2025-07-05T16:35:51.5133750Z tests/test_high_impact_coverage.py::TestUploadsRouter::test_get_uploads_endpoints ERROR [ 30%]
2025-07-05T16:35:51.5442415Z tests/test_high_impact_coverage.py::TestUploadsRouter::test_upload_management_endpoints ERROR [ 32%]
2025-07-05T16:35:51.5752118Z tests/test_high_impact_coverage.py::TestExportRouter::test_export_checklist_various_formats ERROR [ 33%]
2025-07-05T16:35:51.6060768Z tests/test_high_impact_coverage.py::TestExportRouter::test_export_submissions ERROR [ 34%]
2025-07-05T16:35:51.6371351Z tests/test_high_impact_coverage.py::TestExportRouter::test_export_analytics ERROR [ 35%]
2025-07-05T16:35:51.6687954Z tests/test_high_impact_coverage.py::TestExportRouter::test_export_error_handling ERROR [ 37%]
2025-07-05T16:35:51.7018702Z tests/test_high_impact_coverage.py::TestAdminChecklistsRouter::test_admin_checklist_crud ERROR [ 38%]
2025-07-05T16:35:51.7330081Z tests/test_high_impact_coverage.py::TestAdminChecklistsRouter::test_checklist_item_management ERROR [ 39%]
2025-07-05T16:35:51.7642534Z tests/test_high_impact_coverage.py::TestAdminChecklistsRouter::test_checklist_publishing ERROR [ 40%]
2025-07-05T16:35:51.7959742Z tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_admin_user_management ERROR [ 41%]
2025-07-05T16:35:51.8286573Z tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_user_role_management ERROR [ 43%]
2025-07-05T16:35:51.8630925Z tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_user_password_management ERROR [ 44%]
2025-07-05T16:35:51.8967601Z tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_user_activity_monitoring ERROR [ 45%]
2025-07-05T16:35:51.9001373Z tests/test_high_impact_coverage.py::TestAdditionalUtilityFunctions::test_audit_functions_comprehensive PASSED [ 46%]
2025-07-05T16:35:51.9021483Z tests/test_high_impact_coverage.py::TestAdditionalUtilityFunctions::test_email_utilities_comprehensive PASSED [ 48%]
2025-07-05T16:35:51.9042331Z tests/test_high_impact_coverage.py::TestAdditionalUtilityFunctions::test_file_security_comprehensive PASSED [ 49%]
2025-07-05T16:35:51.9066583Z tests/test_high_impact_coverage.py::TestAIScoringSystems::test_ai_scorer_comprehensive PASSED [ 50%]
2025-07-05T16:35:51.9096513Z tests/test_high_impact_coverage.py::TestAIScoringSystems::test_ai_utils_comprehensive PASSED [ 51%]
2025-07-05T16:35:51.9116895Z tests/test_high_impact_coverage.py::TestDatabaseOperations::test_database_session_management PASSED [ 53%]
2025-07-05T16:35:51.9139443Z tests/test_high_impact_coverage.py::TestDatabaseOperations::test_model_relationships PASSED [ 54%]
2025-07-05T16:35:51.9466437Z tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_malformed_requests ERROR [ 55%]
2025-07-05T16:35:51.9778999Z tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_permission_boundaries ERROR [ 56%]
2025-07-05T16:35:52.0091292Z tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_rate_limiting_simulation ERROR [ 58%]
2025-07-05T16:35:52.0408906Z tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_large_payload_handling ERROR [ 59%]
2025-07-05T16:35:52.0721432Z tests/test_high_impact_coverage.py::TestConcurrencyAndAsyncOperations::test_concurrent_checklist_operations ERROR [ 60%]
2025-07-05T16:35:52.1036460Z tests/test_high_impact_coverage.py::TestConcurrencyAndAsyncOperations::test_file_upload_concurrency ERROR [ 61%]
2025-07-05T16:35:52.1240033Z tests/test_integration_api.py::TestESGWorkflowIntegration::test_complete_esg_workflow ERROR [ 62%]
2025-07-05T16:35:52.1440196Z tests/test_integration_api.py::TestESGWorkflowIntegration::test_auth_workflow ERROR [ 64%]
2025-07-05T16:35:52.1640519Z tests/test_integration_api.py::TestESGWorkflowIntegration::test_error_handling ERROR [ 65%]
2025-07-05T16:35:52.1845326Z tests/test_integration_api.py::TestESGWorkflowIntegration::test_data_validation ERROR [ 66%]
2025-07-05T16:35:52.2120030Z tests/test_integration_api.py::TestPerformanceAndLoad::test_concurrent_requests PASSED [ 67%]
2025-07-05T16:35:52.2379513Z tests/test_integration_api.py::TestPerformanceAndLoad::test_large_file_handling PASSED [ 69%]
2025-07-05T16:35:52.2576939Z tests/test_integration_api.py::TestEndToEndScenarios::test_complete_user_journey FAILED [ 70%]
2025-07-05T16:35:52.2599560Z tests/test_models.py::TestUserModel::test_user_creation PASSED           [ 71%]
2025-07-05T16:35:52.2620756Z tests/test_models.py::TestUserModel::test_user_defaults PASSED           [ 72%]
2025-07-05T16:35:52.2642819Z tests/test_models.py::TestChecklistModel::test_checklist_creation PASSED [ 74%]
2025-07-05T16:35:52.2663663Z tests/test_models.py::TestChecklistModel::test_checklist_defaults PASSED [ 75%]
2025-07-05T16:35:52.2684917Z tests/test_models.py::TestChecklistItemModel::test_checklist_item_creation PASSED [ 76%]
2025-07-05T16:35:52.2705799Z tests/test_models.py::TestChecklistItemModel::test_checklist_item_defaults PASSED [ 77%]
2025-07-05T16:35:52.2727422Z tests/test_models.py::TestFileUploadModel::test_file_upload_creation PASSED [ 79%]
2025-07-05T16:35:52.2748671Z tests/test_models.py::TestFileUploadModel::test_file_upload_defaults PASSED [ 80%]
2025-07-05T16:35:52.2771135Z tests/test_models.py::TestCommentModel::test_comment_creation PASSED     [ 81%]
2025-07-05T16:35:52.2960172Z tests/test_routes_coverage.py::TestChecklistRoutes::test_get_checklists ERROR [ 82%]
2025-07-05T16:35:52.4026852Z tests/test_routes_coverage.py::TestChecklistRoutes::test_create_checklist ERROR [ 83%]
2025-07-05T16:35:52.4230959Z tests/test_routes_coverage.py::TestChecklistRoutes::test_get_checklist_by_id ERROR [ 85%]
2025-07-05T16:35:52.4289086Z tests/test_routes_coverage.py::TestUserRoutes::test_user_profile_without_auth PASSED [ 86%]
2025-07-05T16:35:52.4377275Z tests/test_routes_coverage.py::TestUserRoutes::test_register_invalid_email PASSED [ 87%]
2025-07-05T16:35:52.4463778Z tests/test_routes_coverage.py::TestUserRoutes::test_register_missing_fields PASSED [ 88%]
2025-07-05T16:35:52.4648926Z tests/test_routes_coverage.py::TestUserRoutes::test_login_invalid_credentials FAILED [ 90%]
2025-07-05T16:35:52.4707905Z tests/test_routes_coverage.py::TestAnalyticsRoutes::test_analytics_without_auth PASSED [ 91%]
2025-07-05T16:35:52.4768383Z tests/test_routes_coverage.py::TestAnalyticsRoutes::test_system_metrics_without_auth PASSED [ 92%]
2025-07-05T16:35:52.4826281Z tests/test_routes_coverage.py::TestExportRoutes::test_export_without_auth PASSED [ 93%]
2025-07-05T16:35:52.4888968Z tests/test_routes_coverage.py::TestExportRoutes::test_export_invalid_checklist PASSED [ 95%]
2025-07-05T16:35:52.4947385Z tests/test_routes_coverage.py::TestNotificationRoutes::test_notifications_without_auth PASSED [ 96%]
2025-07-05T16:35:52.5006191Z tests/test_routes_coverage.py::TestNotificationRoutes::test_mark_notification_read_without_auth PASSED [ 97%]
2025-07-05T16:35:52.5137521Z tests/test_routes_coverage.py::TestUploadRoutes::test_file_upload_without_auth PASSED [ 98%]
2025-07-05T16:35:53.7761486Z tests/test_routes_coverage.py::TestUploadRoutes::test_get_uploaded_files_without_auth PASSED [100%]
2025-07-05T16:35:53.7762551Z 
2025-07-05T16:35:53.7762760Z ==================================== ERRORS ====================================
2025-07-05T16:35:53.7763591Z _____ ERROR at setup of TestRouterEndpoints.test_admin_endpoints_coverage ______
2025-07-05T16:35:53.7764487Z tests/test_comprehensive_coverage.py:177: in setup_admin_user
2025-07-05T16:35:53.7765231Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.7766086Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.7767102Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.7767887Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.7768937Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7769852Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7770142Z              ^
2025-07-05T16:35:53.7770323Z 
2025-07-05T16:35:53.7770878Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7771555Z FROM "user" 
2025-07-05T16:35:53.7771876Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7772376Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7772927Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7773479Z Traceback (most recent call last):
2025-07-05T16:35:53.7781682Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7782403Z     self.dialect.do_execute(
2025-07-05T16:35:53.7783039Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7783818Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7784351Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.7784859Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7785144Z              ^
2025-07-05T16:35:53.7785316Z 
2025-07-05T16:35:53.7785325Z 
2025-07-05T16:35:53.7785801Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.7786069Z 
2025-07-05T16:35:53.7786225Z Traceback (most recent call last):
2025-07-05T16:35:53.7787074Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.7787918Z     yield session
2025-07-05T16:35:53.7788800Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.7789708Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.7790783Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.7791651Z     raise e
2025-07-05T16:35:53.7792374Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.7793389Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7794258Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.7795105Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.7796066Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.7796850Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7797643Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.7798753Z     response = await func(request)
2025-07-05T16:35:53.7799126Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7799811Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.7800684Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.7801109Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7802138Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.7803253Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.7804068Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7805224Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.7806540Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.7807084Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7808031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.7809028Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.7809551Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7810654Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.7811740Z     return await future
2025-07-05T16:35:53.7812080Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.7812978Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.7813933Z     result = context.run(func, *args)
2025-07-05T16:35:53.7814340Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7815229Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.7816496Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.7817110Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7818089Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.7819011Z     results = super().execute(
2025-07-05T16:35:53.7819369Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7820294Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.7821240Z     return self._execute_internal(
2025-07-05T16:35:53.7821602Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7822296Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.7822954Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.7823268Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7823896Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.7824491Z     result = conn.execute(
2025-07-05T16:35:53.7824687Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.7825203Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.7826016Z     return meth(
2025-07-05T16:35:53.7826199Z            ^^^^^
2025-07-05T16:35:53.7826769Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.7827394Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.7827652Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7828463Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.7829094Z     ret = self._execute_context(
2025-07-05T16:35:53.7829312Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7829885Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.7830497Z     return self._exec_single_context(
2025-07-05T16:35:53.7830724Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7831333Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.7832073Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.7832683Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.7833391Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.7834090Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7834689Z     self.dialect.do_execute(
2025-07-05T16:35:53.7835251Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7836079Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7836553Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7837019Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7837194Z              ^
2025-07-05T16:35:53.7837301Z 
2025-07-05T16:35:53.7837650Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7838148Z FROM "user" 
2025-07-05T16:35:53.7838322Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7838605Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7838969Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7839761Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7840447Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7840621Z              ^
2025-07-05T16:35:53.7840718Z 
2025-07-05T16:35:53.7841064Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7841558Z FROM "user" 
2025-07-05T16:35:53.7841729Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7841997Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7842352Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7842822Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.043s
2025-07-05T16:35:53.7843522Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.7844133Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.7844457Z Traceback (most recent call last):
2025-07-05T16:35:53.7845082Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7845914Z     self.dialect.do_execute(
2025-07-05T16:35:53.7846472Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7847051Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7847383Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.7847849Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7848017Z              ^
2025-07-05T16:35:53.7848119Z 
2025-07-05T16:35:53.7848124Z 
2025-07-05T16:35:53.7848287Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.7848547Z 
2025-07-05T16:35:53.7848637Z Traceback (most recent call last):
2025-07-05T16:35:53.7849132Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.7849606Z     yield session
2025-07-05T16:35:53.7850180Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.7850929Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.7851552Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.7852132Z     raise e
2025-07-05T16:35:53.7852654Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.7853259Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7853797Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.7854335Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.7854870Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.7855504Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7856025Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.7856528Z     response = await func(request)
2025-07-05T16:35:53.7856744Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7857216Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.7857739Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.7857992Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7858574Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.7859192Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.7859493Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7860095Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.7860699Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.7861012Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7861531Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.7862090Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.7862381Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7863011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.7863614Z     return await future
2025-07-05T16:35:53.7863797Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.7864276Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.7864819Z     result = context.run(func, *args)
2025-07-05T16:35:53.7865051Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7865732Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.7866330Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.7866672Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7867347Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.7867863Z     results = super().execute(
2025-07-05T16:35:53.7868067Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7868588Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.7869127Z     return self._execute_internal(
2025-07-05T16:35:53.7869343Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7869919Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.7870689Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.7871002Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7871629Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.7872231Z     result = conn.execute(
2025-07-05T16:35:53.7872425Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.7872924Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.7873448Z     return meth(
2025-07-05T16:35:53.7873613Z            ^^^^^
2025-07-05T16:35:53.7874402Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.7875070Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.7875321Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7876174Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.7876785Z     ret = self._execute_context(
2025-07-05T16:35:53.7877003Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7877564Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.7878149Z     return self._exec_single_context(
2025-07-05T16:35:53.7878371Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7878961Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.7879556Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.7880166Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.7880891Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.7881581Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7882191Z     self.dialect.do_execute(
2025-07-05T16:35:53.7882749Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7883322Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7883786Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7884235Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7884423Z              ^
2025-07-05T16:35:53.7884529Z 
2025-07-05T16:35:53.7884874Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7885569Z FROM "user" 
2025-07-05T16:35:53.7885769Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7886046Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7886404Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7886935Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.7887534Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7888037Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7888209Z              ^
2025-07-05T16:35:53.7888305Z 
2025-07-05T16:35:53.7888645Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7889140Z FROM "user" 
2025-07-05T16:35:53.7889305Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7889737Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7890096Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7890405Z Traceback (most recent call last):
2025-07-05T16:35:53.7891036Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7891644Z     self.dialect.do_execute(
2025-07-05T16:35:53.7892198Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7892781Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7893114Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.7893435Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7893600Z              ^
2025-07-05T16:35:53.7893700Z 
2025-07-05T16:35:53.7893705Z 
2025-07-05T16:35:53.7893888Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.7894150Z 
2025-07-05T16:35:53.7894235Z Traceback (most recent call last):
2025-07-05T16:35:53.7894728Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.7895199Z     yield session
2025-07-05T16:35:53.7895904Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.7896543Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.7897163Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.7897742Z     raise e
2025-07-05T16:35:53.7898267Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.7898864Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7899403Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.7899947Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.7900474Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.7900997Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7901510Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.7902013Z     response = await func(request)
2025-07-05T16:35:53.7902241Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7902718Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.7903237Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.7903491Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7904075Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.7904712Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.7905010Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7905791Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.7906539Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.7906811Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7907337Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.7907895Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.7908178Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7908807Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.7909526Z     return await future
2025-07-05T16:35:53.7909713Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.7910211Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.7910756Z     result = context.run(func, *args)
2025-07-05T16:35:53.7910988Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7911472Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.7912067Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.7912417Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7912946Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.7913466Z     results = super().execute(
2025-07-05T16:35:53.7913672Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7914190Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.7914737Z     return self._execute_internal(
2025-07-05T16:35:53.7914953Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7915755Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.7916421Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.7916732Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7917362Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.7917964Z     result = conn.execute(
2025-07-05T16:35:53.7918158Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.7918664Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.7919193Z     return meth(
2025-07-05T16:35:53.7919359Z            ^^^^^
2025-07-05T16:35:53.7919922Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.7920555Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.7920811Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7921423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.7922031Z     ret = self._execute_context(
2025-07-05T16:35:53.7922242Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7922796Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.7923383Z     return self._exec_single_context(
2025-07-05T16:35:53.7923612Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7924203Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.7924803Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.7925817Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.7926789Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.7927495Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7928091Z     self.dialect.do_execute(
2025-07-05T16:35:53.7928647Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7929229Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7929847Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7930302Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7930474Z              ^
2025-07-05T16:35:53.7930578Z 
2025-07-05T16:35:53.7930924Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7931431Z FROM "user" 
2025-07-05T16:35:53.7931600Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7931875Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7932233Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7932957Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7933605Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7933780Z              ^
2025-07-05T16:35:53.7933883Z 
2025-07-05T16:35:53.7934228Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7934716Z FROM "user" 
2025-07-05T16:35:53.7934885Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7935149Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7935634Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7936055Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.043s
2025-07-05T16:35:53.7936672Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.7937282Z ______ ERROR at setup of TestRouterEndpoints.test_post_endpoints_coverage ______
2025-07-05T16:35:53.7937712Z tests/test_comprehensive_coverage.py:177: in setup_admin_user
2025-07-05T16:35:53.7938060Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.7938339Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.7938644Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.7939021Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.7939663Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7940221Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7940387Z              ^
2025-07-05T16:35:53.7940487Z 
2025-07-05T16:35:53.7940834Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7941325Z FROM "user" 
2025-07-05T16:35:53.7941496Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7941764Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7942113Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7942431Z Traceback (most recent call last):
2025-07-05T16:35:53.7943053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7943657Z     self.dialect.do_execute(
2025-07-05T16:35:53.7944379Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7944953Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7945291Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.7945715Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7945886Z              ^
2025-07-05T16:35:53.7945980Z 
2025-07-05T16:35:53.7945985Z 
2025-07-05T16:35:53.7946152Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.7946409Z 
2025-07-05T16:35:53.7946489Z Traceback (most recent call last):
2025-07-05T16:35:53.7947119Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.7947594Z     yield session
2025-07-05T16:35:53.7948168Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.7948804Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.7949424Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.7950007Z     raise e
2025-07-05T16:35:53.7950530Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.7951125Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7951665Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.7952202Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.7952727Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.7953248Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7953750Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.7954257Z     response = await func(request)
2025-07-05T16:35:53.7954480Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7954957Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.7955583Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.7955841Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7956420Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.7957049Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.7957346Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7957941Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.7958552Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.7958824Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7959339Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.7959887Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.7960176Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7960806Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.7961439Z     return await future
2025-07-05T16:35:53.7961627Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.7962113Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.7962649Z     result = context.run(func, *args)
2025-07-05T16:35:53.7962880Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7963493Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.7964083Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.7964430Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7964957Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.7965673Z     results = super().execute(
2025-07-05T16:35:53.7965883Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7966409Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.7967089Z     return self._execute_internal(
2025-07-05T16:35:53.7967301Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7967879Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.7968538Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.7968844Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7969467Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.7970062Z     result = conn.execute(
2025-07-05T16:35:53.7970252Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.7970761Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.7971287Z     return meth(
2025-07-05T16:35:53.7971452Z            ^^^^^
2025-07-05T16:35:53.7972011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.7972637Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.7972896Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7973509Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.7974117Z     ret = self._execute_context(
2025-07-05T16:35:53.7974327Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7974885Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.7975586Z     return self._exec_single_context(
2025-07-05T16:35:53.7975809Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.7976405Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.7977005Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.7977610Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.7978323Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.7979014Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7979606Z     self.dialect.do_execute(
2025-07-05T16:35:53.7980156Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7980736Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7981197Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7981650Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7981826Z              ^
2025-07-05T16:35:53.7981930Z 
2025-07-05T16:35:53.7982271Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7982888Z FROM "user" 
2025-07-05T16:35:53.7983053Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7983323Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7983679Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7984455Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.7985139Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7985310Z              ^
2025-07-05T16:35:53.7985568Z 
2025-07-05T16:35:53.7985927Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.7986552Z FROM "user" 
2025-07-05T16:35:53.7986722Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.7986987Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.7987351Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.7987822Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.7988515Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.7989121Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.7989445Z Traceback (most recent call last):
2025-07-05T16:35:53.7990066Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.7990683Z     self.dialect.do_execute(
2025-07-05T16:35:53.7991232Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.7991816Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.7992150Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.7992468Z LINE 2: FROM "user" 
2025-07-05T16:35:53.7992635Z              ^
2025-07-05T16:35:53.7992735Z 
2025-07-05T16:35:53.7992740Z 
2025-07-05T16:35:53.7992903Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.7993158Z 
2025-07-05T16:35:53.7993244Z Traceback (most recent call last):
2025-07-05T16:35:53.7993731Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.7994204Z     yield session
2025-07-05T16:35:53.7994783Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.7995520Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.7996149Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.7996732Z     raise e
2025-07-05T16:35:53.7997253Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.7997851Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.7998391Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.7998927Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.7999460Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.7999978Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8000486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8000989Z     response = await func(request)
2025-07-05T16:35:53.8001202Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8001676Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8002309Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8002558Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8003139Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8003757Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8004056Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8004648Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8005554Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8005862Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8006417Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8006974Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8007270Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8007899Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8008512Z     return await future
2025-07-05T16:35:53.8008695Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8009170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8009721Z     result = context.run(func, *args)
2025-07-05T16:35:53.8009950Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8010436Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8011028Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8011374Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8011908Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8012420Z     results = super().execute(
2025-07-05T16:35:53.8012623Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8013141Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8013681Z     return self._execute_internal(
2025-07-05T16:35:53.8013900Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8014475Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8015119Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8015542Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8016170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8016772Z     result = conn.execute(
2025-07-05T16:35:53.8016964Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8017465Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8017992Z     return meth(
2025-07-05T16:35:53.8018150Z            ^^^^^
2025-07-05T16:35:53.8018720Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8019352Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8019600Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8020218Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8020956Z     ret = self._execute_context(
2025-07-05T16:35:53.8021164Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8021728Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8022304Z     return self._exec_single_context(
2025-07-05T16:35:53.8022531Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8023119Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8023713Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8024446Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8025150Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8025934Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8026537Z     self.dialect.do_execute(
2025-07-05T16:35:53.8027087Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8027661Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8028129Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8028572Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8028749Z              ^
2025-07-05T16:35:53.8028846Z 
2025-07-05T16:35:53.8029193Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8029716Z FROM "user" 
2025-07-05T16:35:53.8029890Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8030157Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8030520Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8030904Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8031497Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8032003Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8032170Z              ^
2025-07-05T16:35:53.8032266Z 
2025-07-05T16:35:53.8032609Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8033098Z FROM "user" 
2025-07-05T16:35:53.8033269Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8033532Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8033886Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8034207Z Traceback (most recent call last):
2025-07-05T16:35:53.8034819Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8035529Z     self.dialect.do_execute(
2025-07-05T16:35:53.8036082Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8036660Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8036999Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8037311Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8037483Z              ^
2025-07-05T16:35:53.8037580Z 
2025-07-05T16:35:53.8037584Z 
2025-07-05T16:35:53.8037748Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8038015Z 
2025-07-05T16:35:53.8038097Z Traceback (most recent call last):
2025-07-05T16:35:53.8038592Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8039064Z     yield session
2025-07-05T16:35:53.8039771Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8040409Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8041028Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8041607Z     raise e
2025-07-05T16:35:53.8042132Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8042731Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8043397Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8043931Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8044490Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8045017Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8045736Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8046258Z     response = await func(request)
2025-07-05T16:35:53.8046479Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8048227Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8048762Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8049016Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8049608Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8050235Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8050533Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8051133Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8051743Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8052014Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8052533Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8053078Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8053366Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8054004Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8054602Z     return await future
2025-07-05T16:35:53.8054791Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8055279Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8055940Z     result = context.run(func, *args)
2025-07-05T16:35:53.8056172Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8056661Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8057248Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8057601Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8058134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8058655Z     results = super().execute(
2025-07-05T16:35:53.8058865Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8059389Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8059935Z     return self._execute_internal(
2025-07-05T16:35:53.8060287Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8060864Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8061545Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8061855Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8062483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8063076Z     result = conn.execute(
2025-07-05T16:35:53.8063393Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8063900Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8064424Z     return meth(
2025-07-05T16:35:53.8064596Z            ^^^^^
2025-07-05T16:35:53.8065150Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8065996Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8066254Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8066869Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8067478Z     ret = self._execute_context(
2025-07-05T16:35:53.8067689Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8068250Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8068851Z     return self._exec_single_context(
2025-07-05T16:35:53.8069073Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8069665Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8070272Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8070877Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8071580Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8072272Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8072864Z     self.dialect.do_execute(
2025-07-05T16:35:53.8073420Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8074008Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8074465Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8074919Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8075088Z              ^
2025-07-05T16:35:53.8075197Z 
2025-07-05T16:35:53.8075654Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8076149Z FROM "user" 
2025-07-05T16:35:53.8076324Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8076594Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8076952Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8077677Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8078328Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8078511Z              ^
2025-07-05T16:35:53.8078609Z 
2025-07-05T16:35:53.8078947Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8101178Z FROM "user" 
2025-07-05T16:35:53.8101666Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8101980Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8102363Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8102811Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8103437Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8104039Z _______ ERROR at setup of TestRouterEndpoints.test_file_upload_endpoints _______
2025-07-05T16:35:53.8104472Z tests/test_comprehensive_coverage.py:177: in setup_admin_user
2025-07-05T16:35:53.8104953Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8105231Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8105665Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8106047Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8106712Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8107268Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8107447Z              ^
2025-07-05T16:35:53.8107548Z 
2025-07-05T16:35:53.8107907Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8108401Z FROM "user" 
2025-07-05T16:35:53.8108580Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8108855Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8109226Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8109544Z Traceback (most recent call last):
2025-07-05T16:35:53.8110212Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8110844Z     self.dialect.do_execute(
2025-07-05T16:35:53.8111410Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8111994Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8112337Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8112656Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8112837Z              ^
2025-07-05T16:35:53.8112934Z 
2025-07-05T16:35:53.8112939Z 
2025-07-05T16:35:53.8113104Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8113368Z 
2025-07-05T16:35:53.8113457Z Traceback (most recent call last):
2025-07-05T16:35:53.8113958Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8114426Z     yield session
2025-07-05T16:35:53.8115002Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8115747Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8116373Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8116949Z     raise e
2025-07-05T16:35:53.8117468Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8118062Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8118602Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8119139Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8119669Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8120185Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8120828Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8121330Z     response = await func(request)
2025-07-05T16:35:53.8121546Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8122018Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8122520Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8122766Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8123335Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8124065Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8124355Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8124944Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8125785Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8126059Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8126572Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8127111Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8127391Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8128010Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8128608Z     return await future
2025-07-05T16:35:53.8128787Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8129260Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8129785Z     result = context.run(func, *args)
2025-07-05T16:35:53.8130017Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8130496Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8131079Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8131421Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8131945Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8132450Z     results = super().execute(
2025-07-05T16:35:53.8132652Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8133170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8133710Z     return self._execute_internal(
2025-07-05T16:35:53.8133925Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8134484Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8135135Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8135563Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8136178Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8136762Z     result = conn.execute(
2025-07-05T16:35:53.8136956Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8137452Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8137970Z     return meth(
2025-07-05T16:35:53.8138128Z            ^^^^^
2025-07-05T16:35:53.8138672Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8139430Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8139677Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8140282Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8140877Z     ret = self._execute_context(
2025-07-05T16:35:53.8141083Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8141638Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8142234Z     return self._exec_single_context(
2025-07-05T16:35:53.8142575Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8143156Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8143739Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8144331Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8145030Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8145937Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8146528Z     self.dialect.do_execute(
2025-07-05T16:35:53.8147078Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8147640Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8148107Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8148551Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8148718Z              ^
2025-07-05T16:35:53.8148816Z 
2025-07-05T16:35:53.8149173Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8149664Z FROM "user" 
2025-07-05T16:35:53.8149835Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8150101Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8150455Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8151219Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8151893Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8152060Z              ^
2025-07-05T16:35:53.8152157Z 
2025-07-05T16:35:53.8152493Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8152977Z FROM "user" 
2025-07-05T16:35:53.8153142Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8153398Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8153742Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8154197Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8154869Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8155574Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8155898Z Traceback (most recent call last):
2025-07-05T16:35:53.8156504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8157095Z     self.dialect.do_execute(
2025-07-05T16:35:53.8157631Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8158327Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8158659Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8158973Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8159137Z              ^
2025-07-05T16:35:53.8159229Z 
2025-07-05T16:35:53.8159234Z 
2025-07-05T16:35:53.8159400Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8159656Z 
2025-07-05T16:35:53.8159734Z Traceback (most recent call last):
2025-07-05T16:35:53.8160218Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8160681Z     yield session
2025-07-05T16:35:53.8161408Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8162031Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8162637Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8163208Z     raise e
2025-07-05T16:35:53.8163722Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8164302Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8164860Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8165591Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8166141Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8166662Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8167168Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8167665Z     response = await func(request)
2025-07-05T16:35:53.8167889Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8168352Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8168865Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8169111Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8169686Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8170300Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8170587Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8171180Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8171791Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8172056Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8172571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8173113Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8173401Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8174025Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8174622Z     return await future
2025-07-05T16:35:53.8174801Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8175281Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8175927Z     result = context.run(func, *args)
2025-07-05T16:35:53.8176152Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8176635Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8177338Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8177678Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8178202Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8178706Z     results = super().execute(
2025-07-05T16:35:53.8178917Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8179423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8179959Z     return self._execute_internal(
2025-07-05T16:35:53.8180288Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8180855Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8181499Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8181812Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8182430Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8183016Z     result = conn.execute(
2025-07-05T16:35:53.8183211Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8183705Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8184218Z     return meth(
2025-07-05T16:35:53.8184380Z            ^^^^^
2025-07-05T16:35:53.8184927Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8185656Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8185907Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8186512Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8187120Z     ret = self._execute_context(
2025-07-05T16:35:53.8187327Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8187881Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8188462Z     return self._exec_single_context(
2025-07-05T16:35:53.8188682Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8189275Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8189873Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8190468Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8191164Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8191847Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8192430Z     self.dialect.do_execute(
2025-07-05T16:35:53.8192970Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8193543Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8193993Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8194436Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8194603Z              ^
2025-07-05T16:35:53.8194708Z 
2025-07-05T16:35:53.8195050Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8195642Z FROM "user" 
2025-07-05T16:35:53.8195821Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8196096Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8196646Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8197031Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8197613Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8198119Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8198287Z              ^
2025-07-05T16:35:53.8198391Z 
2025-07-05T16:35:53.8198739Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8199353Z FROM "user" 
2025-07-05T16:35:53.8199521Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8199790Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8200137Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8200450Z Traceback (most recent call last):
2025-07-05T16:35:53.8201069Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8201664Z     self.dialect.do_execute(
2025-07-05T16:35:53.8202211Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8202781Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8203113Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8203432Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8203600Z              ^
2025-07-05T16:35:53.8203701Z 
2025-07-05T16:35:53.8203705Z 
2025-07-05T16:35:53.8203873Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8204127Z 
2025-07-05T16:35:53.8204207Z Traceback (most recent call last):
2025-07-05T16:35:53.8204696Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8205174Z     yield session
2025-07-05T16:35:53.8206002Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8206664Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8207292Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8207865Z     raise e
2025-07-05T16:35:53.8208385Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8208980Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8209518Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8210051Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8210571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8211090Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8211592Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8212082Z     response = await func(request)
2025-07-05T16:35:53.8212301Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8212766Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8213277Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8213536Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8214110Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8214726Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8215154Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8215848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8216452Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8216720Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8217231Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8217777Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8218060Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8218824Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8219424Z     return await future
2025-07-05T16:35:53.8219604Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8220097Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8220625Z     result = context.run(func, *args)
2025-07-05T16:35:53.8220854Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8221343Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8221918Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8222263Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8222787Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8223301Z     results = super().execute(
2025-07-05T16:35:53.8223508Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8224016Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8224560Z     return self._execute_internal(
2025-07-05T16:35:53.8224777Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8225449Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8226178Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8226486Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8227111Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8227716Z     result = conn.execute(
2025-07-05T16:35:53.8227908Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8228412Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8228937Z     return meth(
2025-07-05T16:35:53.8229097Z            ^^^^^
2025-07-05T16:35:53.8229658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8230281Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8230534Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8231146Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8231744Z     ret = self._execute_context(
2025-07-05T16:35:53.8231956Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8232509Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8233090Z     return self._exec_single_context(
2025-07-05T16:35:53.8233318Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8233899Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8234619Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8235226Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8236031Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8236731Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8237324Z     self.dialect.do_execute(
2025-07-05T16:35:53.8237866Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8238569Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8239029Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8239480Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8239659Z              ^
2025-07-05T16:35:53.8239757Z 
2025-07-05T16:35:53.8240100Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8240601Z FROM "user" 
2025-07-05T16:35:53.8240771Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8241043Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8241397Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8242120Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8242773Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8242939Z              ^
2025-07-05T16:35:53.8243033Z 
2025-07-05T16:35:53.8243376Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8243871Z FROM "user" 
2025-07-05T16:35:53.8244045Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8244309Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8244662Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8245096Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8245902Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8246503Z _______ ERROR at setup of TestRouterEndpoints.test_submission_endpoints ________
2025-07-05T16:35:53.8246934Z tests/test_comprehensive_coverage.py:177: in setup_admin_user
2025-07-05T16:35:53.8247280Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8247548Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8247844Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8248232Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8248862Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8249414Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8249582Z              ^
2025-07-05T16:35:53.8249686Z 
2025-07-05T16:35:53.8250035Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8250530Z FROM "user" 
2025-07-05T16:35:53.8250697Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8250971Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8251317Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8251634Z Traceback (most recent call last):
2025-07-05T16:35:53.8252261Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8253001Z     self.dialect.do_execute(
2025-07-05T16:35:53.8253554Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8254128Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8254464Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8254783Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8254949Z              ^
2025-07-05T16:35:53.8255044Z 
2025-07-05T16:35:53.8255054Z 
2025-07-05T16:35:53.8255216Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8255710Z 
2025-07-05T16:35:53.8255792Z Traceback (most recent call last):
2025-07-05T16:35:53.8256287Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8256763Z     yield session
2025-07-05T16:35:53.8257331Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8257966Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8258586Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8259153Z     raise e
2025-07-05T16:35:53.8259674Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8260269Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8260808Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8261376Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8261899Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8262421Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8262926Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8263420Z     response = await func(request)
2025-07-05T16:35:53.8263639Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8264109Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8264617Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8264872Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8265648Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8266282Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8266582Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8267173Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8267784Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8268056Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8268561Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8269111Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8269393Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8270023Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8270626Z     return await future
2025-07-05T16:35:53.8270858Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8271340Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8272012Z     result = context.run(func, *args)
2025-07-05T16:35:53.8272241Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8272731Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8273306Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8273651Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8274187Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8274824Z     results = super().execute(
2025-07-05T16:35:53.8275040Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8275671Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8276221Z     return self._execute_internal(
2025-07-05T16:35:53.8276442Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8277019Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8277664Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8277974Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8278597Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8279191Z     result = conn.execute(
2025-07-05T16:35:53.8279382Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8279893Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8280417Z     return meth(
2025-07-05T16:35:53.8280579Z            ^^^^^
2025-07-05T16:35:53.8281139Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8281763Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8282018Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8282634Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8283231Z     ret = self._execute_context(
2025-07-05T16:35:53.8283445Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8284007Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8284609Z     return self._exec_single_context(
2025-07-05T16:35:53.8284834Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8285619Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8286231Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8286844Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8287547Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8288225Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8288824Z     self.dialect.do_execute(
2025-07-05T16:35:53.8289375Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8289950Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8290413Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8290864Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8291033Z              ^
2025-07-05T16:35:53.8291129Z 
2025-07-05T16:35:53.8291476Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8292135Z FROM "user" 
2025-07-05T16:35:53.8292307Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8292572Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8292930Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8293698Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8294504Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8294676Z              ^
2025-07-05T16:35:53.8294771Z 
2025-07-05T16:35:53.8295111Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8295728Z FROM "user" 
2025-07-05T16:35:53.8295899Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8296166Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8296514Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8296975Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8297661Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8298255Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8298580Z Traceback (most recent call last):
2025-07-05T16:35:53.8299204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8299801Z     self.dialect.do_execute(
2025-07-05T16:35:53.8300347Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8300929Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8301260Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8301328Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8301396Z              ^
2025-07-05T16:35:53.8301402Z 
2025-07-05T16:35:53.8301406Z 
2025-07-05T16:35:53.8301570Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8301576Z 
2025-07-05T16:35:53.8301661Z Traceback (most recent call last):
2025-07-05T16:35:53.8301999Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8302071Z     yield session
2025-07-05T16:35:53.8302540Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8302640Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8303075Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8303147Z     raise e
2025-07-05T16:35:53.8303575Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8303667Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8304038Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8304136Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8304497Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8304584Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8304923Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8305130Z     response = await func(request)
2025-07-05T16:35:53.8305196Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8305732Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8305843Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8305918Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8306343Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8306482Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8306690Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8307116Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8307236Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8307317Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8307669Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8307794Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8307871Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8308332Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8308406Z     return await future
2025-07-05T16:35:53.8308471Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8308849Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8308936Z     result = context.run(func, *args)
2025-07-05T16:35:53.8309005Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8309349Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8309529Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8309614Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8309971Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8310053Z     results = super().execute(
2025-07-05T16:35:53.8310119Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8310508Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8310594Z     return self._execute_internal(
2025-07-05T16:35:53.8310661Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8311095Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8311245Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8311325Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8311776Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8311854Z     result = conn.execute(
2025-07-05T16:35:53.8311924Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8312301Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8312369Z     return meth(
2025-07-05T16:35:53.8312437Z            ^^^^^
2025-07-05T16:35:53.8312893Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8312994Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8313071Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8313640Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8313721Z     ret = self._execute_context(
2025-07-05T16:35:53.8313792Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8314215Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8314299Z     return self._exec_single_context(
2025-07-05T16:35:53.8314372Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8314812Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8314988Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8315573Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8315752Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8316204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8316282Z     self.dialect.do_execute(
2025-07-05T16:35:53.8316688Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8316787Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8317077Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8317151Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8317216Z              ^
2025-07-05T16:35:53.8317222Z 
2025-07-05T16:35:53.8317571Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8317635Z FROM "user" 
2025-07-05T16:35:53.8317718Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8317849Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8317996Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8318151Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8318504Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8318571Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8318631Z              ^
2025-07-05T16:35:53.8318636Z 
2025-07-05T16:35:53.8318980Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8319046Z FROM "user" 
2025-07-05T16:35:53.8319125Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8319250Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8319391Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8319477Z Traceback (most recent call last):
2025-07-05T16:35:53.8319936Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8320018Z     self.dialect.do_execute(
2025-07-05T16:35:53.8320428Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8320526Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8320686Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8320753Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8320821Z              ^
2025-07-05T16:35:53.8320826Z 
2025-07-05T16:35:53.8320830Z 
2025-07-05T16:35:53.8320993Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8320999Z 
2025-07-05T16:35:53.8321078Z Traceback (most recent call last):
2025-07-05T16:35:53.8321421Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8321657Z     yield session
2025-07-05T16:35:53.8322123Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8322229Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8322662Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8322733Z     raise e
2025-07-05T16:35:53.8323163Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8323367Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8323738Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8323838Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8324192Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8324288Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8324623Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8324709Z     response = await func(request)
2025-07-05T16:35:53.8324775Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8325107Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8325213Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8325284Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8325915Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8326065Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8326147Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8326572Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8326694Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8326770Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8327118Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8327247Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8327329Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8327786Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8327867Z     return await future
2025-07-05T16:35:53.8327935Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8328300Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8328389Z     result = context.run(func, *args)
2025-07-05T16:35:53.8328458Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8328798Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8328977Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8329059Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8329423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8329503Z     results = super().execute(
2025-07-05T16:35:53.8329568Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8329957Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8330164Z     return self._execute_internal(
2025-07-05T16:35:53.8330231Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8330666Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8330810Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8330889Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8331341Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8331533Z     result = conn.execute(
2025-07-05T16:35:53.8331598Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8331981Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8332056Z     return meth(
2025-07-05T16:35:53.8332116Z            ^^^^^
2025-07-05T16:35:53.8332575Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8332675Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8332747Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8333204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8333286Z     ret = self._execute_context(
2025-07-05T16:35:53.8333352Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8333787Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8333872Z     return self._exec_single_context(
2025-07-05T16:35:53.8333945Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8334390Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8334477Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8334936Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8335114Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8335666Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8335756Z     self.dialect.do_execute(
2025-07-05T16:35:53.8336169Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8336268Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8336561Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8336634Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8336694Z              ^
2025-07-05T16:35:53.8336699Z 
2025-07-05T16:35:53.8337044Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8337108Z FROM "user" 
2025-07-05T16:35:53.8337185Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8337314Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8337461Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8337957Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8338034Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8338094Z              ^
2025-07-05T16:35:53.8338098Z 
2025-07-05T16:35:53.8338433Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8338621Z FROM "user" 
2025-07-05T16:35:53.8338699Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8338817Z [parameters: {'email_1': 'coverage_admin@example.com'}]
2025-07-05T16:35:53.8338964Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8339165Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8339487Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8339682Z ______ ERROR at setup of TestUploadsRouter.test_file_upload_various_types ______
2025-07-05T16:35:53.8339941Z tests/test_high_impact_coverage.py:88: in setup_admin_user
2025-07-05T16:35:53.8340050Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8340129Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8340278Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8340431Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8340825Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8340899Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8340961Z              ^
2025-07-05T16:35:53.8340965Z 
2025-07-05T16:35:53.8341302Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8341376Z FROM "user" 
2025-07-05T16:35:53.8341452Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8341572Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8341717Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8341803Z Traceback (most recent call last):
2025-07-05T16:35:53.8342268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8342359Z     self.dialect.do_execute(
2025-07-05T16:35:53.8342769Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8342865Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8343031Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8343098Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8343159Z              ^
2025-07-05T16:35:53.8343164Z 
2025-07-05T16:35:53.8343168Z 
2025-07-05T16:35:53.8343342Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8343348Z 
2025-07-05T16:35:53.8343428Z Traceback (most recent call last):
2025-07-05T16:35:53.8343768Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8343847Z     yield session
2025-07-05T16:35:53.8344313Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8344411Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8344849Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8344919Z     raise e
2025-07-05T16:35:53.8345481Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8345642Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8346015Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8346118Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8346470Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8346682Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8347031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8347113Z     response = await func(request)
2025-07-05T16:35:53.8347179Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8347518Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8347615Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8347687Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8348227Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8348359Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8348436Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8348864Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8348977Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8349057Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8349405Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8349529Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8349615Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8350077Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8350150Z     return await future
2025-07-05T16:35:53.8350221Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8350589Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8350680Z     result = context.run(func, *args)
2025-07-05T16:35:53.8350756Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8351098Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8351269Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8351359Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8351708Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8351790Z     results = super().execute(
2025-07-05T16:35:53.8351863Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8352251Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8352332Z     return self._execute_internal(
2025-07-05T16:35:53.8352408Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8352837Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8352988Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8353068Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8353516Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8353599Z     result = conn.execute(
2025-07-05T16:35:53.8353671Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8354053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8354126Z     return meth(
2025-07-05T16:35:53.8354186Z            ^^^^^
2025-07-05T16:35:53.8354643Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8354837Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8354912Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8355478Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8355566Z     ret = self._execute_context(
2025-07-05T16:35:53.8355632Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8356061Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8356277Z     return self._exec_single_context(
2025-07-05T16:35:53.8356346Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8356790Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8356888Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8357341Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8357524Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8357967Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8358046Z     self.dialect.do_execute(
2025-07-05T16:35:53.8358457Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8358553Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8358842Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8358924Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8358985Z              ^
2025-07-05T16:35:53.8358994Z 
2025-07-05T16:35:53.8359336Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8359405Z FROM "user" 
2025-07-05T16:35:53.8359482Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8359602Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8359753Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8360297Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8360371Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8360432Z              ^
2025-07-05T16:35:53.8360443Z 
2025-07-05T16:35:53.8360775Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8360844Z FROM "user" 
2025-07-05T16:35:53.8360920Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8361041Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8361215Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8361448Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8361814Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8361966Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8362052Z Traceback (most recent call last):
2025-07-05T16:35:53.8362508Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8362588Z     self.dialect.do_execute(
2025-07-05T16:35:53.8362996Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8363220Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8363383Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8363451Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8363519Z              ^
2025-07-05T16:35:53.8363523Z 
2025-07-05T16:35:53.8363528Z 
2025-07-05T16:35:53.8363698Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8363704Z 
2025-07-05T16:35:53.8363785Z Traceback (most recent call last):
2025-07-05T16:35:53.8364128Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8364285Z     yield session
2025-07-05T16:35:53.8364757Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8364854Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8365294Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8365549Z     raise e
2025-07-05T16:35:53.8366043Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8366136Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8366510Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8366607Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8366971Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8367057Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8367395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8367489Z     response = await func(request)
2025-07-05T16:35:53.8367555Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8367889Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8367995Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8368067Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8368483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8368627Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8368704Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8369121Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8369246Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8369325Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8369673Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8369801Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8369878Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8370339Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8370414Z     return await future
2025-07-05T16:35:53.8370481Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8370854Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8370941Z     result = context.run(func, *args)
2025-07-05T16:35:53.8371009Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8371484Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8371660Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8371743Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8372101Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8372180Z     results = super().execute(
2025-07-05T16:35:53.8372247Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8372636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8372853Z     return self._execute_internal(
2025-07-05T16:35:53.8372922Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8373356Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8373509Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8373589Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8374042Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8374122Z     result = conn.execute(
2025-07-05T16:35:53.8374188Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8374572Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8374643Z     return meth(
2025-07-05T16:35:53.8374704Z            ^^^^^
2025-07-05T16:35:53.8375164Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8375268Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8375464Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8375924Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8376007Z     ret = self._execute_context(
2025-07-05T16:35:53.8376077Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8376502Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8376587Z     return self._exec_single_context(
2025-07-05T16:35:53.8376660Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8377107Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8377190Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8377649Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8377832Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8378273Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8378358Z     self.dialect.do_execute(
2025-07-05T16:35:53.8378766Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8378867Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8379168Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8379240Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8379305Z              ^
2025-07-05T16:35:53.8379311Z 
2025-07-05T16:35:53.8379653Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8379836Z FROM "user" 
2025-07-05T16:35:53.8379915Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8380041Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8380189Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8380338Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8380690Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8380757Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8380818Z              ^
2025-07-05T16:35:53.8380823Z 
2025-07-05T16:35:53.8381308Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8381371Z FROM "user" 
2025-07-05T16:35:53.8381449Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8381572Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8381719Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8381803Z Traceback (most recent call last):
2025-07-05T16:35:53.8382278Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8382365Z     self.dialect.do_execute(
2025-07-05T16:35:53.8382779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8382881Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8383047Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8383121Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8383185Z              ^
2025-07-05T16:35:53.8383191Z 
2025-07-05T16:35:53.8383194Z 
2025-07-05T16:35:53.8383361Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8383367Z 
2025-07-05T16:35:53.8383450Z Traceback (most recent call last):
2025-07-05T16:35:53.8383798Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8383866Z     yield session
2025-07-05T16:35:53.8384330Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8384437Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8384874Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8384949Z     raise e
2025-07-05T16:35:53.8385557Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8385690Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8386066Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8386168Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8386520Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8386614Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8386955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8387038Z     response = await func(request)
2025-07-05T16:35:53.8387110Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8387443Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8387545Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8387623Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8388040Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8388336Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8388414Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8388836Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8388958Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8389034Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8389388Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8389633Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8389709Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8390169Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8390253Z     return await future
2025-07-05T16:35:53.8390322Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8390692Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8390785Z     result = context.run(func, *args)
2025-07-05T16:35:53.8390853Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8391191Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8391372Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8391458Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8391811Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8391896Z     results = super().execute(
2025-07-05T16:35:53.8391964Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8392357Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8392439Z     return self._execute_internal(
2025-07-05T16:35:53.8392505Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8392938Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8393086Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8393166Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8393619Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8393699Z     result = conn.execute(
2025-07-05T16:35:53.8393764Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8394149Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8394224Z     return meth(
2025-07-05T16:35:53.8394284Z            ^^^^^
2025-07-05T16:35:53.8394743Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8394841Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8394915Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8395486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8395569Z     ret = self._execute_context(
2025-07-05T16:35:53.8395639Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8396071Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8396155Z     return self._exec_single_context(
2025-07-05T16:35:53.8396224Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8396797Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8396880Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8397342Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8397521Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8397962Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8398161Z     self.dialect.do_execute(
2025-07-05T16:35:53.8398568Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8398660Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8398959Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8399042Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8399103Z              ^
2025-07-05T16:35:53.8399108Z 
2025-07-05T16:35:53.8399460Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8399524Z FROM "user" 
2025-07-05T16:35:53.8399602Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8399728Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8399877Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8400373Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8400448Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8400507Z              ^
2025-07-05T16:35:53.8400512Z 
2025-07-05T16:35:53.8400845Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8400920Z FROM "user" 
2025-07-05T16:35:53.8400996Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8401114Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8401255Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8401455Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8401776Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8401969Z _______ ERROR at setup of TestUploadsRouter.test_file_upload_edge_cases ________
2025-07-05T16:35:53.8402111Z tests/test_high_impact_coverage.py:88: in setup_admin_user
2025-07-05T16:35:53.8402224Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8402304Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8402454Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8402602Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8402999Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8403072Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8403133Z              ^
2025-07-05T16:35:53.8403137Z 
2025-07-05T16:35:53.8403473Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8403544Z FROM "user" 
2025-07-05T16:35:53.8403618Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8403733Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8403876Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8403964Z Traceback (most recent call last):
2025-07-05T16:35:53.8404524Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8404606Z     self.dialect.do_execute(
2025-07-05T16:35:53.8405022Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8405115Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8405276Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8405507Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8405612Z              ^
2025-07-05T16:35:53.8405749Z 
2025-07-05T16:35:53.8405753Z 
2025-07-05T16:35:53.8405932Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8405943Z 
2025-07-05T16:35:53.8406026Z Traceback (most recent call last):
2025-07-05T16:35:53.8406388Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8406473Z     yield session
2025-07-05T16:35:53.8406948Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8407051Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8407494Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8407562Z     raise e
2025-07-05T16:35:53.8407992Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8408092Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8408460Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8408561Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8408927Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8409017Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8409374Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8409456Z     response = await func(request)
2025-07-05T16:35:53.8409523Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8409861Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8409962Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8410038Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8410459Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8410594Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8410675Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8411104Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8411220Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8411295Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8411646Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8411769Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8411848Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8412308Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8412382Z     return await future
2025-07-05T16:35:53.8412452Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8412939Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8413027Z     result = context.run(func, *args)
2025-07-05T16:35:53.8413101Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8413440Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8413612Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8413700Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8414053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8414222Z     results = super().execute(
2025-07-05T16:35:53.8414294Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8414676Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8414764Z     return self._execute_internal(
2025-07-05T16:35:53.8414835Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8415269Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8415535Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8415622Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8416071Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8416158Z     result = conn.execute(
2025-07-05T16:35:53.8416224Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8416600Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8416672Z     return meth(
2025-07-05T16:35:53.8416737Z            ^^^^^
2025-07-05T16:35:53.8417190Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8417296Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8417368Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8417821Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8417907Z     ret = self._execute_context(
2025-07-05T16:35:53.8417974Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8418399Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8418492Z     return self._exec_single_context(
2025-07-05T16:35:53.8418561Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8419000Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8419090Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8419548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8419728Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8420175Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8420253Z     self.dialect.do_execute(
2025-07-05T16:35:53.8420662Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8420760Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8421055Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8421129Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8421308Z              ^
2025-07-05T16:35:53.8421313Z 
2025-07-05T16:35:53.8421655Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8421724Z FROM "user" 
2025-07-05T16:35:53.8421802Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8421921Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8422070Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8422616Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8422797Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8422858Z              ^
2025-07-05T16:35:53.8422862Z 
2025-07-05T16:35:53.8423204Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8423271Z FROM "user" 
2025-07-05T16:35:53.8423345Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8423463Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8423606Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8423845Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.8424213Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8424369Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8424451Z Traceback (most recent call last):
2025-07-05T16:35:53.8424907Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8424987Z     self.dialect.do_execute(
2025-07-05T16:35:53.8425556Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8425671Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8425832Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8425900Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8425966Z              ^
2025-07-05T16:35:53.8425971Z 
2025-07-05T16:35:53.8425976Z 
2025-07-05T16:35:53.8426139Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8426144Z 
2025-07-05T16:35:53.8426227Z Traceback (most recent call last):
2025-07-05T16:35:53.8426579Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8426647Z     yield session
2025-07-05T16:35:53.8427110Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8427221Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8427651Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8427723Z     raise e
2025-07-05T16:35:53.8428155Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8428246Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8428614Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8428715Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8429064Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8429157Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8429492Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8429703Z     response = await func(request)
2025-07-05T16:35:53.8429769Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8430100Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8430202Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8430273Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8430687Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8430941Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8431017Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8431434Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8431558Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8431632Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8431975Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8432104Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8432181Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8432636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8432719Z     return await future
2025-07-05T16:35:53.8432782Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8433150Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8433243Z     result = context.run(func, *args)
2025-07-05T16:35:53.8433317Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8433659Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8433830Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8433914Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8434269Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8434347Z     results = super().execute(
2025-07-05T16:35:53.8434413Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8434804Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8434884Z     return self._execute_internal(
2025-07-05T16:35:53.8434950Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8435486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8435638Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8435717Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8436168Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8436245Z     result = conn.execute(
2025-07-05T16:35:53.8436311Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8436691Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8436764Z     return meth(
2025-07-05T16:35:53.8436825Z            ^^^^^
2025-07-05T16:35:53.8437288Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8437386Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8437575Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8438031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8438113Z     ret = self._execute_context(
2025-07-05T16:35:53.8438179Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8438608Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8438692Z     return self._exec_single_context(
2025-07-05T16:35:53.8438763Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8439318Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8439400Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8439859Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8440043Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8440483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8440569Z     self.dialect.do_execute(
2025-07-05T16:35:53.8440974Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8441073Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8441365Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8441439Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8441498Z              ^
2025-07-05T16:35:53.8441504Z 
2025-07-05T16:35:53.8441847Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8441914Z FROM "user" 
2025-07-05T16:35:53.8441990Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8442116Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8442262Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8442411Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8442762Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8442831Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8442890Z              ^
2025-07-05T16:35:53.8442901Z 
2025-07-05T16:35:53.8443237Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8443300Z FROM "user" 
2025-07-05T16:35:53.8443376Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8443499Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8452064Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8452188Z Traceback (most recent call last):
2025-07-05T16:35:53.8452713Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8452811Z     self.dialect.do_execute(
2025-07-05T16:35:53.8453236Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8453336Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8453525Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8453598Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8453661Z              ^
2025-07-05T16:35:53.8453668Z 
2025-07-05T16:35:53.8453673Z 
2025-07-05T16:35:53.8453856Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8454041Z 
2025-07-05T16:35:53.8454131Z Traceback (most recent call last):
2025-07-05T16:35:53.8454493Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8454569Z     yield session
2025-07-05T16:35:53.8455055Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8455162Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8455752Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8456003Z     raise e
2025-07-05T16:35:53.8456450Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8456544Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8456910Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8457020Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8457373Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8457465Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8457802Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8457889Z     response = await func(request)
2025-07-05T16:35:53.8457962Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8458321Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8458423Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8458504Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8458937Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8459079Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8459169Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8459613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8459736Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8459819Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8460184Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8460324Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8460401Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8460872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8460956Z     return await future
2025-07-05T16:35:53.8461022Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8461433Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8461529Z     result = context.run(func, *args)
2025-07-05T16:35:53.8461600Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8461945Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8462131Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8462224Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8462584Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8462677Z     results = super().execute(
2025-07-05T16:35:53.8462952Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8463358Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8463450Z     return self._execute_internal(
2025-07-05T16:35:53.8463516Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8463959Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8464115Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8464194Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8464762Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8464848Z     result = conn.execute(
2025-07-05T16:35:53.8464915Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8465304Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8465530Z     return meth(
2025-07-05T16:35:53.8465643Z            ^^^^^
2025-07-05T16:35:53.8466121Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8466225Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8466298Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8466757Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8466846Z     ret = self._execute_context(
2025-07-05T16:35:53.8466912Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8467345Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8467433Z     return self._exec_single_context(
2025-07-05T16:35:53.8467508Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8467961Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8468044Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8468500Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8468688Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8469134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8469223Z     self.dialect.do_execute(
2025-07-05T16:35:53.8469636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8469735Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8470039Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8470110Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8470172Z              ^
2025-07-05T16:35:53.8470177Z 
2025-07-05T16:35:53.8470534Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8470599Z FROM "user" 
2025-07-05T16:35:53.8470676Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8470800Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8470957Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8471462Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8471534Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8471600Z              ^
2025-07-05T16:35:53.8471730Z 
2025-07-05T16:35:53.8472077Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8472140Z FROM "user" 
2025-07-05T16:35:53.8472223Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8472344Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8472492Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8472697Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.8473026Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8473330Z ________ ERROR at setup of TestUploadsRouter.test_get_uploads_endpoints ________
2025-07-05T16:35:53.8473479Z tests/test_high_impact_coverage.py:88: in setup_admin_user
2025-07-05T16:35:53.8473591Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8473674Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8473820Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8473972Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8474369Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8474440Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8474506Z              ^
2025-07-05T16:35:53.8474511Z 
2025-07-05T16:35:53.8474848Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8474916Z FROM "user" 
2025-07-05T16:35:53.8474999Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8475118Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8475262Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8475467Z Traceback (most recent call last):
2025-07-05T16:35:53.8475938Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8476021Z     self.dialect.do_execute(
2025-07-05T16:35:53.8476443Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8476540Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8476703Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8476775Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8476840Z              ^
2025-07-05T16:35:53.8476845Z 
2025-07-05T16:35:53.8476849Z 
2025-07-05T16:35:53.8477015Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8477021Z 
2025-07-05T16:35:53.8477106Z Traceback (most recent call last):
2025-07-05T16:35:53.8477444Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8477518Z     yield session
2025-07-05T16:35:53.8477993Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8478093Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8478536Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8478604Z     raise e
2025-07-05T16:35:53.8479036Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8479136Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8479503Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8479599Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8480080Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8480170Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8480512Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8480599Z     response = await func(request)
2025-07-05T16:35:53.8480666Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8481005Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8481225Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8481296Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8481721Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8481857Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8481938Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8482366Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8482482Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8482557Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8482912Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8483039Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8483124Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8483588Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8483662Z     return await future
2025-07-05T16:35:53.8483730Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8484105Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8484194Z     result = context.run(func, *args)
2025-07-05T16:35:53.8484262Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8484608Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8484780Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8484863Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8485225Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8485304Z     results = super().execute(
2025-07-05T16:35:53.8485521Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8485954Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8486044Z     return self._execute_internal(
2025-07-05T16:35:53.8486115Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8486548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8486694Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8486778Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8487230Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8487312Z     result = conn.execute(
2025-07-05T16:35:53.8487382Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8487765Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8487955Z     return meth(
2025-07-05T16:35:53.8488022Z            ^^^^^
2025-07-05T16:35:53.8488482Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8488582Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8488659Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8489122Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8489202Z     ret = self._execute_context(
2025-07-05T16:35:53.8489275Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8489817Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8489907Z     return self._exec_single_context(
2025-07-05T16:35:53.8489977Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8490420Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8490515Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8490971Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8491153Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8491602Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8491682Z     self.dialect.do_execute(
2025-07-05T16:35:53.8492097Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8492197Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8492489Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8492564Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8492632Z              ^
2025-07-05T16:35:53.8492638Z 
2025-07-05T16:35:53.8492981Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8493047Z FROM "user" 
2025-07-05T16:35:53.8493130Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8493251Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8493399Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8493945Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8494019Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8494079Z              ^
2025-07-05T16:35:53.8494084Z 
2025-07-05T16:35:53.8494429Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8494497Z FROM "user" 
2025-07-05T16:35:53.8494572Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8494684Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8494831Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8495069Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8495548Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8495712Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8495796Z Traceback (most recent call last):
2025-07-05T16:35:53.8496252Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8496455Z     self.dialect.do_execute(
2025-07-05T16:35:53.8496868Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8496972Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8497134Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8497201Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8497263Z              ^
2025-07-05T16:35:53.8497274Z 
2025-07-05T16:35:53.8497278Z 
2025-07-05T16:35:53.8497440Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8497558Z 
2025-07-05T16:35:53.8497639Z Traceback (most recent call last):
2025-07-05T16:35:53.8497986Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8498057Z     yield session
2025-07-05T16:35:53.8498526Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8498639Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8499073Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8499141Z     raise e
2025-07-05T16:35:53.8499581Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8499672Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8500047Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8500148Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8500501Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8500595Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8500939Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8501023Z     response = await func(request)
2025-07-05T16:35:53.8501096Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8501431Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8501532Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8501607Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8502036Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8502178Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8502257Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8502694Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8502814Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8502889Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8503249Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8503376Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8503451Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8503920Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8503998Z     return await future
2025-07-05T16:35:53.8504063Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8504441Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8504618Z     result = context.run(func, *args)
2025-07-05T16:35:53.8504687Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8505039Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8505213Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8505304Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8505855Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8505940Z     results = super().execute(
2025-07-05T16:35:53.8506145Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8506540Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8506624Z     return self._execute_internal(
2025-07-05T16:35:53.8506696Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8507135Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8507284Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8507369Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8507820Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8507898Z     result = conn.execute(
2025-07-05T16:35:53.8507969Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8508353Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8508429Z     return meth(
2025-07-05T16:35:53.8508495Z            ^^^^^
2025-07-05T16:35:53.8508955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8509058Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8509143Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8509599Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8509688Z     ret = self._execute_context(
2025-07-05T16:35:53.8509755Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8510181Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8510272Z     return self._exec_single_context(
2025-07-05T16:35:53.8510344Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8510787Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8510878Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8511338Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8511518Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8511966Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8512047Z     self.dialect.do_execute(
2025-07-05T16:35:53.8512461Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8512557Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8512850Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8512924Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8512985Z              ^
2025-07-05T16:35:53.8512990Z 
2025-07-05T16:35:53.8513334Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8513518Z FROM "user" 
2025-07-05T16:35:53.8513601Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8513720Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8513871Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8514028Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8514378Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8514447Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8514598Z              ^
2025-07-05T16:35:53.8514603Z 
2025-07-05T16:35:53.8514938Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8515001Z FROM "user" 
2025-07-05T16:35:53.8515084Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8515204Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8515457Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8515542Z Traceback (most recent call last):
2025-07-05T16:35:53.8516007Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8516088Z     self.dialect.do_execute(
2025-07-05T16:35:53.8516504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8516603Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8516764Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8516838Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8516898Z              ^
2025-07-05T16:35:53.8516903Z 
2025-07-05T16:35:53.8516907Z 
2025-07-05T16:35:53.8517071Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8517081Z 
2025-07-05T16:35:53.8517164Z Traceback (most recent call last):
2025-07-05T16:35:53.8517504Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8517573Z     yield session
2025-07-05T16:35:53.8518046Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8518146Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8518578Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8518656Z     raise e
2025-07-05T16:35:53.8519086Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8519186Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8519553Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8519649Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8520008Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8520095Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8520436Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8520526Z     response = await func(request)
2025-07-05T16:35:53.8520594Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8520937Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8521045Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8521119Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8521698Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8521843Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8521921Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8522350Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8522466Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8522540Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8523013Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8523138Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8523217Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8523685Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8523765Z     return await future
2025-07-05T16:35:53.8523832Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8524209Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8524300Z     result = context.run(func, *args)
2025-07-05T16:35:53.8524369Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8524714Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8524894Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8524978Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8525337Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8525600Z     results = super().execute(
2025-07-05T16:35:53.8525668Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8526064Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8526147Z     return self._execute_internal(
2025-07-05T16:35:53.8526218Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8526661Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8526809Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8526896Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8527346Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8527427Z     result = conn.execute(
2025-07-05T16:35:53.8527497Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8527881Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8527947Z     return meth(
2025-07-05T16:35:53.8528013Z            ^^^^^
2025-07-05T16:35:53.8528470Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8528570Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8528646Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8529098Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8529183Z     ret = self._execute_context(
2025-07-05T16:35:53.8529256Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8529689Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8529900Z     return self._exec_single_context(
2025-07-05T16:35:53.8529977Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8530422Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8530506Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8530964Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8531145Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8531715Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8531796Z     self.dialect.do_execute(
2025-07-05T16:35:53.8532207Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8532311Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8532605Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8532674Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8532742Z              ^
2025-07-05T16:35:53.8532748Z 
2025-07-05T16:35:53.8533089Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8533152Z FROM "user" 
2025-07-05T16:35:53.8533234Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8533357Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8533511Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8534008Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8534084Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8534150Z              ^
2025-07-05T16:35:53.8534156Z 
2025-07-05T16:35:53.8534495Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8534564Z FROM "user" 
2025-07-05T16:35:53.8534640Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8534757Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8534905Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8535100Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8535540Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8535744Z _____ ERROR at setup of TestUploadsRouter.test_upload_management_endpoints _____
2025-07-05T16:35:53.8535881Z tests/test_high_impact_coverage.py:88: in setup_admin_user
2025-07-05T16:35:53.8535998Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8536083Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8536227Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8536377Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8536769Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8536845Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8536908Z              ^
2025-07-05T16:35:53.8536913Z 
2025-07-05T16:35:53.8537253Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8537323Z FROM "user" 
2025-07-05T16:35:53.8537399Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8537516Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8537782Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8537864Z Traceback (most recent call last):
2025-07-05T16:35:53.8538324Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8538413Z     self.dialect.do_execute(
2025-07-05T16:35:53.8538825Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8538918Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8539084Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8539271Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8539331Z              ^
2025-07-05T16:35:53.8539337Z 
2025-07-05T16:35:53.8539341Z 
2025-07-05T16:35:53.8539522Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8539528Z 
2025-07-05T16:35:53.8539608Z Traceback (most recent call last):
2025-07-05T16:35:53.8539955Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8540029Z     yield session
2025-07-05T16:35:53.8540498Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8540604Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8541039Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8541109Z     raise e
2025-07-05T16:35:53.8541558Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8541648Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8542015Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8542124Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8542475Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8542570Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8542908Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8542989Z     response = await func(request)
2025-07-05T16:35:53.8543062Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8543395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8543497Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8543574Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8543996Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8544135Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8544218Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8544639Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8544751Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8544829Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8545178Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8545304Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8545535Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8546038Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8546267Z     return await future
2025-07-05T16:35:53.8546332Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8546708Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8546800Z     result = context.run(func, *args)
2025-07-05T16:35:53.8546869Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8547212Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8547392Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8547593Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8547946Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8548031Z     results = super().execute(
2025-07-05T16:35:53.8548097Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8548486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8548574Z     return self._execute_internal(
2025-07-05T16:35:53.8548641Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8549071Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8549222Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8549303Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8549751Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8549841Z     result = conn.execute(
2025-07-05T16:35:53.8549908Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8550286Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8550364Z     return meth(
2025-07-05T16:35:53.8550424Z            ^^^^^
2025-07-05T16:35:53.8550879Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8550983Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8551054Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8551513Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8551595Z     ret = self._execute_context(
2025-07-05T16:35:53.8551666Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8552095Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8552181Z     return self._exec_single_context(
2025-07-05T16:35:53.8552250Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8552704Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8552787Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8553242Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8553427Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8553867Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8553954Z     self.dialect.do_execute(
2025-07-05T16:35:53.8554364Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8554458Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8554757Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8554910Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8554972Z              ^
2025-07-05T16:35:53.8554977Z 
2025-07-05T16:35:53.8555321Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8555493Z FROM "user" 
2025-07-05T16:35:53.8555573Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8555693Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8555844Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8556510Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8556580Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8556645Z              ^
2025-07-05T16:35:53.8556650Z 
2025-07-05T16:35:53.8556992Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8557056Z FROM "user" 
2025-07-05T16:35:53.8557139Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8557253Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8557393Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8557633Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8557999Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8558153Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8558240Z Traceback (most recent call last):
2025-07-05T16:35:53.8558696Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8558781Z     self.dialect.do_execute(
2025-07-05T16:35:53.8559194Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8559287Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8559449Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8559524Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8559584Z              ^
2025-07-05T16:35:53.8559589Z 
2025-07-05T16:35:53.8559593Z 
2025-07-05T16:35:53.8559754Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8559764Z 
2025-07-05T16:35:53.8559848Z Traceback (most recent call last):
2025-07-05T16:35:53.8560185Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8560253Z     yield session
2025-07-05T16:35:53.8560719Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8560822Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8561289Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8561357Z     raise e
2025-07-05T16:35:53.8561790Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8561886Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8562253Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8562351Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8562707Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8562912Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8563249Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8563335Z     response = await func(request)
2025-07-05T16:35:53.8563401Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8563737Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8563835Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8563906Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8564418Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8564552Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8564628Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8565056Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8565175Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8565248Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8565816Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8565949Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8566026Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8566500Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8566581Z     return await future
2025-07-05T16:35:53.8566647Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8567025Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8567116Z     result = context.run(func, *args)
2025-07-05T16:35:53.8567184Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8567529Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8567703Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8567786Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8568146Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8568228Z     results = super().execute(
2025-07-05T16:35:53.8568298Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8568685Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8568769Z     return self._execute_internal(
2025-07-05T16:35:53.8568846Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8569279Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8569425Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8569508Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8569964Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8570040Z     result = conn.execute(
2025-07-05T16:35:53.8570112Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8570498Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8570565Z     return meth(
2025-07-05T16:35:53.8570630Z            ^^^^^
2025-07-05T16:35:53.8571086Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8571314Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8571391Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8571848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8571930Z     ret = self._execute_context(
2025-07-05T16:35:53.8572000Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8572424Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8572631Z     return self._exec_single_context(
2025-07-05T16:35:53.8572698Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8573143Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8573230Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8573689Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8573869Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8574317Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8574397Z     self.dialect.do_execute(
2025-07-05T16:35:53.8574806Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8574914Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8575204Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8575271Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8575338Z              ^
2025-07-05T16:35:53.8575461Z 
2025-07-05T16:35:53.8575810Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8575874Z FROM "user" 
2025-07-05T16:35:53.8575956Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8576077Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8576225Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8576380Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8576729Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8576803Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8576868Z              ^
2025-07-05T16:35:53.8576873Z 
2025-07-05T16:35:53.8577208Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8577276Z FROM "user" 
2025-07-05T16:35:53.8577350Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8577469Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8577611Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8577692Z Traceback (most recent call last):
2025-07-05T16:35:53.8578150Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8578230Z     self.dialect.do_execute(
2025-07-05T16:35:53.8578648Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8578745Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8578908Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8578982Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8579042Z              ^
2025-07-05T16:35:53.8579047Z 
2025-07-05T16:35:53.8579050Z 
2025-07-05T16:35:53.8579335Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8579340Z 
2025-07-05T16:35:53.8579424Z Traceback (most recent call last):
2025-07-05T16:35:53.8579772Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8579840Z     yield session
2025-07-05T16:35:53.8580309Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8580410Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8580847Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8581030Z     raise e
2025-07-05T16:35:53.8581462Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8581567Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8581931Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8582028Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8582387Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8582472Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8582811Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8582899Z     response = await func(request)
2025-07-05T16:35:53.8582970Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8583304Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8583409Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8583479Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8583903Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8584043Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8584118Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8584546Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8584659Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8584733Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8585094Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8585218Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8585294Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8585954Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8586035Z     return await future
2025-07-05T16:35:53.8586100Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8586479Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8586566Z     result = context.run(func, *args)
2025-07-05T16:35:53.8586635Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8586979Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8587155Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8587239Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8587598Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8587844Z     results = super().execute(
2025-07-05T16:35:53.8587908Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8588302Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8588386Z     return self._execute_internal(
2025-07-05T16:35:53.8588451Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8588885Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8589033Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8589234Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8589682Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8589760Z     result = conn.execute(
2025-07-05T16:35:53.8589834Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8590217Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8590284Z     return meth(
2025-07-05T16:35:53.8590350Z            ^^^^^
2025-07-05T16:35:53.8590806Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8590906Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8590983Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8591434Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8591518Z     ret = self._execute_context(
2025-07-05T16:35:53.8591591Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8592019Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8592107Z     return self._exec_single_context(
2025-07-05T16:35:53.8592179Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8592621Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8592705Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8593166Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8593346Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8593802Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8593882Z     self.dialect.do_execute(
2025-07-05T16:35:53.8594291Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8594393Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8594683Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8594751Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8594817Z              ^
2025-07-05T16:35:53.8594822Z 
2025-07-05T16:35:53.8595164Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8595227Z FROM "user" 
2025-07-05T16:35:53.8595308Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8595551Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8595708Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8596207Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8596395Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8596454Z              ^
2025-07-05T16:35:53.8596459Z 
2025-07-05T16:35:53.8596797Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8596867Z FROM "user" 
2025-07-05T16:35:53.8596943Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8597056Z [parameters: {'email_1': 'upload_admin@example.com'}]
2025-07-05T16:35:53.8597202Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8597395Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8597836Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8598040Z ___ ERROR at setup of TestExportRouter.test_export_checklist_various_formats ___
2025-07-05T16:35:53.8598180Z tests/test_high_impact_coverage.py:202: in setup_admin_user
2025-07-05T16:35:53.8598297Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8598380Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8598522Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8598669Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8599067Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8599136Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8599197Z              ^
2025-07-05T16:35:53.8599205Z 
2025-07-05T16:35:53.8599544Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8599613Z FROM "user" 
2025-07-05T16:35:53.8599691Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8599805Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8599959Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8600040Z Traceback (most recent call last):
2025-07-05T16:35:53.8600501Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8600588Z     self.dialect.do_execute(
2025-07-05T16:35:53.8601000Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8601091Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8601260Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8601326Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8601387Z              ^
2025-07-05T16:35:53.8601391Z 
2025-07-05T16:35:53.8601395Z 
2025-07-05T16:35:53.8601562Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8601572Z 
2025-07-05T16:35:53.8601652Z Traceback (most recent call last):
2025-07-05T16:35:53.8601988Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8602061Z     yield session
2025-07-05T16:35:53.8602528Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8602631Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8603064Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8603133Z     raise e
2025-07-05T16:35:53.8603568Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8603657Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8604022Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8604210Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8604563Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8604655Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8604993Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8605074Z     response = await func(request)
2025-07-05T16:35:53.8605147Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8605658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8605897Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8605976Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8606401Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8606539Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8606623Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8607045Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8607157Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8607236Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8607583Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8607710Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8607793Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8608253Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8608335Z     return await future
2025-07-05T16:35:53.8608406Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8608783Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8608868Z     result = context.run(func, *args)
2025-07-05T16:35:53.8608936Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8609280Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8609453Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8609540Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8609909Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8609988Z     results = super().execute(
2025-07-05T16:35:53.8610062Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8610450Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8610533Z     return self._execute_internal(
2025-07-05T16:35:53.8610605Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8611039Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8611188Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8611272Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8611726Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8611803Z     result = conn.execute(
2025-07-05T16:35:53.8611874Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8612255Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8612439Z     return meth(
2025-07-05T16:35:53.8612505Z            ^^^^^
2025-07-05T16:35:53.8612965Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8613065Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8613144Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8613599Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8613795Z     ret = self._execute_context(
2025-07-05T16:35:53.8613867Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8614293Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8614388Z     return self._exec_single_context(
2025-07-05T16:35:53.8614460Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8614905Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8614992Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8615567Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8615749Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8616198Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8616284Z     self.dialect.do_execute(
2025-07-05T16:35:53.8616697Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8616796Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8617092Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8617160Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8617226Z              ^
2025-07-05T16:35:53.8617232Z 
2025-07-05T16:35:53.8617572Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8617635Z FROM "user" 
2025-07-05T16:35:53.8617718Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8617843Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8617994Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8618547Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8618618Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8618676Z              ^
2025-07-05T16:35:53.8618685Z 
2025-07-05T16:35:53.8619026Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8619090Z FROM "user" 
2025-07-05T16:35:53.8619165Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8619277Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8619422Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8619660Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8620035Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8620194Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8620278Z Traceback (most recent call last):
2025-07-05T16:35:53.8620737Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8620951Z     self.dialect.do_execute(
2025-07-05T16:35:53.8621381Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8621481Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8621647Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8621714Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8621773Z              ^
2025-07-05T16:35:53.8621783Z 
2025-07-05T16:35:53.8621901Z 
2025-07-05T16:35:53.8622069Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8622075Z 
2025-07-05T16:35:53.8622154Z Traceback (most recent call last):
2025-07-05T16:35:53.8622502Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8622575Z     yield session
2025-07-05T16:35:53.8623045Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8623151Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8623588Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8623653Z     raise e
2025-07-05T16:35:53.8624095Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8624188Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8624562Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8624660Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8625013Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8625111Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8625632Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8625719Z     response = await func(request)
2025-07-05T16:35:53.8625792Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8626134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8626233Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8626310Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8626736Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8626869Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8626950Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8627375Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8627492Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8627566Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8627915Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8628044Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8628122Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8628583Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8628662Z     return await future
2025-07-05T16:35:53.8628727Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8629099Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8629339Z     result = context.run(func, *args)
2025-07-05T16:35:53.8629407Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8629760Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8629937Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8630019Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8630374Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8630573Z     results = super().execute(
2025-07-05T16:35:53.8630641Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8631035Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8631128Z     return self._execute_internal(
2025-07-05T16:35:53.8631194Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8631625Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8631780Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8631857Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8632312Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8632388Z     result = conn.execute(
2025-07-05T16:35:53.8632457Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8632842Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8632909Z     return meth(
2025-07-05T16:35:53.8632970Z            ^^^^^
2025-07-05T16:35:53.8633435Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8633539Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8633611Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8634068Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8634149Z     ret = self._execute_context(
2025-07-05T16:35:53.8634215Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8634646Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8634734Z     return self._exec_single_context(
2025-07-05T16:35:53.8634801Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8635250Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8635338Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8635905Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8636091Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8636534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8636619Z     self.dialect.do_execute(
2025-07-05T16:35:53.8637034Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8637133Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8637429Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8637498Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8637558Z              ^
2025-07-05T16:35:53.8637681Z 
2025-07-05T16:35:53.8638031Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8638096Z FROM "user" 
2025-07-05T16:35:53.8638173Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8638297Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8638443Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8638595Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8638941Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8639128Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8639188Z              ^
2025-07-05T16:35:53.8639193Z 
2025-07-05T16:35:53.8639527Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8639599Z FROM "user" 
2025-07-05T16:35:53.8639675Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8639789Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8639936Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8640017Z Traceback (most recent call last):
2025-07-05T16:35:53.8640475Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8640560Z     self.dialect.do_execute(
2025-07-05T16:35:53.8640969Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8641064Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8641234Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8641303Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8641362Z              ^
2025-07-05T16:35:53.8641372Z 
2025-07-05T16:35:53.8641376Z 
2025-07-05T16:35:53.8641541Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8641547Z 
2025-07-05T16:35:53.8641626Z Traceback (most recent call last):
2025-07-05T16:35:53.8641965Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8642040Z     yield session
2025-07-05T16:35:53.8642503Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8642608Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8643049Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8643115Z     raise e
2025-07-05T16:35:53.8643551Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8643646Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8644011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8644113Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8644462Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8644550Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8644893Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8644977Z     response = await func(request)
2025-07-05T16:35:53.8645049Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8645520Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8645659Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8645860Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8646287Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8646420Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8646502Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8646923Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8647036Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8647263Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8647613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8647737Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8647825Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8648287Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8648363Z     return await future
2025-07-05T16:35:53.8648433Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8648803Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8648894Z     result = context.run(func, *args)
2025-07-05T16:35:53.8648961Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8649301Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8649483Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8649565Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8649924Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8650012Z     results = super().execute(
2025-07-05T16:35:53.8650077Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8650460Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8650546Z     return self._execute_internal(
2025-07-05T16:35:53.8650612Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8651056Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8651216Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8651311Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8651765Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8651853Z     result = conn.execute(
2025-07-05T16:35:53.8651918Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8652298Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8652371Z     return meth(
2025-07-05T16:35:53.8652431Z            ^^^^^
2025-07-05T16:35:53.8652885Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8652991Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8653062Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8653521Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8653610Z     ret = self._execute_context(
2025-07-05T16:35:53.8653676Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8654104Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8654281Z     return self._exec_single_context(
2025-07-05T16:35:53.8654349Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8654797Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8654879Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8655333Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8655752Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8656197Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8656277Z     self.dialect.do_execute(
2025-07-05T16:35:53.8656690Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8656788Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8657083Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8657150Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8657213Z              ^
2025-07-05T16:35:53.8657218Z 
2025-07-05T16:35:53.8657560Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8657629Z FROM "user" 
2025-07-05T16:35:53.8657710Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8657828Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8657980Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8658476Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8658550Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8658614Z              ^
2025-07-05T16:35:53.8658619Z 
2025-07-05T16:35:53.8658953Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8659017Z FROM "user" 
2025-07-05T16:35:53.8659097Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8659210Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8659351Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8659550Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8659875Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8660055Z __________ ERROR at setup of TestExportRouter.test_export_submissions __________
2025-07-05T16:35:53.8660202Z tests/test_high_impact_coverage.py:202: in setup_admin_user
2025-07-05T16:35:53.8660320Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8660400Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8660543Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8660695Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8661088Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8661192Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8661262Z              ^
2025-07-05T16:35:53.8661266Z 
2025-07-05T16:35:53.8661604Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8661666Z FROM "user" 
2025-07-05T16:35:53.8661747Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8661975Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8662115Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8662197Z Traceback (most recent call last):
2025-07-05T16:35:53.8662660Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8662742Z     self.dialect.do_execute(
2025-07-05T16:35:53.8663157Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8663250Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8663500Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8663572Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8663633Z              ^
2025-07-05T16:35:53.8663638Z 
2025-07-05T16:35:53.8663642Z 
2025-07-05T16:35:53.8663804Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8663815Z 
2025-07-05T16:35:53.8663900Z Traceback (most recent call last):
2025-07-05T16:35:53.8664241Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8664308Z     yield session
2025-07-05T16:35:53.8664781Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8664879Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8665315Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8665589Z     raise e
2025-07-05T16:35:53.8666045Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8666142Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8666515Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8666612Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8666973Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8667061Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8667400Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8667486Z     response = await func(request)
2025-07-05T16:35:53.8667552Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8667890Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8667993Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8668064Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8668480Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8668620Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8668695Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8669120Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8669234Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8669310Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8669664Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8669787Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8669863Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8670326Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8670524Z     return await future
2025-07-05T16:35:53.8670588Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8670966Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8671051Z     result = context.run(func, *args)
2025-07-05T16:35:53.8671120Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8671465Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8671754Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8671837Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8672201Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8672308Z     results = super().execute(
2025-07-05T16:35:53.8672374Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8672766Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8672848Z     return self._execute_internal(
2025-07-05T16:35:53.8672914Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8673350Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8673499Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8673588Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8674038Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8674115Z     result = conn.execute(
2025-07-05T16:35:53.8674184Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8674573Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8674639Z     return meth(
2025-07-05T16:35:53.8674704Z            ^^^^^
2025-07-05T16:35:53.8675159Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8675258Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8675336Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8675900Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8675985Z     ret = self._execute_context(
2025-07-05T16:35:53.8676060Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8676483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8676571Z     return self._exec_single_context(
2025-07-05T16:35:53.8676644Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8677092Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8677178Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8677637Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8677814Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8678259Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8678342Z     self.dialect.do_execute(
2025-07-05T16:35:53.8678749Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8678964Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8679256Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8679325Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8679392Z              ^
2025-07-05T16:35:53.8679397Z 
2025-07-05T16:35:53.8679737Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8679800Z FROM "user" 
2025-07-05T16:35:53.8679883Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8680002Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8680259Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8680812Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8680884Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8680945Z              ^
2025-07-05T16:35:53.8680950Z 
2025-07-05T16:35:53.8681288Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8681357Z FROM "user" 
2025-07-05T16:35:53.8681437Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8681555Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8681703Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8681941Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8682312Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8682469Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8682552Z Traceback (most recent call last):
2025-07-05T16:35:53.8683011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8683096Z     self.dialect.do_execute(
2025-07-05T16:35:53.8683504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8683602Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8683763Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8683831Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8683892Z              ^
2025-07-05T16:35:53.8683901Z 
2025-07-05T16:35:53.8683905Z 
2025-07-05T16:35:53.8684073Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8684078Z 
2025-07-05T16:35:53.8684158Z Traceback (most recent call last):
2025-07-05T16:35:53.8684494Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8684571Z     yield session
2025-07-05T16:35:53.8685037Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8685140Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8685768Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8685843Z     raise e
2025-07-05T16:35:53.8686283Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8686378Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8686745Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8686853Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8687331Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8687423Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8687760Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8687840Z     response = await func(request)
2025-07-05T16:35:53.8687911Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8688244Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8688340Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8688531Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8688953Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8689086Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8689172Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8689594Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8689705Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8689783Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8690129Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8690256Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8690335Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8690795Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8690876Z     return await future
2025-07-05T16:35:53.8690941Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8691317Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8691408Z     result = context.run(func, *args)
2025-07-05T16:35:53.8691476Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8691816Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8691994Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8692077Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8692428Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8692520Z     results = super().execute(
2025-07-05T16:35:53.8692586Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8692971Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8693066Z     return self._execute_internal(
2025-07-05T16:35:53.8693130Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8693559Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8693710Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8693791Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8694241Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8694328Z     result = conn.execute(
2025-07-05T16:35:53.8694394Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8694782Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8694849Z     return meth(
2025-07-05T16:35:53.8694993Z            ^^^^^
2025-07-05T16:35:53.8695571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8695673Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8695747Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8696208Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8696288Z     ret = self._execute_context(
2025-07-05T16:35:53.8696355Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8696787Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8696998Z     return self._exec_single_context(
2025-07-05T16:35:53.8697067Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8697515Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8697605Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8698060Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8698242Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8698683Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8698769Z     self.dialect.do_execute(
2025-07-05T16:35:53.8699176Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8699275Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8699576Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8699648Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8699709Z              ^
2025-07-05T16:35:53.8699714Z 
2025-07-05T16:35:53.8700061Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8700124Z FROM "user" 
2025-07-05T16:35:53.8700200Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8700319Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8700475Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8700626Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8700976Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8701048Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8701108Z              ^
2025-07-05T16:35:53.8701113Z 
2025-07-05T16:35:53.8701445Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8701518Z FROM "user" 
2025-07-05T16:35:53.8701592Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8701706Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8701851Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8701932Z Traceback (most recent call last):
2025-07-05T16:35:53.8702384Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8702469Z     self.dialect.do_execute(
2025-07-05T16:35:53.8702881Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8702972Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8703136Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8703202Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8703379Z              ^
2025-07-05T16:35:53.8703385Z 
2025-07-05T16:35:53.8703389Z 
2025-07-05T16:35:53.8703558Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8703563Z 
2025-07-05T16:35:53.8703641Z Traceback (most recent call last):
2025-07-05T16:35:53.8703980Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8704053Z     yield session
2025-07-05T16:35:53.8704518Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8704720Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8705162Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8705227Z     raise e
2025-07-05T16:35:53.8705873Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8705977Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8706347Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8706448Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8706799Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8706886Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8707233Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8707319Z     response = await func(request)
2025-07-05T16:35:53.8707384Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8707721Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8707822Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8707894Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8708314Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8708445Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8708527Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8708947Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8709064Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8709142Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8709490Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8709616Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8709702Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8710170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8710242Z     return await future
2025-07-05T16:35:53.8710313Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8710682Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8710768Z     result = context.run(func, *args)
2025-07-05T16:35:53.8710842Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8711184Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8711354Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8711441Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8711917Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8712001Z     results = super().execute(
2025-07-05T16:35:53.8712066Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8712449Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8712535Z     return self._execute_internal(
2025-07-05T16:35:53.8712601Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8713027Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8713331Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8713410Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8713859Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8713949Z     result = conn.execute(
2025-07-05T16:35:53.8714014Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8714395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8714468Z     return meth(
2025-07-05T16:35:53.8714529Z            ^^^^^
2025-07-05T16:35:53.8714984Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8715087Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8715162Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8715728Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8715814Z     ret = self._execute_context(
2025-07-05T16:35:53.8715880Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8716312Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8716402Z     return self._exec_single_context(
2025-07-05T16:35:53.8716470Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8716921Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8717001Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8717454Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8717641Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8718084Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8718163Z     self.dialect.do_execute(
2025-07-05T16:35:53.8718580Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8718673Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8718961Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8719037Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8719096Z              ^
2025-07-05T16:35:53.8719101Z 
2025-07-05T16:35:53.8719440Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8719513Z FROM "user" 
2025-07-05T16:35:53.8719590Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8719710Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8719862Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8720363Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8720552Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8720616Z              ^
2025-07-05T16:35:53.8720621Z 
2025-07-05T16:35:53.8720955Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8721018Z FROM "user" 
2025-07-05T16:35:53.8721097Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8721209Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8721348Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8721654Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8721982Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8722160Z ___________ ERROR at setup of TestExportRouter.test_export_analytics ___________
2025-07-05T16:35:53.8722303Z tests/test_high_impact_coverage.py:202: in setup_admin_user
2025-07-05T16:35:53.8722421Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8722499Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8722642Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8722794Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8723191Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8723262Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8723329Z              ^
2025-07-05T16:35:53.8723334Z 
2025-07-05T16:35:53.8723670Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8723732Z FROM "user" 
2025-07-05T16:35:53.8723812Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8723933Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8724072Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8724152Z Traceback (most recent call last):
2025-07-05T16:35:53.8724614Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8724693Z     self.dialect.do_execute(
2025-07-05T16:35:53.8725109Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8725208Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8725507Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8725611Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8725678Z              ^
2025-07-05T16:35:53.8725684Z 
2025-07-05T16:35:53.8725687Z 
2025-07-05T16:35:53.8725859Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8725864Z 
2025-07-05T16:35:53.8725943Z Traceback (most recent call last):
2025-07-05T16:35:53.8726287Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8726355Z     yield session
2025-07-05T16:35:53.8726829Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8726928Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8727363Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8727437Z     raise e
2025-07-05T16:35:53.8727872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8727962Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8728455Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8728552Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8728907Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8728993Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8729332Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8729419Z     response = await func(request)
2025-07-05T16:35:53.8729598Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8729935Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8730039Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8730111Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8730534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8730670Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8730745Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8731165Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8731282Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8731355Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8731710Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8731833Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8731909Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8732379Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8732453Z     return await future
2025-07-05T16:35:53.8732517Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8732893Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8732979Z     result = context.run(func, *args)
2025-07-05T16:35:53.8733049Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8733399Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8733574Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8733659Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8734018Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8734103Z     results = super().execute(
2025-07-05T16:35:53.8734168Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8734558Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8734638Z     return self._execute_internal(
2025-07-05T16:35:53.8734705Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8735139Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8735284Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8735476Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8735935Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8736013Z     result = conn.execute(
2025-07-05T16:35:53.8736199Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8736582Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8736649Z     return meth(
2025-07-05T16:35:53.8736715Z            ^^^^^
2025-07-05T16:35:53.8737173Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8737272Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8737349Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8737803Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8738001Z     ret = self._execute_context(
2025-07-05T16:35:53.8738073Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8738500Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8738590Z     return self._exec_single_context(
2025-07-05T16:35:53.8738664Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8739107Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8739190Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8739647Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8739825Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8740287Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8740367Z     self.dialect.do_execute(
2025-07-05T16:35:53.8740778Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8740880Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8741169Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8741237Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8741303Z              ^
2025-07-05T16:35:53.8741308Z 
2025-07-05T16:35:53.8741647Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8741711Z FROM "user" 
2025-07-05T16:35:53.8741796Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8741922Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8742066Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8742607Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8742686Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8742745Z              ^
2025-07-05T16:35:53.8742750Z 
2025-07-05T16:35:53.8743085Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8743153Z FROM "user" 
2025-07-05T16:35:53.8743229Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8743343Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8743489Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8743729Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8744096Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8744252Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8744419Z Traceback (most recent call last):
2025-07-05T16:35:53.8744874Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8744963Z     self.dialect.do_execute(
2025-07-05T16:35:53.8745536Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8745668Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8745845Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8745913Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8746105Z              ^
2025-07-05T16:35:53.8746111Z 
2025-07-05T16:35:53.8746116Z 
2025-07-05T16:35:53.8746291Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8746297Z 
2025-07-05T16:35:53.8746376Z Traceback (most recent call last):
2025-07-05T16:35:53.8746732Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8746811Z     yield session
2025-07-05T16:35:53.8747283Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8747387Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8747824Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8747893Z     raise e
2025-07-05T16:35:53.8748331Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8748425Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8748793Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8748896Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8749254Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8749346Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8749686Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8749776Z     response = await func(request)
2025-07-05T16:35:53.8749846Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8750178Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8750278Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8750353Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8750772Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8750905Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8750992Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8751414Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8751532Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8751611Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8751966Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8752091Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8752177Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8752640Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8752718Z     return await future
2025-07-05T16:35:53.8752896Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8753268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8753358Z     result = context.run(func, *args)
2025-07-05T16:35:53.8753429Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8753770Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8753946Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8754028Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8754470Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8754557Z     results = super().execute(
2025-07-05T16:35:53.8754623Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8755009Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8755100Z     return self._execute_internal(
2025-07-05T16:35:53.8755168Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8755710Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8755863Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8755943Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8756395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8756484Z     result = conn.execute(
2025-07-05T16:35:53.8756549Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8756930Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8757006Z     return meth(
2025-07-05T16:35:53.8757065Z            ^^^^^
2025-07-05T16:35:53.8757520Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8757623Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8757694Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8758153Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8758234Z     ret = self._execute_context(
2025-07-05T16:35:53.8758301Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8758736Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8758823Z     return self._exec_single_context(
2025-07-05T16:35:53.8758891Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8759340Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8759427Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8759887Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8760073Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8760517Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8760595Z     self.dialect.do_execute(
2025-07-05T16:35:53.8761015Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8761107Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8761429Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8761619Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8761680Z              ^
2025-07-05T16:35:53.8761686Z 
2025-07-05T16:35:53.8762027Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8762095Z FROM "user" 
2025-07-05T16:35:53.8762171Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8762293Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8762447Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8762598Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8763061Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8763134Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8763194Z              ^
2025-07-05T16:35:53.8763198Z 
2025-07-05T16:35:53.8763538Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8763606Z FROM "user" 
2025-07-05T16:35:53.8763681Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8763797Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8763939Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8764025Z Traceback (most recent call last):
2025-07-05T16:35:53.8764485Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8764680Z     self.dialect.do_execute(
2025-07-05T16:35:53.8765123Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8765281Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8765719Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8789231Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8789354Z              ^
2025-07-05T16:35:53.8789363Z 
2025-07-05T16:35:53.8789369Z 
2025-07-05T16:35:53.8789567Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8789574Z 
2025-07-05T16:35:53.8789674Z Traceback (most recent call last):
2025-07-05T16:35:53.8790111Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8790188Z     yield session
2025-07-05T16:35:53.8790696Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8790813Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8791275Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8791344Z     raise e
2025-07-05T16:35:53.8791796Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8791897Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8792273Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8792370Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8792728Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8792818Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8793165Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8793252Z     response = await func(request)
2025-07-05T16:35:53.8793321Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8793658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8793939Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8794013Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8794440Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8794577Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8794656Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8795083Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8795475Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8795560Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8795925Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8796057Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8796134Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8796613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8796693Z     return await future
2025-07-05T16:35:53.8796759Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8797167Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8797260Z     result = context.run(func, *args)
2025-07-05T16:35:53.8797338Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8797693Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8797868Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8797960Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8798324Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8798407Z     results = super().execute(
2025-07-05T16:35:53.8798481Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8798867Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8798952Z     return self._execute_internal(
2025-07-05T16:35:53.8799025Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8799457Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8799611Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8799705Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8800160Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8800245Z     result = conn.execute(
2025-07-05T16:35:53.8800319Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8800733Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8800804Z     return meth(
2025-07-05T16:35:53.8800871Z            ^^^^^
2025-07-05T16:35:53.8801337Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8801450Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8801523Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8801981Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8802070Z     ret = self._execute_context(
2025-07-05T16:35:53.8802264Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8802693Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8802786Z     return self._exec_single_context(
2025-07-05T16:35:53.8802855Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8803301Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8803395Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8803848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8804138Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8804593Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8804679Z     self.dialect.do_execute(
2025-07-05T16:35:53.8805095Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8805191Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8805712Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8805795Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8805858Z              ^
2025-07-05T16:35:53.8805865Z 
2025-07-05T16:35:53.8806216Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8806289Z FROM "user" 
2025-07-05T16:35:53.8806373Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8806496Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8806650Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8807161Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8807231Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8807291Z              ^
2025-07-05T16:35:53.8807296Z 
2025-07-05T16:35:53.8807648Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8807711Z FROM "user" 
2025-07-05T16:35:53.8807788Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8807909Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8808059Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8808260Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8808587Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8808784Z ________ ERROR at setup of TestExportRouter.test_export_error_handling _________
2025-07-05T16:35:53.8808928Z tests/test_high_impact_coverage.py:202: in setup_admin_user
2025-07-05T16:35:53.8809042Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8809133Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8809278Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8809429Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8809834Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8809909Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8809969Z              ^
2025-07-05T16:35:53.8809974Z 
2025-07-05T16:35:53.8810322Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8810514Z FROM "user" 
2025-07-05T16:35:53.8810592Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8810716Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8810862Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8810945Z Traceback (most recent call last):
2025-07-05T16:35:53.8811427Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8811512Z     self.dialect.do_execute(
2025-07-05T16:35:53.8811927Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8812155Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8812323Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8812391Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8812455Z              ^
2025-07-05T16:35:53.8812465Z 
2025-07-05T16:35:53.8812469Z 
2025-07-05T16:35:53.8812636Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8812641Z 
2025-07-05T16:35:53.8812722Z Traceback (most recent call last):
2025-07-05T16:35:53.8813070Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8813140Z     yield session
2025-07-05T16:35:53.8813607Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8813722Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8814179Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8814251Z     raise e
2025-07-05T16:35:53.8814688Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8814786Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8815168Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8815265Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8815898Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8816005Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8816349Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8816442Z     response = await func(request)
2025-07-05T16:35:53.8816516Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8816848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8816949Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8817031Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8817451Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8817590Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8817668Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8818088Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8818209Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8818286Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8818637Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8818767Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8818979Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8819442Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8819525Z     return await future
2025-07-05T16:35:53.8819589Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8819963Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8820056Z     result = context.run(func, *args)
2025-07-05T16:35:53.8820127Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8820467Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8820753Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8820838Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8821191Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8821284Z     results = super().execute(
2025-07-05T16:35:53.8821353Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8821740Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8821823Z     return self._execute_internal(
2025-07-05T16:35:53.8821889Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8822318Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8822472Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8822551Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8823001Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8823084Z     result = conn.execute(
2025-07-05T16:35:53.8823149Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8823534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8823601Z     return meth(
2025-07-05T16:35:53.8823661Z            ^^^^^
2025-07-05T16:35:53.8824121Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8824225Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8824296Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8824770Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8824853Z     ret = self._execute_context(
2025-07-05T16:35:53.8824919Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8825626Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8825737Z     return self._exec_single_context(
2025-07-05T16:35:53.8825807Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8826284Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8826370Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8826831Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8827020Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8827460Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8827545Z     self.dialect.do_execute(
2025-07-05T16:35:53.8827954Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8828177Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8828477Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8828545Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8828606Z              ^
2025-07-05T16:35:53.8828611Z 
2025-07-05T16:35:53.8828957Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8829022Z FROM "user" 
2025-07-05T16:35:53.8829203Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8829329Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8829481Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8830027Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8830107Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8830166Z              ^
2025-07-05T16:35:53.8830170Z 
2025-07-05T16:35:53.8830510Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8830579Z FROM "user" 
2025-07-05T16:35:53.8830654Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8830767Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8830909Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8831156Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.8831521Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8831676Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8831767Z Traceback (most recent call last):
2025-07-05T16:35:53.8832227Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8832310Z     self.dialect.do_execute(
2025-07-05T16:35:53.8832721Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8832814Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8832976Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8833053Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8833112Z              ^
2025-07-05T16:35:53.8833118Z 
2025-07-05T16:35:53.8833122Z 
2025-07-05T16:35:53.8833285Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8833296Z 
2025-07-05T16:35:53.8833380Z Traceback (most recent call last):
2025-07-05T16:35:53.8833725Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8833800Z     yield session
2025-07-05T16:35:53.8834262Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8834362Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8834798Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8834864Z     raise e
2025-07-05T16:35:53.8835294Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8835522Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8835887Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8836112Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8836464Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8836552Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8836895Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8836981Z     response = await func(request)
2025-07-05T16:35:53.8837046Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8837380Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8837583Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8837654Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8838077Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8838215Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8838292Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8838713Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8838823Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8838898Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8839241Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8839374Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8839448Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8839905Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8839988Z     return await future
2025-07-05T16:35:53.8840059Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8840427Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8840517Z     result = context.run(func, *args)
2025-07-05T16:35:53.8840589Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8840925Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8841104Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8841191Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8841544Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8841623Z     results = super().execute(
2025-07-05T16:35:53.8841689Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8842081Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8842163Z     return self._execute_internal(
2025-07-05T16:35:53.8842230Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8842662Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8842808Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8842888Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8843342Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8843424Z     result = conn.execute(
2025-07-05T16:35:53.8843489Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8843875Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8844031Z     return meth(
2025-07-05T16:35:53.8844091Z            ^^^^^
2025-07-05T16:35:53.8844550Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8844649Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8844720Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8845176Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8845257Z     ret = self._execute_context(
2025-07-05T16:35:53.8845613Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8846075Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8846163Z     return self._exec_single_context(
2025-07-05T16:35:53.8846235Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8846686Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8846770Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8847230Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8847411Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8847850Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8847943Z     self.dialect.do_execute(
2025-07-05T16:35:53.8848350Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8848448Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8848737Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8848809Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8848873Z              ^
2025-07-05T16:35:53.8848879Z 
2025-07-05T16:35:53.8849225Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8849289Z FROM "user" 
2025-07-05T16:35:53.8849365Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8849488Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8849635Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8849788Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8850139Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8850207Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8850266Z              ^
2025-07-05T16:35:53.8850275Z 
2025-07-05T16:35:53.8850621Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8850685Z FROM "user" 
2025-07-05T16:35:53.8850760Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8850873Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8851024Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8851107Z Traceback (most recent call last):
2025-07-05T16:35:53.8851564Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8851652Z     self.dialect.do_execute(
2025-07-05T16:35:53.8852061Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8852160Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8852446Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8852517Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8852576Z              ^
2025-07-05T16:35:53.8852586Z 
2025-07-05T16:35:53.8852590Z 
2025-07-05T16:35:53.8852754Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8852759Z 
2025-07-05T16:35:53.8852837Z Traceback (most recent call last):
2025-07-05T16:35:53.8853179Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8853246Z     yield session
2025-07-05T16:35:53.8853706Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8853913Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8854346Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8854416Z     raise e
2025-07-05T16:35:53.8854853Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8854943Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8855310Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8855616Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8856003Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8856104Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8856443Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8856524Z     response = await func(request)
2025-07-05T16:35:53.8856595Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8856929Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8857032Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8857107Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8857527Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8857658Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8857742Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8858159Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8858281Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8858355Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8858700Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8858832Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8858907Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8859366Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8859445Z     return await future
2025-07-05T16:35:53.8859510Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8859879Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8859974Z     result = context.run(func, *args)
2025-07-05T16:35:53.8860041Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8860387Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8860566Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8860776Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8861127Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8861248Z     results = super().execute(
2025-07-05T16:35:53.8861314Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8861697Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8861786Z     return self._execute_internal(
2025-07-05T16:35:53.8861851Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8862418Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8862570Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8862650Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8863106Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8863182Z     result = conn.execute(
2025-07-05T16:35:53.8863245Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8863626Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8863692Z     return meth(
2025-07-05T16:35:53.8863751Z            ^^^^^
2025-07-05T16:35:53.8864210Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8864314Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8864385Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8864841Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8864924Z     ret = self._execute_context(
2025-07-05T16:35:53.8864989Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8865691Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8865789Z     return self._exec_single_context(
2025-07-05T16:35:53.8865857Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8866330Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8866413Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8866880Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8867065Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8867506Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8867596Z     self.dialect.do_execute(
2025-07-05T16:35:53.8868005Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8868098Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8868393Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8868462Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8868522Z              ^
2025-07-05T16:35:53.8868528Z 
2025-07-05T16:35:53.8868874Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8868949Z FROM "user" 
2025-07-05T16:35:53.8869031Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8869149Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8869297Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8869932Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8870001Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8870061Z              ^
2025-07-05T16:35:53.8870066Z 
2025-07-05T16:35:53.8870413Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8870476Z FROM "user" 
2025-07-05T16:35:53.8870551Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8870776Z [parameters: {'email_1': 'export_admin@example.com'}]
2025-07-05T16:35:53.8870921Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8871116Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.8871438Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8871645Z ____ ERROR at setup of TestAdminChecklistsRouter.test_admin_checklist_crud _____
2025-07-05T16:35:53.8871784Z tests/test_high_impact_coverage.py:301: in setup_admin_user
2025-07-05T16:35:53.8871894Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8871978Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8872120Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8872269Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8872668Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8872744Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8872804Z              ^
2025-07-05T16:35:53.8872809Z 
2025-07-05T16:35:53.8873154Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8873222Z FROM "user" 
2025-07-05T16:35:53.8873296Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8873428Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8873570Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8873651Z Traceback (most recent call last):
2025-07-05T16:35:53.8874118Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8874199Z     self.dialect.do_execute(
2025-07-05T16:35:53.8874613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8874709Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8874869Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8874937Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8875005Z              ^
2025-07-05T16:35:53.8875010Z 
2025-07-05T16:35:53.8875014Z 
2025-07-05T16:35:53.8875177Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8875182Z 
2025-07-05T16:35:53.8875267Z Traceback (most recent call last):
2025-07-05T16:35:53.8875722Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8875791Z     yield session
2025-07-05T16:35:53.8876256Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8876366Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8876806Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8876872Z     raise e
2025-07-05T16:35:53.8877307Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8877518Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8877887Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8877983Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8878333Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8878425Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8878763Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8878948Z     response = await func(request)
2025-07-05T16:35:53.8879020Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8879354Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8879460Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8879536Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8879954Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8880096Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8880182Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8880602Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8880723Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8880800Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8881146Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8881276Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8881356Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8881816Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8881895Z     return await future
2025-07-05T16:35:53.8881958Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8882328Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8882422Z     result = context.run(func, *args)
2025-07-05T16:35:53.8882492Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8882836Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8883013Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8883097Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8883451Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8883538Z     results = super().execute(
2025-07-05T16:35:53.8883602Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8883984Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8884071Z     return self._execute_internal(
2025-07-05T16:35:53.8884137Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8884567Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8884717Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8884795Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8885252Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8885591Z     result = conn.execute(
2025-07-05T16:35:53.8885664Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8886054Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8886121Z     return meth(
2025-07-05T16:35:53.8886181Z            ^^^^^
2025-07-05T16:35:53.8886642Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8886742Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8886932Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8887391Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8887473Z     ret = self._execute_context(
2025-07-05T16:35:53.8887540Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8887979Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8888065Z     return self._exec_single_context(
2025-07-05T16:35:53.8888133Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8888578Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8888661Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8889115Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8889299Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8889741Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8889827Z     self.dialect.do_execute(
2025-07-05T16:35:53.8890247Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8890339Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8890633Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8890702Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8890763Z              ^
2025-07-05T16:35:53.8890768Z 
2025-07-05T16:35:53.8891111Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8891182Z FROM "user" 
2025-07-05T16:35:53.8891258Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8891390Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8891537Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8892076Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8892154Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8892214Z              ^
2025-07-05T16:35:53.8892218Z 
2025-07-05T16:35:53.8892553Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8892620Z FROM "user" 
2025-07-05T16:35:53.8892697Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8892817Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8892964Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8893204Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.8893571Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8893858Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8893946Z Traceback (most recent call last):
2025-07-05T16:35:53.8894396Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8894476Z     self.dialect.do_execute(
2025-07-05T16:35:53.8894891Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8894984Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8895227Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8895298Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8895472Z              ^
2025-07-05T16:35:53.8895479Z 
2025-07-05T16:35:53.8895483Z 
2025-07-05T16:35:53.8895652Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8895667Z 
2025-07-05T16:35:53.8895746Z Traceback (most recent call last):
2025-07-05T16:35:53.8896089Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8896162Z     yield session
2025-07-05T16:35:53.8896623Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8896722Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8897160Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8897233Z     raise e
2025-07-05T16:35:53.8897660Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8897756Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8898117Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8898220Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8898571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8898658Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8899000Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8899080Z     response = await func(request)
2025-07-05T16:35:53.8899146Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8899486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8899583Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8899654Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8900076Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8900215Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8900290Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8900713Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8900826Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8900900Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8901250Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8901379Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8901455Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8901917Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8902110Z     return await future
2025-07-05T16:35:53.8902183Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8902554Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8902641Z     result = context.run(func, *args)
2025-07-05T16:35:53.8902713Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8903052Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8903226Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8903423Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8903776Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8903854Z     results = super().execute(
2025-07-05T16:35:53.8903930Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8904310Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8904391Z     return self._execute_internal(
2025-07-05T16:35:53.8904464Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8904890Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8905036Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8905124Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8905738Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8905824Z     result = conn.execute(
2025-07-05T16:35:53.8905890Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8906273Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8906350Z     return meth(
2025-07-05T16:35:53.8906410Z            ^^^^^
2025-07-05T16:35:53.8906862Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8906965Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8907039Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8907488Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8907577Z     ret = self._execute_context(
2025-07-05T16:35:53.8907644Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8908068Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8908157Z     return self._exec_single_context(
2025-07-05T16:35:53.8908227Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8908669Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8908758Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8909210Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8909390Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8909834Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8909919Z     self.dialect.do_execute(
2025-07-05T16:35:53.8910331Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8910427Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8910837Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8910910Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8910969Z              ^
2025-07-05T16:35:53.8910975Z 
2025-07-05T16:35:53.8911312Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8911384Z FROM "user" 
2025-07-05T16:35:53.8911461Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8911586Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8911832Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8911986Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8912329Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8912401Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8912464Z              ^
2025-07-05T16:35:53.8912470Z 
2025-07-05T16:35:53.8912803Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8912866Z FROM "user" 
2025-07-05T16:35:53.8912945Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8913066Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8913208Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8913296Z Traceback (most recent call last):
2025-07-05T16:35:53.8913746Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8913829Z     self.dialect.do_execute(
2025-07-05T16:35:53.8914242Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8914338Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8914498Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8914570Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8914629Z              ^
2025-07-05T16:35:53.8914634Z 
2025-07-05T16:35:53.8914638Z 
2025-07-05T16:35:53.8914800Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8914805Z 
2025-07-05T16:35:53.8914888Z Traceback (most recent call last):
2025-07-05T16:35:53.8915219Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8915287Z     yield session
2025-07-05T16:35:53.8915868Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8915969Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8916409Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8916483Z     raise e
2025-07-05T16:35:53.8916909Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8917004Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8917367Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8917461Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8917813Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8917905Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8918240Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8918327Z     response = await func(request)
2025-07-05T16:35:53.8918511Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8918871Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8918968Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8919038Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8919463Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8919594Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8919669Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8920200Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8920321Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8920396Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8920752Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8920874Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8920949Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8921413Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8921487Z     return await future
2025-07-05T16:35:53.8921550Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8921932Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8922021Z     result = context.run(func, *args)
2025-07-05T16:35:53.8922088Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8922431Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8922607Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8922687Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8923041Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8923119Z     results = super().execute(
2025-07-05T16:35:53.8923188Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8923571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8923652Z     return self._execute_internal(
2025-07-05T16:35:53.8923725Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8924152Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8924296Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8924383Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8924827Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8924904Z     result = conn.execute(
2025-07-05T16:35:53.8924974Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8925473Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8925587Z     return meth(
2025-07-05T16:35:53.8925654Z            ^^^^^
2025-07-05T16:35:53.8926113Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8926218Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8926295Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8926745Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8926982Z     ret = self._execute_context(
2025-07-05T16:35:53.8927052Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8927479Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8927567Z     return self._exec_single_context(
2025-07-05T16:35:53.8927633Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8928072Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8928264Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8928721Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8928899Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8929350Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8929430Z     self.dialect.do_execute(
2025-07-05T16:35:53.8929835Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8929932Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8930221Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8930296Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8930361Z              ^
2025-07-05T16:35:53.8930371Z 
2025-07-05T16:35:53.8930711Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8930777Z FROM "user" 
2025-07-05T16:35:53.8930859Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8930986Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8931136Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8931640Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8931708Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8931767Z              ^
2025-07-05T16:35:53.8931772Z 
2025-07-05T16:35:53.8932109Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8932170Z FROM "user" 
2025-07-05T16:35:53.8932252Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8932372Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8932517Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8932708Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.8933033Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8933242Z __ ERROR at setup of TestAdminChecklistsRouter.test_checklist_item_management __
2025-07-05T16:35:53.8933381Z tests/test_high_impact_coverage.py:301: in setup_admin_user
2025-07-05T16:35:53.8933494Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8933576Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8933717Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8933863Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8934267Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8934334Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8934393Z              ^
2025-07-05T16:35:53.8934398Z 
2025-07-05T16:35:53.8934824Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8934887Z FROM "user" 
2025-07-05T16:35:53.8934962Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8935083Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8935229Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8935310Z Traceback (most recent call last):
2025-07-05T16:35:53.8935872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8936072Z     self.dialect.do_execute(
2025-07-05T16:35:53.8936497Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8936595Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8936756Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8936828Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8936887Z              ^
2025-07-05T16:35:53.8936897Z 
2025-07-05T16:35:53.8936902Z 
2025-07-05T16:35:53.8937064Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8937070Z 
2025-07-05T16:35:53.8937149Z Traceback (most recent call last):
2025-07-05T16:35:53.8937491Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8937559Z     yield session
2025-07-05T16:35:53.8938021Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8938130Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8938559Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8938626Z     raise e
2025-07-05T16:35:53.8939063Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8939153Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8939517Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8939610Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8939958Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8940050Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8940389Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8940472Z     response = await func(request)
2025-07-05T16:35:53.8940542Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8940873Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8940979Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8941057Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8941472Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8941601Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8941683Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8942101Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8942222Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8942297Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8942639Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8942885Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8942963Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8943423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8943501Z     return await future
2025-07-05T16:35:53.8943565Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8943934Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8944026Z     result = context.run(func, *args)
2025-07-05T16:35:53.8944171Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8944510Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8944686Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8944772Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8945119Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8945202Z     results = super().execute(
2025-07-05T16:35:53.8945267Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8945838Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8945934Z     return self._execute_internal(
2025-07-05T16:35:53.8946000Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8946430Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8946588Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8946668Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8947119Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8947196Z     result = conn.execute(
2025-07-05T16:35:53.8947260Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8947640Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8947707Z     return meth(
2025-07-05T16:35:53.8947766Z            ^^^^^
2025-07-05T16:35:53.8948223Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8948324Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8948393Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8948848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8948930Z     ret = self._execute_context(
2025-07-05T16:35:53.8948994Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8949421Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8949506Z     return self._exec_single_context(
2025-07-05T16:35:53.8949572Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8950013Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8950094Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8950551Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8950739Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8951179Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8951402Z     self.dialect.do_execute(
2025-07-05T16:35:53.8951809Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8951901Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8952193Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8952262Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8952321Z              ^
2025-07-05T16:35:53.8952327Z 
2025-07-05T16:35:53.8952672Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8952843Z FROM "user" 
2025-07-05T16:35:53.8952920Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8953051Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8953198Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8953744Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8953817Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8953876Z              ^
2025-07-05T16:35:53.8953881Z 
2025-07-05T16:35:53.8954216Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8954279Z FROM "user" 
2025-07-05T16:35:53.8954358Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8954476Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8954622Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8954866Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8955233Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8955525Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.8955614Z Traceback (most recent call last):
2025-07-05T16:35:53.8956069Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8956148Z     self.dialect.do_execute(
2025-07-05T16:35:53.8956562Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8956657Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8956817Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8956889Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8956948Z              ^
2025-07-05T16:35:53.8956953Z 
2025-07-05T16:35:53.8956957Z 
2025-07-05T16:35:53.8957121Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8957131Z 
2025-07-05T16:35:53.8957214Z Traceback (most recent call last):
2025-07-05T16:35:53.8957549Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8957616Z     yield session
2025-07-05T16:35:53.8958081Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8958180Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8958614Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8958684Z     raise e
2025-07-05T16:35:53.8959111Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8959205Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8959693Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8959789Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8960139Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8960225Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8960565Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8960647Z     response = await func(request)
2025-07-05T16:35:53.8960816Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8961152Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8961282Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8961352Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8961779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8961909Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8961984Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8962407Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8962519Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8962592Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8962948Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8963071Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8963147Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8963613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8963688Z     return await future
2025-07-05T16:35:53.8963751Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8964122Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8964208Z     result = context.run(func, *args)
2025-07-05T16:35:53.8964280Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8964616Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8964792Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8964878Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8965226Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8965309Z     results = super().execute(
2025-07-05T16:35:53.8965544Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8965955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8966039Z     return self._execute_internal(
2025-07-05T16:35:53.8966110Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8966534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8966678Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8966768Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8967209Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8967287Z     result = conn.execute(
2025-07-05T16:35:53.8967484Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8967866Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8967937Z     return meth(
2025-07-05T16:35:53.8967998Z            ^^^^^
2025-07-05T16:35:53.8968451Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8968555Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8968627Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8969077Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8969266Z     ret = self._execute_context(
2025-07-05T16:35:53.8969332Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8969772Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8969867Z     return self._exec_single_context(
2025-07-05T16:35:53.8969934Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8970381Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8970470Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8970924Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8971102Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8971552Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8971631Z     self.dialect.do_execute(
2025-07-05T16:35:53.8972047Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8972143Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8972432Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8972505Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8972565Z              ^
2025-07-05T16:35:53.8972570Z 
2025-07-05T16:35:53.8972909Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8972976Z FROM "user" 
2025-07-05T16:35:53.8973052Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8973179Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8973330Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8973486Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.8973832Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8973904Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8973969Z              ^
2025-07-05T16:35:53.8973973Z 
2025-07-05T16:35:53.8974305Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8974370Z FROM "user" 
2025-07-05T16:35:53.8974451Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8974572Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8974714Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8974797Z Traceback (most recent call last):
2025-07-05T16:35:53.8975258Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8975338Z     self.dialect.do_execute(
2025-07-05T16:35:53.8975864Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8976095Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8976257Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8976333Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8976392Z              ^
2025-07-05T16:35:53.8976397Z 
2025-07-05T16:35:53.8976401Z 
2025-07-05T16:35:53.8976563Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8976569Z 
2025-07-05T16:35:53.8976653Z Traceback (most recent call last):
2025-07-05T16:35:53.8976997Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8977171Z     yield session
2025-07-05T16:35:53.8977657Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8977758Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.8978204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.8978276Z     raise e
2025-07-05T16:35:53.8978720Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.8978816Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8979184Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.8979279Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.8979639Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.8979730Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.8980070Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.8980162Z     response = await func(request)
2025-07-05T16:35:53.8980228Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8980560Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.8980663Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.8980735Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8981150Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.8981286Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.8981366Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8981788Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.8981901Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.8981983Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8982334Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.8982456Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.8982531Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8982996Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.8983069Z     return await future
2025-07-05T16:35:53.8983133Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.8983515Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.8983599Z     result = context.run(func, *args)
2025-07-05T16:35:53.8983668Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8984014Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.8984274Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.8984357Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8984715Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.8984794Z     results = super().execute(
2025-07-05T16:35:53.8984860Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8985252Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.8985587Z     return self._execute_internal(
2025-07-05T16:35:53.8985660Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8986105Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.8986261Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.8986345Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8986791Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.8986872Z     result = conn.execute(
2025-07-05T16:35:53.8986941Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.8987320Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.8987386Z     return meth(
2025-07-05T16:35:53.8987457Z            ^^^^^
2025-07-05T16:35:53.8987911Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.8988011Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.8988089Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8988545Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.8988624Z     ret = self._execute_context(
2025-07-05T16:35:53.8988699Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8989118Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.8989202Z     return self._exec_single_context(
2025-07-05T16:35:53.8989275Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.8989716Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.8989810Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.8990264Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.8990442Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.8990915Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8990993Z     self.dialect.do_execute(
2025-07-05T16:35:53.8991400Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8991497Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8991793Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8991865Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8991931Z              ^
2025-07-05T16:35:53.8991936Z 
2025-07-05T16:35:53.8992280Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8992344Z FROM "user" 
2025-07-05T16:35:53.8992424Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8992708Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8992855Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8993354Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8993424Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8993483Z              ^
2025-07-05T16:35:53.8993488Z 
2025-07-05T16:35:53.8993825Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8993989Z FROM "user" 
2025-07-05T16:35:53.8994064Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8994184Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8994329Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8994523Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.8994847Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.8995053Z ____ ERROR at setup of TestAdminChecklistsRouter.test_checklist_publishing _____
2025-07-05T16:35:53.8995194Z tests/test_high_impact_coverage.py:301: in setup_admin_user
2025-07-05T16:35:53.8995306Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.8995501Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.8995647Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.8995800Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.8996201Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.8996270Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8996334Z              ^
2025-07-05T16:35:53.8996339Z 
2025-07-05T16:35:53.8996673Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.8996740Z FROM "user" 
2025-07-05T16:35:53.8996814Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.8996937Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.8997085Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.8997166Z Traceback (most recent call last):
2025-07-05T16:35:53.8997623Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.8997712Z     self.dialect.do_execute(
2025-07-05T16:35:53.8998122Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.8998223Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.8998389Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.8998458Z LINE 2: FROM "user" 
2025-07-05T16:35:53.8998518Z              ^
2025-07-05T16:35:53.8998523Z 
2025-07-05T16:35:53.8998527Z 
2025-07-05T16:35:53.8998697Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.8998702Z 
2025-07-05T16:35:53.8998780Z Traceback (most recent call last):
2025-07-05T16:35:53.8999115Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.8999187Z     yield session
2025-07-05T16:35:53.8999658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.8999763Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9000195Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9000378Z     raise e
2025-07-05T16:35:53.9000815Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9000907Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9001271Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9001372Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9001724Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9001920Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9002260Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9002344Z     response = await func(request)
2025-07-05T16:35:53.9002415Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9002754Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9002852Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9002927Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9003344Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9003473Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9003554Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9003978Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9004093Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9004173Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9004516Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9004649Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9004725Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9005183Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9005262Z     return await future
2025-07-05T16:35:53.9005326Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9005874Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9005977Z     result = context.run(func, *args)
2025-07-05T16:35:53.9006045Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9006385Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9006563Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9006651Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9007001Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9007086Z     results = super().execute(
2025-07-05T16:35:53.9007152Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9007535Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9007623Z     return self._execute_internal(
2025-07-05T16:35:53.9007692Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9008117Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9008268Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9008347Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9008918Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9009000Z     result = conn.execute(
2025-07-05T16:35:53.9009064Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9009449Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9009515Z     return meth(
2025-07-05T16:35:53.9009575Z            ^^^^^
2025-07-05T16:35:53.9010035Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9010244Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9010317Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9010779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9010862Z     ret = self._execute_context(
2025-07-05T16:35:53.9010927Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9011352Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9011435Z     return self._exec_single_context(
2025-07-05T16:35:53.9011505Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9011954Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9012041Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9012494Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9012676Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9013115Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9013203Z     self.dialect.do_execute(
2025-07-05T16:35:53.9013611Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9013703Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9013998Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9014070Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9014129Z              ^
2025-07-05T16:35:53.9014134Z 
2025-07-05T16:35:53.9014484Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9014548Z FROM "user" 
2025-07-05T16:35:53.9014624Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9014751Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.9014906Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9015555Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9015626Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9015691Z              ^
2025-07-05T16:35:53.9015696Z 
2025-07-05T16:35:53.9016037Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9016101Z FROM "user" 
2025-07-05T16:35:53.9016186Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9016307Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.9016446Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9016695Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9017181Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9017330Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9017418Z Traceback (most recent call last):
2025-07-05T16:35:53.9017876Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9017955Z     self.dialect.do_execute(
2025-07-05T16:35:53.9018371Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9018566Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9018731Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9018804Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9018863Z              ^
2025-07-05T16:35:53.9018873Z 
2025-07-05T16:35:53.9018877Z 
2025-07-05T16:35:53.9019039Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9019044Z 
2025-07-05T16:35:53.9019128Z Traceback (most recent call last):
2025-07-05T16:35:53.9019464Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9019531Z     yield session
2025-07-05T16:35:53.9020002Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9020101Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9020548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9020614Z     raise e
2025-07-05T16:35:53.9021041Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9021143Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9021506Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9021602Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9021955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9022042Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9022385Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9022470Z     response = await func(request)
2025-07-05T16:35:53.9022534Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9022870Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9022966Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9023042Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9023465Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9023595Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9023677Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9024102Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9024213Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9024290Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9024699Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9024855Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9025080Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9025932Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9026089Z     return await future
2025-07-05T16:35:53.9026220Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9026632Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9026772Z     result = context.run(func, *args)
2025-07-05T16:35:53.9026940Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9027340Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9027729Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9027844Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9028244Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9028382Z     results = super().execute(
2025-07-05T16:35:53.9028532Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9029041Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9029156Z     return self._execute_internal(
2025-07-05T16:35:53.9029253Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9029749Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9029919Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9030087Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9030636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9030752Z     result = conn.execute(
2025-07-05T16:35:53.9030848Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9031300Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9031386Z     return meth(
2025-07-05T16:35:53.9031527Z            ^^^^^
2025-07-05T16:35:53.9032102Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9032233Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9032334Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9032870Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9032968Z     ret = self._execute_context(
2025-07-05T16:35:53.9033156Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9033612Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9033732Z     return self._exec_single_context(
2025-07-05T16:35:53.9033864Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9034338Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9034438Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9035053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9035270Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9035964Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9036118Z     self.dialect.do_execute(
2025-07-05T16:35:53.9036563Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9036907Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9037246Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9037346Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9037471Z              ^
2025-07-05T16:35:53.9037476Z 
2025-07-05T16:35:53.9037846Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9037940Z FROM "user" 
2025-07-05T16:35:53.9038263Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9038440Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.9038623Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9038807Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9039228Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9039328Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9039404Z              ^
2025-07-05T16:35:53.9039410Z 
2025-07-05T16:35:53.9039876Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9039971Z FROM "user" 
2025-07-05T16:35:53.9040078Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9040265Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.9040469Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9040571Z Traceback (most recent call last):
2025-07-05T16:35:53.9041162Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9041275Z     self.dialect.do_execute(
2025-07-05T16:35:53.9041726Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9042237Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9042434Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9042519Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9042706Z              ^
2025-07-05T16:35:53.9042713Z 
2025-07-05T16:35:53.9042716Z 
2025-07-05T16:35:53.9042910Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9042916Z 
2025-07-05T16:35:53.9043027Z Traceback (most recent call last):
2025-07-05T16:35:53.9043437Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9043566Z     yield session
2025-07-05T16:35:53.9044129Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9044280Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9044750Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9044884Z     raise e
2025-07-05T16:35:53.9045495Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9045667Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9046151Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9046301Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9046719Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9046836Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9047238Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9047503Z     response = await func(request)
2025-07-05T16:35:53.9047655Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9048038Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9048203Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9048308Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9048759Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9049055Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9049214Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9049682Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9049901Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9050007Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9050427Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9050567Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9050727Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9051268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9051379Z     return await future
2025-07-05T16:35:53.9051474Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9051911Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9052012Z     result = context.run(func, *args)
2025-07-05T16:35:53.9052164Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9052625Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9052833Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9052946Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9053370Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9053465Z     results = super().execute(
2025-07-05T16:35:53.9053610Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9054077Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9054196Z     return self._execute_internal(
2025-07-05T16:35:53.9054327Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9054786Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9054951Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9055158Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9055784Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9055894Z     result = conn.execute(
2025-07-05T16:35:53.9056027Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9056441Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9056530Z     return meth(
2025-07-05T16:35:53.9056721Z            ^^^^^
2025-07-05T16:35:53.9057213Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9057346Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9057609Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9058095Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9058273Z     ret = self._execute_context(
2025-07-05T16:35:53.9058417Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9058872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9059021Z     return self._exec_single_context(
2025-07-05T16:35:53.9059121Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9059722Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9059907Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9060418Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9060636Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9061144Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9061285Z     self.dialect.do_execute(
2025-07-05T16:35:53.9061775Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9061953Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9062289Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9062428Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9062520Z              ^
2025-07-05T16:35:53.9062526Z 
2025-07-05T16:35:53.9062898Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9063018Z FROM "user" 
2025-07-05T16:35:53.9063172Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9063345Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.9063522Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9064088Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9064189Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9064311Z              ^
2025-07-05T16:35:53.9064316Z 
2025-07-05T16:35:53.9064750Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9064866Z FROM "user" 
2025-07-05T16:35:53.9064972Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9065161Z [parameters: {'email_1': 'checklist_admin@example.com'}]
2025-07-05T16:35:53.9065333Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9065799Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9066237Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9066480Z ______ ERROR at setup of TestAdminUsersRouter.test_admin_user_management _______
2025-07-05T16:35:53.9066651Z tests/test_high_impact_coverage.py:407: in setup_admin_user
2025-07-05T16:35:53.9066829Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9066938Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9067151Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9067399Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9067840Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9068072Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9068163Z              ^
2025-07-05T16:35:53.9068206Z 
2025-07-05T16:35:53.9068570Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9068663Z FROM "user" 
2025-07-05T16:35:53.9068757Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9069001Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9069178Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9069290Z Traceback (most recent call last):
2025-07-05T16:35:53.9069963Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9070076Z     self.dialect.do_execute(
2025-07-05T16:35:53.9070613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9070761Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9070953Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9071052Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9071181Z              ^
2025-07-05T16:35:53.9071187Z 
2025-07-05T16:35:53.9071191Z 
2025-07-05T16:35:53.9071385Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9071391Z 
2025-07-05T16:35:53.9071575Z Traceback (most recent call last):
2025-07-05T16:35:53.9071960Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9072063Z     yield session
2025-07-05T16:35:53.9072622Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9072755Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9073218Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9073406Z     raise e
2025-07-05T16:35:53.9073884Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9074040Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9074433Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9074559Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9074963Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9075139Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9075724Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9075911Z     response = await func(request)
2025-07-05T16:35:53.9076018Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9076387Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9076536Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9076695Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9077197Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9077361Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9077468Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9077962Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9078091Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9078242Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9078834Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9078989Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9079099Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9079626Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9079716Z     return await future
2025-07-05T16:35:53.9079866Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9080318Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9080547Z     result = context.run(func, *args)
2025-07-05T16:35:53.9080646Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9081054Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9081249Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9081491Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9081878Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9081988Z     results = super().execute(
2025-07-05T16:35:53.9082118Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9082532Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9082633Z     return self._execute_internal(
2025-07-05T16:35:53.9082824Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9083283Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9083461Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9083617Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9084099Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9084303Z     result = conn.execute(
2025-07-05T16:35:53.9084414Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9084826Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9084957Z     return meth(
2025-07-05T16:35:53.9085047Z            ^^^^^
2025-07-05T16:35:53.9085745Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9085962Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9086081Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9086579Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9086734Z     ret = self._execute_context(
2025-07-05T16:35:53.9086832Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9087322Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9087506Z     return self._exec_single_context(
2025-07-05T16:35:53.9087619Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9088090Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9088245Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9088730Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9088956Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9089607Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9089732Z     self.dialect.do_execute(
2025-07-05T16:35:53.9090208Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9090332Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9090683Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9090802Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9091051Z              ^
2025-07-05T16:35:53.9091058Z 
2025-07-05T16:35:53.9091444Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9091575Z FROM "user" 
2025-07-05T16:35:53.9091683Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9091833Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9092031Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9092651Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9092771Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9092928Z              ^
2025-07-05T16:35:53.9092934Z 
2025-07-05T16:35:53.9093298Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9093397Z FROM "user" 
2025-07-05T16:35:53.9093505Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9093717Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9093905Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9094172Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9094608Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9094788Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9094900Z Traceback (most recent call last):
2025-07-05T16:35:53.9095569Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9095701Z     self.dialect.do_execute(
2025-07-05T16:35:53.9096222Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9096345Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9096541Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9096660Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9096812Z              ^
2025-07-05T16:35:53.9096819Z 
2025-07-05T16:35:53.9096823Z 
2025-07-05T16:35:53.9097037Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9097043Z 
2025-07-05T16:35:53.9097192Z Traceback (most recent call last):
2025-07-05T16:35:53.9097564Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9097664Z     yield session
2025-07-05T16:35:53.9098183Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9098365Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9098848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9099014Z     raise e
2025-07-05T16:35:53.9099472Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9099749Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9100134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9100323Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9100760Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9100880Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9101252Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9101509Z     response = await func(request)
2025-07-05T16:35:53.9101591Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9102094Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9102234Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9102337Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9102821Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9102989Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9103082Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9103636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9103788Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9103893Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9104313Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9104470Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9104568Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9105218Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9105324Z     return await future
2025-07-05T16:35:53.9105532Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9105971Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9106089Z     result = context.run(func, *args)
2025-07-05T16:35:53.9106265Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9106662Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9106866Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9107015Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9107403Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9107515Z     results = super().execute(
2025-07-05T16:35:53.9107714Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9108148Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9108264Z     return self._execute_internal(
2025-07-05T16:35:53.9108398Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9108857Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9109040Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9109222Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9109725Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9109996Z     result = conn.execute(
2025-07-05T16:35:53.9110093Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9110541Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9110659Z     return meth(
2025-07-05T16:35:53.9110798Z            ^^^^^
2025-07-05T16:35:53.9111305Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9111472Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9111682Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9112170Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9112303Z     ret = self._execute_context(
2025-07-05T16:35:53.9112452Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9112929Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9113080Z     return self._exec_single_context(
2025-07-05T16:35:53.9113210Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9113683Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9113822Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9114361Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9114626Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9115099Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9115211Z     self.dialect.do_execute(
2025-07-05T16:35:53.9115952Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9116075Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9116463Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9116622Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9116747Z              ^
2025-07-05T16:35:53.9116753Z 
2025-07-05T16:35:53.9117129Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9117266Z FROM "user" 
2025-07-05T16:35:53.9117360Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9117554Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9117787Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9117971Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9118351Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9118484Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9118559Z              ^
2025-07-05T16:35:53.9118564Z 
2025-07-05T16:35:53.9118976Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9119119Z FROM "user" 
2025-07-05T16:35:53.9119256Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9119396Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9119576Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9119710Z Traceback (most recent call last):
2025-07-05T16:35:53.9120257Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9120552Z     self.dialect.do_execute(
2025-07-05T16:35:53.9121005Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9121130Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9121363Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9121447Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9121587Z              ^
2025-07-05T16:35:53.9121594Z 
2025-07-05T16:35:53.9121598Z 
2025-07-05T16:35:53.9121874Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9121880Z 
2025-07-05T16:35:53.9121991Z Traceback (most recent call last):
2025-07-05T16:35:53.9122471Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9122608Z     yield session
2025-07-05T16:35:53.9123086Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9127528Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9128367Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9128503Z     raise e
2025-07-05T16:35:53.9129223Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9129326Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9129734Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9129855Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9130237Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9130340Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9130696Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9130789Z     response = await func(request)
2025-07-05T16:35:53.9130857Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9131197Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9131307Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9131381Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9131805Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9131954Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9132032Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9132464Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9132591Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9132666Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9133022Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9133156Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9133233Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9133711Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9133799Z     return await future
2025-07-05T16:35:53.9133869Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9134249Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9134345Z     result = context.run(func, *args)
2025-07-05T16:35:53.9134590Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9134950Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9135128Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9135213Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9135726Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9135813Z     results = super().execute(
2025-07-05T16:35:53.9135879Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9136398Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9136487Z     return self._execute_internal(
2025-07-05T16:35:53.9136554Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9137011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9137167Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9137246Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9137706Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9137784Z     result = conn.execute(
2025-07-05T16:35:53.9137850Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9138245Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9138322Z     return meth(
2025-07-05T16:35:53.9138382Z            ^^^^^
2025-07-05T16:35:53.9138850Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9138957Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9139045Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9139514Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9139597Z     ret = self._execute_context(
2025-07-05T16:35:53.9139672Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9140107Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9140195Z     return self._exec_single_context(
2025-07-05T16:35:53.9140271Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9140717Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9140801Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9141261Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9141452Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9141895Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9141984Z     self.dialect.do_execute(
2025-07-05T16:35:53.9142391Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9142492Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9142786Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9142859Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9142919Z              ^
2025-07-05T16:35:53.9142930Z 
2025-07-05T16:35:53.9143279Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9143463Z FROM "user" 
2025-07-05T16:35:53.9143542Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9143662Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9143817Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9144313Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9144389Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9144448Z              ^
2025-07-05T16:35:53.9144453Z 
2025-07-05T16:35:53.9144866Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9144936Z FROM "user" 
2025-07-05T16:35:53.9145013Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9145129Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9145286Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9145594Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9145921Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9146113Z _______ ERROR at setup of TestAdminUsersRouter.test_user_role_management _______
2025-07-05T16:35:53.9146262Z tests/test_high_impact_coverage.py:407: in setup_admin_user
2025-07-05T16:35:53.9146375Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9146454Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9146610Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9146764Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9147161Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9147242Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9147305Z              ^
2025-07-05T16:35:53.9147310Z 
2025-07-05T16:35:53.9147651Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9147725Z FROM "user" 
2025-07-05T16:35:53.9147802Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9147913Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9148057Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9148145Z Traceback (most recent call last):
2025-07-05T16:35:53.9148615Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9148704Z     self.dialect.do_execute(
2025-07-05T16:35:53.9149116Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9149218Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9149384Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9149451Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9149514Z              ^
2025-07-05T16:35:53.9149519Z 
2025-07-05T16:35:53.9149524Z 
2025-07-05T16:35:53.9149693Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9149699Z 
2025-07-05T16:35:53.9149779Z Traceback (most recent call last):
2025-07-05T16:35:53.9150118Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9150196Z     yield session
2025-07-05T16:35:53.9150661Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9150762Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9151609Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9151687Z     raise e
2025-07-05T16:35:53.9152130Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9152221Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9152587Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9152689Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9153169Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9153258Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9153603Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9153695Z     response = await func(request)
2025-07-05T16:35:53.9153764Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9154113Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9154218Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9154291Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9154720Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9154858Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9154940Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9155544Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9155738Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9155829Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9156199Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9156330Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9156410Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9156872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9156951Z     return await future
2025-07-05T16:35:53.9157021Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9157399Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9157487Z     result = context.run(func, *args)
2025-07-05T16:35:53.9157561Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9157906Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9158086Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9158180Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9158535Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9158616Z     results = super().execute(
2025-07-05T16:35:53.9158688Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9159078Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9159172Z     return self._execute_internal(
2025-07-05T16:35:53.9159240Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9159671Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9159956Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9160036Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9160488Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9160571Z     result = conn.execute(
2025-07-05T16:35:53.9160644Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9161025Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9161098Z     return meth(
2025-07-05T16:35:53.9161322Z            ^^^^^
2025-07-05T16:35:53.9161806Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9161915Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9161987Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9162449Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9162540Z     ret = self._execute_context(
2025-07-05T16:35:53.9162607Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9163026Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9163118Z     return self._exec_single_context(
2025-07-05T16:35:53.9163186Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9163623Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9163718Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9164172Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9164361Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9164807Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9164887Z     self.dialect.do_execute(
2025-07-05T16:35:53.9165310Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9165678Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9165980Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9166060Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9166121Z              ^
2025-07-05T16:35:53.9166127Z 
2025-07-05T16:35:53.9166472Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9166541Z FROM "user" 
2025-07-05T16:35:53.9166618Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9166740Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9166898Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9167443Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9167513Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9167578Z              ^
2025-07-05T16:35:53.9167583Z 
2025-07-05T16:35:53.9167920Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9167989Z FROM "user" 
2025-07-05T16:35:53.9168067Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9168188Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9168334Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9168744Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9169115Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9169267Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9169350Z Traceback (most recent call last):
2025-07-05T16:35:53.9169821Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9170007Z     self.dialect.do_execute(
2025-07-05T16:35:53.9170423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9170524Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9170688Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9170762Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9170827Z              ^
2025-07-05T16:35:53.9170832Z 
2025-07-05T16:35:53.9170836Z 
2025-07-05T16:35:53.9171001Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9171006Z 
2025-07-05T16:35:53.9171085Z Traceback (most recent call last):
2025-07-05T16:35:53.9171432Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9171500Z     yield session
2025-07-05T16:35:53.9171967Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9172072Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9172504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9172575Z     raise e
2025-07-05T16:35:53.9173004Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9173100Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9173470Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9173567Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9173925Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9174014Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9174353Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9174441Z     response = await func(request)
2025-07-05T16:35:53.9174507Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9174838Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9174944Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9175017Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9175563Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9175706Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9175784Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9176207Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9176333Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9176412Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9176761Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9177016Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9177094Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9177559Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9177635Z     return await future
2025-07-05T16:35:53.9177699Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9178068Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9178156Z     result = context.run(func, *args)
2025-07-05T16:35:53.9178343Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9178684Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9178855Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9178945Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9179303Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9179392Z     results = super().execute(
2025-07-05T16:35:53.9179458Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9179845Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9179933Z     return self._execute_internal(
2025-07-05T16:35:53.9179998Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9180425Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9180590Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9180669Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9181112Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9181199Z     result = conn.execute(
2025-07-05T16:35:53.9181264Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9181644Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9181717Z     return meth(
2025-07-05T16:35:53.9181778Z            ^^^^^
2025-07-05T16:35:53.9182231Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9182336Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9182413Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9182860Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9182947Z     ret = self._execute_context(
2025-07-05T16:35:53.9183017Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9183441Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9183531Z     return self._exec_single_context(
2025-07-05T16:35:53.9183599Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9184042Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9184129Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9184582Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9184770Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9185212Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9185485Z     self.dialect.do_execute(
2025-07-05T16:35:53.9185903Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9185996Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9186286Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9186361Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9186422Z              ^
2025-07-05T16:35:53.9186428Z 
2025-07-05T16:35:53.9186769Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9186949Z FROM "user" 
2025-07-05T16:35:53.9187030Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9187142Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9187297Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9187451Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9187794Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9187869Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9187928Z              ^
2025-07-05T16:35:53.9187933Z 
2025-07-05T16:35:53.9188263Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9188334Z FROM "user" 
2025-07-05T16:35:53.9188410Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9188518Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9188667Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9188755Z Traceback (most recent call last):
2025-07-05T16:35:53.9189211Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9189294Z     self.dialect.do_execute(
2025-07-05T16:35:53.9189707Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9189799Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9189959Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9190034Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9190095Z              ^
2025-07-05T16:35:53.9190100Z 
2025-07-05T16:35:53.9190104Z 
2025-07-05T16:35:53.9190267Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9190283Z 
2025-07-05T16:35:53.9190363Z Traceback (most recent call last):
2025-07-05T16:35:53.9190710Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9190783Z     yield session
2025-07-05T16:35:53.9191239Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9191341Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9191779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9191847Z     raise e
2025-07-05T16:35:53.9192278Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9192371Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9192735Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9192840Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9193188Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9193275Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9193734Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9193814Z     response = await func(request)
2025-07-05T16:35:53.9193882Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9194216Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9194314Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9194385Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9194803Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9195091Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9195168Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9195811Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9195942Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9196017Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9196371Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9196494Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9196569Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9197031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9197109Z     return await future
2025-07-05T16:35:53.9197178Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9197544Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9197634Z     result = context.run(func, *args)
2025-07-05T16:35:53.9197707Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9198044Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9198216Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9198306Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9198657Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9198737Z     results = super().execute(
2025-07-05T16:35:53.9198811Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9199193Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9199276Z     return self._execute_internal(
2025-07-05T16:35:53.9199346Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9199777Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9199925Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9200008Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9200465Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9200546Z     result = conn.execute(
2025-07-05T16:35:53.9200611Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9200987Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9201066Z     return meth(
2025-07-05T16:35:53.9201126Z            ^^^^^
2025-07-05T16:35:53.9201576Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9201813Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9201887Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9202336Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9202421Z     ret = self._execute_context(
2025-07-05T16:35:53.9202487Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9202904Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9202995Z     return self._exec_single_context(
2025-07-05T16:35:53.9203166Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9203608Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9203695Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9204146Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9204330Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9204774Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9204852Z     self.dialect.do_execute(
2025-07-05T16:35:53.9205261Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9205487Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9205847Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9205922Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9205983Z              ^
2025-07-05T16:35:53.9205988Z 
2025-07-05T16:35:53.9206330Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9206404Z FROM "user" 
2025-07-05T16:35:53.9206481Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9206593Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9206740Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9207240Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9207309Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9207369Z              ^
2025-07-05T16:35:53.9207377Z 
2025-07-05T16:35:53.9207722Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9207792Z FROM "user" 
2025-07-05T16:35:53.9207866Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9207978Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9208124Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9208324Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9208646Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9208840Z _____ ERROR at setup of TestAdminUsersRouter.test_user_password_management _____
2025-07-05T16:35:53.9208987Z tests/test_high_impact_coverage.py:407: in setup_admin_user
2025-07-05T16:35:53.9209100Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9209184Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9209333Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9209480Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9209871Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9210071Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9210133Z              ^
2025-07-05T16:35:53.9210138Z 
2025-07-05T16:35:53.9210482Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9210554Z FROM "user" 
2025-07-05T16:35:53.9210641Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9210755Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9210903Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9211095Z Traceback (most recent call last):
2025-07-05T16:35:53.9211568Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9211657Z     self.dialect.do_execute(
2025-07-05T16:35:53.9212065Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9212166Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9212334Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9212401Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9212460Z              ^
2025-07-05T16:35:53.9212465Z 
2025-07-05T16:35:53.9212469Z 
2025-07-05T16:35:53.9212640Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9212646Z 
2025-07-05T16:35:53.9212725Z Traceback (most recent call last):
2025-07-05T16:35:53.9213064Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9213141Z     yield session
2025-07-05T16:35:53.9213605Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9213704Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9214151Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9214218Z     raise e
2025-07-05T16:35:53.9214647Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9214742Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9215104Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9215205Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9215672Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9215762Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9216105Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9216190Z     response = await func(request)
2025-07-05T16:35:53.9216256Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9216593Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9216689Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9216760Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9217182Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9217316Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9217397Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9217838Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9217952Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9218154Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9218508Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9218634Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9218720Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9219180Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9219254Z     return await future
2025-07-05T16:35:53.9219426Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9219796Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9219884Z     result = context.run(func, *args)
2025-07-05T16:35:53.9219961Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9220310Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9220482Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9220571Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9220923Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9221002Z     results = super().execute(
2025-07-05T16:35:53.9221073Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9221456Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9221545Z     return self._execute_internal(
2025-07-05T16:35:53.9221620Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9222051Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9222212Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9222293Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9222742Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9222830Z     result = conn.execute(
2025-07-05T16:35:53.9222898Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9223278Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9223356Z     return meth(
2025-07-05T16:35:53.9223421Z            ^^^^^
2025-07-05T16:35:53.9223874Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9223980Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9224056Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9224514Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9224604Z     ret = self._execute_context(
2025-07-05T16:35:53.9224670Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9225096Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9225187Z     return self._exec_single_context(
2025-07-05T16:35:53.9225256Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9225800Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9225897Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9226353Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9226657Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9227103Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9227186Z     self.dialect.do_execute(
2025-07-05T16:35:53.9227604Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9227696Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9227985Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9228198Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9228260Z              ^
2025-07-05T16:35:53.9228266Z 
2025-07-05T16:35:53.9228606Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9228680Z FROM "user" 
2025-07-05T16:35:53.9228757Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9228868Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9229019Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9229566Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9229636Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9229697Z              ^
2025-07-05T16:35:53.9229708Z 
2025-07-05T16:35:53.9230046Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9230116Z FROM "user" 
2025-07-05T16:35:53.9230192Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9230310Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9230454Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9230694Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9231065Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9231218Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9231302Z Traceback (most recent call last):
2025-07-05T16:35:53.9231761Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9231845Z     self.dialect.do_execute(
2025-07-05T16:35:53.9232251Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9232347Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9232509Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9232582Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9232648Z              ^
2025-07-05T16:35:53.9232653Z 
2025-07-05T16:35:53.9232657Z 
2025-07-05T16:35:53.9232820Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9232826Z 
2025-07-05T16:35:53.9232904Z Traceback (most recent call last):
2025-07-05T16:35:53.9233244Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9233312Z     yield session
2025-07-05T16:35:53.9233778Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9233882Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9234313Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9234385Z     raise e
2025-07-05T16:35:53.9234898Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9234988Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9235461Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9235642Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9236037Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9236127Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9236592Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9236682Z     response = await func(request)
2025-07-05T16:35:53.9236749Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9237081Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9237188Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9237260Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9237676Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9237816Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9237892Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9238313Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9238441Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9238515Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9238862Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9238997Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9239074Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9239534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9239614Z     return await future
2025-07-05T16:35:53.9239678Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9240057Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9240149Z     result = context.run(func, *args)
2025-07-05T16:35:53.9240218Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9240560Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9240732Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9240819Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9241175Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9241256Z     results = super().execute(
2025-07-05T16:35:53.9241323Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9241711Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9241793Z     return self._execute_internal(
2025-07-05T16:35:53.9241860Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9242298Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9242443Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9242523Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9243122Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9243202Z     result = conn.execute(
2025-07-05T16:35:53.9243267Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9243650Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9243718Z     return meth(
2025-07-05T16:35:53.9243779Z            ^^^^^
2025-07-05T16:35:53.9244239Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9244415Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9244486Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9244948Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9245035Z     ret = self._execute_context(
2025-07-05T16:35:53.9245108Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9246009Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9246108Z     return self._exec_single_context(
2025-07-05T16:35:53.9246184Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9246643Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9246730Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9247196Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9247384Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9247826Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9247920Z     self.dialect.do_execute(
2025-07-05T16:35:53.9248328Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9248429Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9248721Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9248791Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9248852Z              ^
2025-07-05T16:35:53.9248865Z 
2025-07-05T16:35:53.9249211Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9249280Z FROM "user" 
2025-07-05T16:35:53.9249359Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9249479Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9249631Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9249790Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9250146Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9250214Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9250275Z              ^
2025-07-05T16:35:53.9250280Z 
2025-07-05T16:35:53.9250627Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9250691Z FROM "user" 
2025-07-05T16:35:53.9250768Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9250894Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9251041Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9251123Z Traceback (most recent call last):
2025-07-05T16:35:53.9251588Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9251799Z     self.dialect.do_execute(
2025-07-05T16:35:53.9252210Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9252309Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9252472Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9252539Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9252604Z              ^
2025-07-05T16:35:53.9252608Z 
2025-07-05T16:35:53.9252612Z 
2025-07-05T16:35:53.9252773Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9252879Z 
2025-07-05T16:35:53.9252962Z Traceback (most recent call last):
2025-07-05T16:35:53.9253304Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9253373Z     yield session
2025-07-05T16:35:53.9253838Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9253949Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9254378Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9254445Z     raise e
2025-07-05T16:35:53.9254885Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9254975Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9255707Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9255831Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9256192Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9256292Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9256627Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9256708Z     response = await func(request)
2025-07-05T16:35:53.9256780Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9257111Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9257211Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9257289Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9257704Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9257848Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9257925Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9258341Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9258465Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9258540Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9258886Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9259016Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9259093Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9259550Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9259635Z     return await future
2025-07-05T16:35:53.9259698Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9260065Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9260286Z     result = context.run(func, *args)
2025-07-05T16:35:53.9260355Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9260698Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9260887Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9260970Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9261359Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9261555Z     results = super().execute(
2025-07-05T16:35:53.9261620Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9262005Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9262096Z     return self._execute_internal(
2025-07-05T16:35:53.9262163Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9262600Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9262747Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9262829Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9263281Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9263358Z     result = conn.execute(
2025-07-05T16:35:53.9263423Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9263811Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9263879Z     return meth(
2025-07-05T16:35:53.9263940Z            ^^^^^
2025-07-05T16:35:53.9264407Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9264510Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9264582Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9265042Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9265123Z     ret = self._execute_context(
2025-07-05T16:35:53.9265189Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9265725Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9265817Z     return self._exec_single_context(
2025-07-05T16:35:53.9265886Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9266337Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9266419Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9266883Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9267062Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9267504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9267592Z     self.dialect.do_execute(
2025-07-05T16:35:53.9268004Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9268101Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9268392Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9268463Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9268524Z              ^
2025-07-05T16:35:53.9268529Z 
2025-07-05T16:35:53.9268875Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9269058Z FROM "user" 
2025-07-05T16:35:53.9269136Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9269256Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9269407Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9269900Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9269974Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9270135Z              ^
2025-07-05T16:35:53.9270140Z 
2025-07-05T16:35:53.9270474Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9270543Z FROM "user" 
2025-07-05T16:35:53.9270618Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9270740Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9270882Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9271082Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9271404Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9271597Z _____ ERROR at setup of TestAdminUsersRouter.test_user_activity_monitoring _____
2025-07-05T16:35:53.9271742Z tests/test_high_impact_coverage.py:407: in setup_admin_user
2025-07-05T16:35:53.9271856Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9271939Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9272085Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9272232Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9272631Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9272706Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9272766Z              ^
2025-07-05T16:35:53.9272771Z 
2025-07-05T16:35:53.9273106Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9273169Z FROM "user" 
2025-07-05T16:35:53.9273249Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9273356Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9273498Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9273589Z Traceback (most recent call last):
2025-07-05T16:35:53.9274045Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9274124Z     self.dialect.do_execute(
2025-07-05T16:35:53.9274543Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9274634Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9274795Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9274868Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9274929Z              ^
2025-07-05T16:35:53.9274934Z 
2025-07-05T16:35:53.9274938Z 
2025-07-05T16:35:53.9275097Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9275107Z 
2025-07-05T16:35:53.9275185Z Traceback (most recent call last):
2025-07-05T16:35:53.9275631Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9275704Z     yield session
2025-07-05T16:35:53.9276166Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9276385Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9276827Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9276892Z     raise e
2025-07-05T16:35:53.9277321Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9277418Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9277781Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9277979Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9278338Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9278429Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9278775Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9278861Z     response = await func(request)
2025-07-05T16:35:53.9278927Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9279261Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9279356Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9279427Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9279847Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9279982Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9280059Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9280487Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9280605Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9280679Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9281037Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9281160Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9281238Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9281701Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9281779Z     return await future
2025-07-05T16:35:53.9281848Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9282214Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9282299Z     result = context.run(func, *args)
2025-07-05T16:35:53.9282373Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9282715Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9282886Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9282974Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9283324Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9283403Z     results = super().execute(
2025-07-05T16:35:53.9283477Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9283866Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9283945Z     return self._execute_internal(
2025-07-05T16:35:53.9284016Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9284445Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9284680Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9284765Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9285217Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9285308Z     result = conn.execute(
2025-07-05T16:35:53.9285520Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9285961Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9286159Z     return meth(
2025-07-05T16:35:53.9286220Z            ^^^^^
2025-07-05T16:35:53.9286680Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9286784Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9286861Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9287315Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9287403Z     ret = self._execute_context(
2025-07-05T16:35:53.9287469Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9287890Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9287985Z     return self._exec_single_context(
2025-07-05T16:35:53.9288053Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9288500Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9288588Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9289040Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9289222Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9289667Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9289747Z     self.dialect.do_execute(
2025-07-05T16:35:53.9290158Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9290250Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9290541Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9290626Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9290686Z              ^
2025-07-05T16:35:53.9290691Z 
2025-07-05T16:35:53.9291030Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9291101Z FROM "user" 
2025-07-05T16:35:53.9291177Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9291289Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9291438Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9291983Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9292052Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9292110Z              ^
2025-07-05T16:35:53.9292115Z 
2025-07-05T16:35:53.9292454Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9292522Z FROM "user" 
2025-07-05T16:35:53.9292597Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9292711Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9292967Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9293204Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9293574Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9293724Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9293804Z Traceback (most recent call last):
2025-07-05T16:35:53.9294265Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9294455Z     self.dialect.do_execute(
2025-07-05T16:35:53.9294861Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9294958Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9295123Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9295191Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9295257Z              ^
2025-07-05T16:35:53.9295262Z 
2025-07-05T16:35:53.9295266Z 
2025-07-05T16:35:53.9295536Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9295542Z 
2025-07-05T16:35:53.9295621Z Traceback (most recent call last):
2025-07-05T16:35:53.9295963Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9296040Z     yield session
2025-07-05T16:35:53.9296504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9296613Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9297044Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9297118Z     raise e
2025-07-05T16:35:53.9297548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9297638Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9298008Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9298103Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9298455Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9298550Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9298888Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9298974Z     response = await func(request)
2025-07-05T16:35:53.9299041Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9299373Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9299474Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9299545Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9299960Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9300099Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9300176Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9300594Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9300718Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9300799Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9301143Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9301391Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9301468Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9301930Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9302010Z     return await future
2025-07-05T16:35:53.9302073Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9302439Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9302630Z     result = context.run(func, *args)
2025-07-05T16:35:53.9302699Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9303038Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9303215Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9303303Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9303658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9303736Z     results = super().execute(
2025-07-05T16:35:53.9303802Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9304188Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9304269Z     return self._execute_internal(
2025-07-05T16:35:53.9304335Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9304770Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9304915Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9304997Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9305559Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9305641Z     result = conn.execute(
2025-07-05T16:35:53.9305705Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9306086Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9306153Z     return meth(
2025-07-05T16:35:53.9306212Z            ^^^^^
2025-07-05T16:35:53.9306670Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9306773Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9306844Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9307296Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9307381Z     ret = self._execute_context(
2025-07-05T16:35:53.9307447Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9307873Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9307957Z     return self._exec_single_context(
2025-07-05T16:35:53.9308025Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9308468Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9308550Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9309009Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9309188Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9309627Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9309829Z     self.dialect.do_execute(
2025-07-05T16:35:53.9310234Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9310331Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9310620Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9310689Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9310748Z              ^
2025-07-05T16:35:53.9310754Z 
2025-07-05T16:35:53.9311106Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9311273Z FROM "user" 
2025-07-05T16:35:53.9311349Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9311466Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9311611Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9311764Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9312115Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9312183Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9312243Z              ^
2025-07-05T16:35:53.9312247Z 
2025-07-05T16:35:53.9312586Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9312648Z FROM "user" 
2025-07-05T16:35:53.9312729Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9312835Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9312981Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9313066Z Traceback (most recent call last):
2025-07-05T16:35:53.9313515Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9313605Z     self.dialect.do_execute(
2025-07-05T16:35:53.9314010Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9314107Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9314267Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9314334Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9314394Z              ^
2025-07-05T16:35:53.9314399Z 
2025-07-05T16:35:53.9314408Z 
2025-07-05T16:35:53.9314574Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9314579Z 
2025-07-05T16:35:53.9314657Z Traceback (most recent call last):
2025-07-05T16:35:53.9314994Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9315062Z     yield session
2025-07-05T16:35:53.9315630Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9315735Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9316171Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9316236Z     raise e
2025-07-05T16:35:53.9316672Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9316762Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9317137Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9317233Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9317579Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9317795Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9318137Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9318220Z     response = await func(request)
2025-07-05T16:35:53.9318291Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9318624Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9318722Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9318798Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9319317Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9319447Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9319529Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9319949Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9320064Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9320137Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9320481Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9320609Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9320692Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9321153Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9321231Z     return await future
2025-07-05T16:35:53.9321294Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9321669Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9321764Z     result = context.run(func, *args)
2025-07-05T16:35:53.9321833Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9322174Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9322351Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9322435Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9322789Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9322880Z     results = super().execute(
2025-07-05T16:35:53.9322945Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9323326Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9323413Z     return self._execute_internal(
2025-07-05T16:35:53.9323484Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9323914Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9324066Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9324147Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9324603Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9324680Z     result = conn.execute(
2025-07-05T16:35:53.9324749Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9325132Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9325198Z     return meth(
2025-07-05T16:35:53.9325261Z            ^^^^^
2025-07-05T16:35:53.9325914Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9326162Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9326233Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9326696Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9326775Z     ret = self._execute_context(
2025-07-05T16:35:53.9326841Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9327270Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9327463Z     return self._exec_single_context(
2025-07-05T16:35:53.9327532Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9327984Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9328074Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9328529Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9328714Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9329157Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9329240Z     self.dialect.do_execute(
2025-07-05T16:35:53.9329647Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9329744Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9330037Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9330105Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9330165Z              ^
2025-07-05T16:35:53.9330174Z 
2025-07-05T16:35:53.9330520Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9330583Z FROM "user" 
2025-07-05T16:35:53.9330665Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9330789Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9330937Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9331427Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9331500Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9331565Z              ^
2025-07-05T16:35:53.9331570Z 
2025-07-05T16:35:53.9331904Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9331966Z FROM "user" 
2025-07-05T16:35:53.9332051Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9332161Z [parameters: {'email_1': 'user_admin@example.com'}]
2025-07-05T16:35:53.9332304Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9332502Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9332825Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9333028Z ___ ERROR at setup of TestErrorHandlingAndEdgeCases.test_malformed_requests ____
2025-07-05T16:35:53.9333171Z tests/test_high_impact_coverage.py:723: in setup_admin_user
2025-07-05T16:35:53.9333286Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9333363Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9333504Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9333655Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9334133Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9334202Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9334267Z              ^
2025-07-05T16:35:53.9334272Z 
2025-07-05T16:35:53.9334607Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9334671Z FROM "user" 
2025-07-05T16:35:53.9334751Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9334864Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9335081Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9335170Z Traceback (most recent call last):
2025-07-05T16:35:53.9335738Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9335825Z     self.dialect.do_execute(
2025-07-05T16:35:53.9336246Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9336338Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9336498Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9336570Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9336630Z              ^
2025-07-05T16:35:53.9336635Z 
2025-07-05T16:35:53.9336639Z 
2025-07-05T16:35:53.9336804Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9336809Z 
2025-07-05T16:35:53.9336897Z Traceback (most recent call last):
2025-07-05T16:35:53.9337233Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9337306Z     yield session
2025-07-05T16:35:53.9337773Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9337877Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9338316Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9338384Z     raise e
2025-07-05T16:35:53.9338813Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9338909Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9339274Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9339375Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9339732Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9339819Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9340167Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9340247Z     response = await func(request)
2025-07-05T16:35:53.9340313Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9340650Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9340747Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9340820Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9341240Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9341376Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9341452Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9341874Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9342121Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9342196Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9342548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9342672Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9342749Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9343210Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9343386Z     return await future
2025-07-05T16:35:53.9343452Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9343829Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9343915Z     result = context.run(func, *args)
2025-07-05T16:35:53.9343988Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9344332Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9344504Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9344589Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9344939Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9345019Z     results = super().execute(
2025-07-05T16:35:53.9345091Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9345582Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9345664Z     return self._execute_internal(
2025-07-05T16:35:53.9345738Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9346167Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9346320Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9346404Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9346855Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9346931Z     result = conn.execute(
2025-07-05T16:35:53.9347000Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9347379Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9347450Z     return meth(
2025-07-05T16:35:53.9347515Z            ^^^^^
2025-07-05T16:35:53.9347966Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9348069Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9348150Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9348599Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9348684Z     ret = self._execute_context(
2025-07-05T16:35:53.9348750Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9349176Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9349264Z     return self._exec_single_context(
2025-07-05T16:35:53.9349335Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9349777Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9349865Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9350316Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9350610Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9351065Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9351145Z     self.dialect.do_execute(
2025-07-05T16:35:53.9351556Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9351646Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9352035Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9352103Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9352168Z              ^
2025-07-05T16:35:53.9352173Z 
2025-07-05T16:35:53.9352514Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9352582Z FROM "user" 
2025-07-05T16:35:53.9352663Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9352778Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9352926Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9353467Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9353536Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9353595Z              ^
2025-07-05T16:35:53.9353604Z 
2025-07-05T16:35:53.9353948Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9354011Z FROM "user" 
2025-07-05T16:35:53.9354087Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9354203Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9354347Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9354578Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9354939Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9355095Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9355177Z Traceback (most recent call last):
2025-07-05T16:35:53.9355738Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9355822Z     self.dialect.do_execute(
2025-07-05T16:35:53.9356229Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9356329Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9356491Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9356558Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9356622Z              ^
2025-07-05T16:35:53.9356627Z 
2025-07-05T16:35:53.9356631Z 
2025-07-05T16:35:53.9356792Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9356798Z 
2025-07-05T16:35:53.9356877Z Traceback (most recent call last):
2025-07-05T16:35:53.9357214Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9357281Z     yield session
2025-07-05T16:35:53.9357751Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9357858Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9358289Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9358507Z     raise e
2025-07-05T16:35:53.9358945Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9359036Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9359403Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9359498Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9359845Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9360049Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9360405Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9360489Z     response = await func(request)
2025-07-05T16:35:53.9360566Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9360915Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9361013Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9361090Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9361535Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9361674Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9361751Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9362173Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9362291Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9362367Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9362719Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9362849Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9362924Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9363386Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9363465Z     return await future
2025-07-05T16:35:53.9363529Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9363897Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9363992Z     result = context.run(func, *args)
2025-07-05T16:35:53.9364060Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9364399Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9364580Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9364662Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9365012Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9365098Z     results = super().execute(
2025-07-05T16:35:53.9365165Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9365749Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9365843Z     return self._execute_internal(
2025-07-05T16:35:53.9365914Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9366350Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9366498Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9366702Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9367157Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9367235Z     result = conn.execute(
2025-07-05T16:35:53.9367300Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9367685Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9367753Z     return meth(
2025-07-05T16:35:53.9367813Z            ^^^^^
2025-07-05T16:35:53.9368284Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9368488Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9368559Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9369021Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9369106Z     ret = self._execute_context(
2025-07-05T16:35:53.9369171Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9369601Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9369683Z     return self._exec_single_context(
2025-07-05T16:35:53.9369750Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9370194Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9370281Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9370739Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9370928Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9371377Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9371464Z     self.dialect.do_execute(
2025-07-05T16:35:53.9371873Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9371968Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9372264Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9372334Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9372394Z              ^
2025-07-05T16:35:53.9372404Z 
2025-07-05T16:35:53.9372751Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9372814Z FROM "user" 
2025-07-05T16:35:53.9372893Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9373014Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9373172Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9373323Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9373671Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9373746Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9373806Z              ^
2025-07-05T16:35:53.9373811Z 
2025-07-05T16:35:53.9374146Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9374218Z FROM "user" 
2025-07-05T16:35:53.9374295Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9374406Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9374553Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9374636Z Traceback (most recent call last):
2025-07-05T16:35:53.9375177Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9375267Z     self.dialect.do_execute(
2025-07-05T16:35:53.9375786Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9375882Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9376051Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9376119Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9376179Z              ^
2025-07-05T16:35:53.9376184Z 
2025-07-05T16:35:53.9376302Z 
2025-07-05T16:35:53.9376474Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9376480Z 
2025-07-05T16:35:53.9376559Z Traceback (most recent call last):
2025-07-05T16:35:53.9376899Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9376978Z     yield session
2025-07-05T16:35:53.9377442Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9377545Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9377978Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9378044Z     raise e
2025-07-05T16:35:53.9379149Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9379247Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9379613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9379722Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9380074Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9380170Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9380505Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9380588Z     response = await func(request)
2025-07-05T16:35:53.9380659Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9380996Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9381095Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9381176Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9381593Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9381728Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9381810Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9382238Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9382353Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9382435Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9382781Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9382905Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9382986Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9383449Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9383528Z     return await future
2025-07-05T16:35:53.9383592Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9383961Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9384172Z     result = context.run(func, *args)
2025-07-05T16:35:53.9384240Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9384581Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9384762Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9384845Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9385194Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9385455Z     results = super().execute(
2025-07-05T16:35:53.9385529Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9385916Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9386010Z     return self._execute_internal(
2025-07-05T16:35:53.9386079Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9386504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9386659Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9386737Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9387186Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9387272Z     result = conn.execute(
2025-07-05T16:35:53.9387337Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9387715Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9387790Z     return meth(
2025-07-05T16:35:53.9387852Z            ^^^^^
2025-07-05T16:35:53.9388321Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9388431Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9388502Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9388965Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9389049Z     ret = self._execute_context(
2025-07-05T16:35:53.9389116Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9389547Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9389636Z     return self._exec_single_context(
2025-07-05T16:35:53.9389705Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9390151Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9390239Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9390694Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9390879Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9391319Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9391404Z     self.dialect.do_execute(
2025-07-05T16:35:53.9391811Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9391907Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9392202Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9392271Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9392453Z              ^
2025-07-05T16:35:53.9392458Z 
2025-07-05T16:35:53.9392798Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9392870Z FROM "user" 
2025-07-05T16:35:53.9392946Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9393063Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9393215Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9393707Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9393877Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9393942Z              ^
2025-07-05T16:35:53.9393948Z 
2025-07-05T16:35:53.9394282Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9394349Z FROM "user" 
2025-07-05T16:35:53.9394429Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9394541Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9394687Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9394887Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:53.9395211Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9395523Z __ ERROR at setup of TestErrorHandlingAndEdgeCases.test_permission_boundaries __
2025-07-05T16:35:53.9395663Z tests/test_high_impact_coverage.py:723: in setup_admin_user
2025-07-05T16:35:53.9395789Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9395869Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9396012Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9396164Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9396563Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9396631Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9396699Z              ^
2025-07-05T16:35:53.9396704Z 
2025-07-05T16:35:53.9397039Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9397102Z FROM "user" 
2025-07-05T16:35:53.9397182Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9397296Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9397440Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9397526Z Traceback (most recent call last):
2025-07-05T16:35:53.9397985Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9398069Z     self.dialect.do_execute(
2025-07-05T16:35:53.9398483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9398576Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9398735Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9398807Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9398866Z              ^
2025-07-05T16:35:53.9398871Z 
2025-07-05T16:35:53.9398875Z 
2025-07-05T16:35:53.9399037Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9399047Z 
2025-07-05T16:35:53.9399133Z Traceback (most recent call last):
2025-07-05T16:35:53.9399471Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9399538Z     yield session
2025-07-05T16:35:53.9400004Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9400220Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9400654Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9400724Z     raise e
2025-07-05T16:35:53.9401156Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9401252Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9401614Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9401833Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9402199Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9402288Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9402632Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9402720Z     response = await func(request)
2025-07-05T16:35:53.9402790Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9403124Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9403228Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9403298Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9403717Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9403854Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9403931Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9404352Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9404472Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9404545Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9404896Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9405021Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9405097Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9405765Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9405852Z     return await future
2025-07-05T16:35:53.9405916Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9406298Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9406388Z     result = context.run(func, *args)
2025-07-05T16:35:53.9406455Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9406802Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9406976Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9407060Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9407419Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9407499Z     results = super().execute(
2025-07-05T16:35:53.9407569Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9407955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9408036Z     return self._execute_internal(
2025-07-05T16:35:53.9408108Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9408664Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9408812Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9408896Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9409346Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9409423Z     result = conn.execute(
2025-07-05T16:35:53.9409494Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9409871Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9410041Z     return meth(
2025-07-05T16:35:53.9410107Z            ^^^^^
2025-07-05T16:35:53.9410563Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9410667Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9410748Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9411211Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9411291Z     ret = self._execute_context(
2025-07-05T16:35:53.9411364Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9411788Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9411876Z     return self._exec_single_context(
2025-07-05T16:35:53.9411949Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9412387Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9412475Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9412929Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9413110Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9413563Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9413644Z     self.dialect.do_execute(
2025-07-05T16:35:53.9414053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9414154Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9414449Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9414522Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9414590Z              ^
2025-07-05T16:35:53.9414596Z 
2025-07-05T16:35:53.9414939Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9415008Z FROM "user" 
2025-07-05T16:35:53.9415091Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9415212Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9415469Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9416024Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9416093Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9416159Z              ^
2025-07-05T16:35:53.9416164Z 
2025-07-05T16:35:53.9416505Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9416569Z FROM "user" 
2025-07-05T16:35:53.9416646Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9416877Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9417023Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9417262Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9417623Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9417782Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9417865Z Traceback (most recent call last):
2025-07-05T16:35:53.9419103Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9419191Z     self.dialect.do_execute(
2025-07-05T16:35:53.9419599Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9419700Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9419862Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9419929Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9419990Z              ^
2025-07-05T16:35:53.9419994Z 
2025-07-05T16:35:53.9420003Z 
2025-07-05T16:35:53.9420166Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9420172Z 
2025-07-05T16:35:53.9420251Z Traceback (most recent call last):
2025-07-05T16:35:53.9420594Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9420669Z     yield session
2025-07-05T16:35:53.9421139Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9421243Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9421676Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9421748Z     raise e
2025-07-05T16:35:53.9422184Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9422274Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9422641Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9422738Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9423104Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9423203Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9423546Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9423627Z     response = await func(request)
2025-07-05T16:35:53.9423705Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9424038Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9424137Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9424215Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9424631Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9424764Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9424846Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9425272Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9425482Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9425564Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9426070Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9426201Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9426278Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9426740Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9426819Z     return await future
2025-07-05T16:35:53.9426883Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9427254Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9427450Z     result = context.run(func, *args)
2025-07-05T16:35:53.9427519Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9427860Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9428041Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9428125Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9428476Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9428564Z     results = super().execute(
2025-07-05T16:35:53.9428629Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9429015Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9429106Z     return self._execute_internal(
2025-07-05T16:35:53.9429172Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9429601Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9429753Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9429835Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9430290Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9430366Z     result = conn.execute(
2025-07-05T16:35:53.9430434Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9430815Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9430883Z     return meth(
2025-07-05T16:35:53.9430945Z            ^^^^^
2025-07-05T16:35:53.9431407Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9431507Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9431581Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9432038Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9432127Z     ret = self._execute_context(
2025-07-05T16:35:53.9432194Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9432624Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9432709Z     return self._exec_single_context(
2025-07-05T16:35:53.9432777Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9433221Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9433309Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9433764Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9433948Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9434478Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9434564Z     self.dialect.do_execute(
2025-07-05T16:35:53.9434973Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9435066Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9435462Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9435534Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9435704Z              ^
2025-07-05T16:35:53.9435710Z 
2025-07-05T16:35:53.9436058Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9436122Z FROM "user" 
2025-07-05T16:35:53.9436199Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9436320Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9436475Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9436624Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9436969Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9437043Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9437105Z              ^
2025-07-05T16:35:53.9437109Z 
2025-07-05T16:35:53.9437444Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9437516Z FROM "user" 
2025-07-05T16:35:53.9437592Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9437703Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9437852Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9437939Z Traceback (most recent call last):
2025-07-05T16:35:53.9438395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9438478Z     self.dialect.do_execute(
2025-07-05T16:35:53.9438886Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9438979Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9439145Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9439214Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9439274Z              ^
2025-07-05T16:35:53.9439285Z 
2025-07-05T16:35:53.9439289Z 
2025-07-05T16:35:53.9439461Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9439466Z 
2025-07-05T16:35:53.9439545Z Traceback (most recent call last):
2025-07-05T16:35:53.9439883Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9439960Z     yield session
2025-07-05T16:35:53.9440427Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9440523Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9440962Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9441030Z     raise e
2025-07-05T16:35:53.9441463Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9441560Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9441923Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9442029Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9446023Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9446179Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9446596Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9446688Z     response = await func(request)
2025-07-05T16:35:53.9446757Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9447115Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9447222Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9447466Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9447922Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9448072Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9448159Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9448608Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9448725Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9448807Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9449169Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9449300Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9449387Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9449866Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9449946Z     return await future
2025-07-05T16:35:53.9450021Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9450409Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9450500Z     result = context.run(func, *args)
2025-07-05T16:35:53.9450577Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9450926Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9451116Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9451207Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9451600Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9451692Z     results = super().execute(
2025-07-05T16:35:53.9451764Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9452160Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9452253Z     return self._execute_internal(
2025-07-05T16:35:53.9452320Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9452754Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9452909Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9452990Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9453441Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9453532Z     result = conn.execute(
2025-07-05T16:35:53.9453600Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9453988Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9454065Z     return meth(
2025-07-05T16:35:53.9454251Z            ^^^^^
2025-07-05T16:35:53.9454715Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9454827Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9454900Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9455477Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9455572Z     ret = self._execute_context(
2025-07-05T16:35:53.9455640Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9456179Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9456272Z     return self._exec_single_context(
2025-07-05T16:35:53.9456343Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9456785Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9456885Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9457337Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9457520Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9457960Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9458041Z     self.dialect.do_execute(
2025-07-05T16:35:53.9458461Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9458557Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9458853Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9458933Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9458997Z              ^
2025-07-05T16:35:53.9459003Z 
2025-07-05T16:35:53.9459352Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9459426Z FROM "user" 
2025-07-05T16:35:53.9459506Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9459626Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9459783Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9460276Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9460352Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9460420Z              ^
2025-07-05T16:35:53.9460424Z 
2025-07-05T16:35:53.9460762Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9460831Z FROM "user" 
2025-07-05T16:35:53.9460908Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9461028Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9461174Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9461404Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9461741Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9461960Z _ ERROR at setup of TestErrorHandlingAndEdgeCases.test_rate_limiting_simulation _
2025-07-05T16:35:53.9462108Z tests/test_high_impact_coverage.py:723: in setup_admin_user
2025-07-05T16:35:53.9462229Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9462309Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9462452Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9462729Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9463131Z 2025-07-05 16:35:51 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9463204Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9463265Z              ^
2025-07-05T16:35:53.9463277Z 
2025-07-05T16:35:53.9463618Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9463682Z FROM "user" 
2025-07-05T16:35:53.9463835Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9463955Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9464103Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9464188Z Traceback (most recent call last):
2025-07-05T16:35:53.9464656Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9464745Z     self.dialect.do_execute(
2025-07-05T16:35:53.9465158Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9465260Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9465526Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9465598Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9465665Z              ^
2025-07-05T16:35:53.9465670Z 
2025-07-05T16:35:53.9465674Z 
2025-07-05T16:35:53.9465837Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9465847Z 
2025-07-05T16:35:53.9465928Z Traceback (most recent call last):
2025-07-05T16:35:53.9466273Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9466341Z     yield session
2025-07-05T16:35:53.9466816Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9466919Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9467354Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9467430Z     raise e
2025-07-05T16:35:53.9467860Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9467950Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9468324Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9468419Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9468776Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9468868Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9469205Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9469293Z     response = await func(request)
2025-07-05T16:35:53.9469361Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9469690Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9469795Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9469867Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9470288Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9470427Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9470511Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9471057Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9471179Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9471256Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9471602Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9471735Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9471812Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9472278Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9472461Z     return await future
2025-07-05T16:35:53.9472526Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9472917Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9473012Z     result = context.run(func, *args)
2025-07-05T16:35:53.9473082Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9473434Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9473607Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9473691Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9474051Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9474140Z     results = super().execute(
2025-07-05T16:35:53.9474206Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9474594Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9474678Z     return self._execute_internal(
2025-07-05T16:35:53.9474750Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9475186Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9475336Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9475519Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9475973Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9476052Z     result = conn.execute(
2025-07-05T16:35:53.9476121Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9476513Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9476580Z     return meth(
2025-07-05T16:35:53.9476641Z            ^^^^^
2025-07-05T16:35:53.9477097Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9477203Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9477280Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9477730Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9477812Z     ret = self._execute_context(
2025-07-05T16:35:53.9477887Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9478308Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9478399Z     return self._exec_single_context(
2025-07-05T16:35:53.9478472Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9478912Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9479115Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9479576Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9479755Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9480198Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9480279Z     self.dialect.do_execute(
2025-07-05T16:35:53.9480686Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9480885Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9481174Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9481244Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9481311Z              ^
2025-07-05T16:35:53.9481316Z 
2025-07-05T16:35:53.9481662Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9481725Z FROM "user" 
2025-07-05T16:35:53.9481802Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9481923Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9482074Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9482615Z 2025-07-05 16:35:51 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9482695Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9482758Z              ^
2025-07-05T16:35:53.9482763Z 
2025-07-05T16:35:53.9483110Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9483179Z FROM "user" 
2025-07-05T16:35:53.9483260Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9483372Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9483526Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9483767Z 2025-07-05 16:35:51 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9484134Z 2025-07-05 16:35:51 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9484288Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9484373Z Traceback (most recent call last):
2025-07-05T16:35:53.9484832Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9484918Z     self.dialect.do_execute(
2025-07-05T16:35:53.9485323Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9485638Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9485814Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9485885Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9485946Z              ^
2025-07-05T16:35:53.9485951Z 
2025-07-05T16:35:53.9485955Z 
2025-07-05T16:35:53.9486125Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9486130Z 
2025-07-05T16:35:53.9486208Z Traceback (most recent call last):
2025-07-05T16:35:53.9486549Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9486631Z     yield session
2025-07-05T16:35:53.9487091Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9487191Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9487758Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9487826Z     raise e
2025-07-05T16:35:53.9488266Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9488354Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9488719Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9488819Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9489338Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9489430Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9489776Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9489864Z     response = await func(request)
2025-07-05T16:35:53.9489930Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9490268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9490368Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9490444Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9490861Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9490994Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9491081Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9491499Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9491611Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9491696Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9492041Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9492166Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9492248Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9492703Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9492778Z     return await future
2025-07-05T16:35:53.9492849Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9493222Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9493308Z     result = context.run(func, *args)
2025-07-05T16:35:53.9493382Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9493722Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9493904Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9493986Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9494338Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9494421Z     results = super().execute(
2025-07-05T16:35:53.9494490Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9494878Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9494964Z     return self._execute_internal(
2025-07-05T16:35:53.9495029Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9495580Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9495849Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9495929Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9496387Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9496466Z     result = conn.execute(
2025-07-05T16:35:53.9496538Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9496919Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9496988Z     return meth(
2025-07-05T16:35:53.9497157Z            ^^^^^
2025-07-05T16:35:53.9497613Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9497714Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9497791Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9498248Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9498328Z     ret = self._execute_context(
2025-07-05T16:35:53.9498401Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9498823Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9498907Z     return self._exec_single_context(
2025-07-05T16:35:53.9498981Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9499421Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9499509Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9499965Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9500147Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9500591Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9500669Z     self.dialect.do_execute(
2025-07-05T16:35:53.9501083Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9501189Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9501662Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9501796Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9501866Z              ^
2025-07-05T16:35:53.9501872Z 
2025-07-05T16:35:53.9502218Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9502280Z FROM "user" 
2025-07-05T16:35:53.9502368Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9502486Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9502634Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9502788Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9503136Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9503205Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9503266Z              ^
2025-07-05T16:35:53.9503270Z 
2025-07-05T16:35:53.9503615Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9503682Z FROM "user" 
2025-07-05T16:35:53.9503759Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9503875Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9504017Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9504378Z Traceback (most recent call last):
2025-07-05T16:35:53.9504845Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9504930Z     self.dialect.do_execute(
2025-07-05T16:35:53.9505435Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9505536Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9505697Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9505889Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9505956Z              ^
2025-07-05T16:35:53.9505960Z 
2025-07-05T16:35:53.9505964Z 
2025-07-05T16:35:53.9506128Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9506134Z 
2025-07-05T16:35:53.9506213Z Traceback (most recent call last):
2025-07-05T16:35:53.9506555Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9506629Z     yield session
2025-07-05T16:35:53.9507091Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9507195Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9507627Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9507698Z     raise e
2025-07-05T16:35:53.9508125Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9508223Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9508596Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9508690Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9509041Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9509135Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9509472Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9509560Z     response = await func(request)
2025-07-05T16:35:53.9509627Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9509955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9510060Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9510132Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9510544Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9510688Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9510764Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9511181Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9511299Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9511374Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9511718Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9511846Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9511926Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9512385Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9512464Z     return await future
2025-07-05T16:35:53.9512660Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9513032Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9513125Z     result = context.run(func, *args)
2025-07-05T16:35:53.9513193Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9513535Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9513707Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9513790Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9514224Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9514307Z     results = super().execute(
2025-07-05T16:35:53.9514373Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9514757Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9514843Z     return self._execute_internal(
2025-07-05T16:35:53.9514908Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9515337Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9515591Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9515670Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9516120Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9516203Z     result = conn.execute(
2025-07-05T16:35:53.9516268Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9516649Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9516724Z     return meth(
2025-07-05T16:35:53.9516786Z            ^^^^^
2025-07-05T16:35:53.9517244Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9517342Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9517415Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9517872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9517952Z     ret = self._execute_context(
2025-07-05T16:35:53.9518019Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9518450Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9518537Z     return self._exec_single_context(
2025-07-05T16:35:53.9518610Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9519053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9519135Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9519594Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9519771Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9520209Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9520297Z     self.dialect.do_execute(
2025-07-05T16:35:53.9520700Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9520797Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9521085Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9521273Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9521341Z              ^
2025-07-05T16:35:53.9521347Z 
2025-07-05T16:35:53.9521691Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9521754Z FROM "user" 
2025-07-05T16:35:53.9521831Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9521951Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9522099Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9522592Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9522769Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9522830Z              ^
2025-07-05T16:35:53.9522835Z 
2025-07-05T16:35:53.9523168Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9523244Z FROM "user" 
2025-07-05T16:35:53.9523318Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9523431Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9523573Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9523773Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9524093Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9524305Z _ ERROR at setup of TestErrorHandlingAndEdgeCases.test_large_payload_handling __
2025-07-05T16:35:53.9524458Z tests/test_high_impact_coverage.py:723: in setup_admin_user
2025-07-05T16:35:53.9524576Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9524653Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9524796Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9524947Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9525448Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9525575Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9525648Z              ^
2025-07-05T16:35:53.9525659Z 
2025-07-05T16:35:53.9526001Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9526069Z FROM "user" 
2025-07-05T16:35:53.9526146Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9526265Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9526409Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9526490Z Traceback (most recent call last):
2025-07-05T16:35:53.9526957Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9527043Z     self.dialect.do_execute(
2025-07-05T16:35:53.9527451Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9527546Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9527708Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9527775Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9527839Z              ^
2025-07-05T16:35:53.9527844Z 
2025-07-05T16:35:53.9527851Z 
2025-07-05T16:35:53.9528013Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9528019Z 
2025-07-05T16:35:53.9528099Z Traceback (most recent call last):
2025-07-05T16:35:53.9528436Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9528625Z     yield session
2025-07-05T16:35:53.9529091Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9529188Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9529622Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9529693Z     raise e
2025-07-05T16:35:53.9530120Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9530312Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9530680Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9530774Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9531135Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9531228Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9531563Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9531652Z     response = await func(request)
2025-07-05T16:35:53.9531720Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9532050Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9532154Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9532226Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9532644Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9532779Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9532855Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9533277Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9533392Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9533466Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9533812Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9533937Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9534011Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9534469Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9534547Z     return await future
2025-07-05T16:35:53.9534610Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9534981Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9535070Z     result = context.run(func, *args)
2025-07-05T16:35:53.9535137Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9535591Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9535766Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9535847Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9536202Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9536286Z     results = super().execute(
2025-07-05T16:35:53.9536352Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9536735Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9536936Z     return self._execute_internal(
2025-07-05T16:35:53.9537001Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9537435Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9537580Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9537661Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9538110Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9538187Z     result = conn.execute(
2025-07-05T16:35:53.9538354Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9538737Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9538804Z     return meth(
2025-07-05T16:35:53.9538864Z            ^^^^^
2025-07-05T16:35:53.9539319Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9539422Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9539498Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9539950Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9540030Z     ret = self._execute_context(
2025-07-05T16:35:53.9540100Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9540519Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9540607Z     return self._exec_single_context(
2025-07-05T16:35:53.9540679Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9541119Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9541205Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9541669Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9541846Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9542283Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9542368Z     self.dialect.do_execute(
2025-07-05T16:35:53.9542775Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9542877Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9543167Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9543238Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9543298Z              ^
2025-07-05T16:35:53.9543312Z 
2025-07-05T16:35:53.9543648Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9543712Z FROM "user" 
2025-07-05T16:35:53.9543788Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9543907Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9544050Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9544585Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9544662Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9544721Z              ^
2025-07-05T16:35:53.9544726Z 
2025-07-05T16:35:53.9545064Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9545216Z FROM "user" 
2025-07-05T16:35:53.9545291Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9545497Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9545642Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9545877Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9546239Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9546391Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9546579Z Traceback (most recent call last):
2025-07-05T16:35:53.9547033Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9547117Z     self.dialect.do_execute(
2025-07-05T16:35:53.9547521Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9547618Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9547782Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9547854Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9547914Z              ^
2025-07-05T16:35:53.9547919Z 
2025-07-05T16:35:53.9547923Z 
2025-07-05T16:35:53.9548087Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9548093Z 
2025-07-05T16:35:53.9548170Z Traceback (most recent call last):
2025-07-05T16:35:53.9548507Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9548583Z     yield session
2025-07-05T16:35:53.9549044Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9549141Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9549579Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9549644Z     raise e
2025-07-05T16:35:53.9550075Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9550162Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9550523Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9550620Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9550972Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9551057Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9551395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9551479Z     response = await func(request)
2025-07-05T16:35:53.9551549Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9551885Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9551983Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9552053Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9552469Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9552605Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9552684Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9553100Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9553211Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9553404Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9553749Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9553872Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9553952Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9554405Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9554480Z     return await future
2025-07-05T16:35:53.9554655Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9555024Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9555108Z     result = context.run(func, *args)
2025-07-05T16:35:53.9555182Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9555623Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9555796Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9555879Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9556230Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9556313Z     results = super().execute(
2025-07-05T16:35:53.9556380Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9556759Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9556848Z     return self._execute_internal(
2025-07-05T16:35:53.9556916Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9557341Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9557495Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9557575Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9558020Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9558103Z     result = conn.execute(
2025-07-05T16:35:53.9558169Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9558546Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9558620Z     return meth(
2025-07-05T16:35:53.9558679Z            ^^^^^
2025-07-05T16:35:53.9559134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9559236Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9559312Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9559764Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9559846Z     ret = self._execute_context(
2025-07-05T16:35:53.9559913Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9560333Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9560423Z     return self._exec_single_context(
2025-07-05T16:35:53.9560490Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9560937Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9561018Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9561502Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9561803Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9562243Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9562322Z     self.dialect.do_execute(
2025-07-05T16:35:53.9562732Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9562822Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9563112Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9563289Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9563350Z              ^
2025-07-05T16:35:53.9563356Z 
2025-07-05T16:35:53.9563698Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9563770Z FROM "user" 
2025-07-05T16:35:53.9563845Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9563960Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9564111Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9564264Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9564606Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9564678Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9564736Z              ^
2025-07-05T16:35:53.9564741Z 
2025-07-05T16:35:53.9565079Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9565144Z FROM "user" 
2025-07-05T16:35:53.9565221Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9565331Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9565696Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9565784Z Traceback (most recent call last):
2025-07-05T16:35:53.9566236Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9566316Z     self.dialect.do_execute(
2025-07-05T16:35:53.9566728Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9566820Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9566979Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9567055Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9567114Z              ^
2025-07-05T16:35:53.9567119Z 
2025-07-05T16:35:53.9567123Z 
2025-07-05T16:35:53.9567284Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9567293Z 
2025-07-05T16:35:53.9567371Z Traceback (most recent call last):
2025-07-05T16:35:53.9567712Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9567789Z     yield session
2025-07-05T16:35:53.9568249Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9568346Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9568780Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9568846Z     raise e
2025-07-05T16:35:53.9569277Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9569369Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9569732Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9569977Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9570329Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9570414Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9570755Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9570836Z     response = await func(request)
2025-07-05T16:35:53.9570905Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9571236Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9571448Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9571522Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9571946Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9572082Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9572159Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9572583Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9572695Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9572770Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9573117Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9573244Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9573321Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9573784Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9573862Z     return await future
2025-07-05T16:35:53.9573931Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9574295Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9574381Z     result = context.run(func, *args)
2025-07-05T16:35:53.9574453Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9574789Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9574959Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9575050Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9575509Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9575594Z     results = super().execute(
2025-07-05T16:35:53.9575667Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9576057Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9576141Z     return self._execute_internal(
2025-07-05T16:35:53.9576212Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9576635Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9576783Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9576867Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9577313Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9577400Z     result = conn.execute(
2025-07-05T16:35:53.9577466Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9577843Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9578034Z     return meth(
2025-07-05T16:35:53.9578095Z            ^^^^^
2025-07-05T16:35:53.9578551Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9578656Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9578728Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9579180Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9579263Z     ret = self._execute_context(
2025-07-05T16:35:53.9579432Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9579855Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9579948Z     return self._exec_single_context(
2025-07-05T16:35:53.9580016Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9580457Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9580544Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9580994Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9581178Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9581622Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9581707Z     self.dialect.do_execute(
2025-07-05T16:35:53.9582113Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9582205Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9582495Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9582572Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9582633Z              ^
2025-07-05T16:35:53.9582638Z 
2025-07-05T16:35:53.9582974Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9583040Z FROM "user" 
2025-07-05T16:35:53.9583115Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9583230Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9583377Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9583878Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9583946Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9584006Z              ^
2025-07-05T16:35:53.9584011Z 
2025-07-05T16:35:53.9584348Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9584414Z FROM "user" 
2025-07-05T16:35:53.9584489Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9584604Z [parameters: {'email_1': 'error_admin@example.com'}]
2025-07-05T16:35:53.9584744Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9584937Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9585262Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9585682Z _ ERROR at setup of TestConcurrencyAndAsyncOperations.test_concurrent_checklist_operations _
2025-07-05T16:35:53.9585823Z tests/test_high_impact_coverage.py:843: in setup_admin_user
2025-07-05T16:35:53.9585941Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9586020Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9586280Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9586428Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9586825Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9586893Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9586952Z              ^
2025-07-05T16:35:53.9586957Z 
2025-07-05T16:35:53.9587297Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9587463Z FROM "user" 
2025-07-05T16:35:53.9587539Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9587676Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9587819Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9587907Z Traceback (most recent call last):
2025-07-05T16:35:53.9588369Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9588450Z     self.dialect.do_execute(
2025-07-05T16:35:53.9588861Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9588960Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9589119Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9589186Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9589251Z              ^
2025-07-05T16:35:53.9589260Z 
2025-07-05T16:35:53.9589264Z 
2025-07-05T16:35:53.9589429Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9589434Z 
2025-07-05T16:35:53.9589514Z Traceback (most recent call last):
2025-07-05T16:35:53.9589856Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9589929Z     yield session
2025-07-05T16:35:53.9590395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9590499Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9590936Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9591010Z     raise e
2025-07-05T16:35:53.9591439Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9591534Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9591903Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9592000Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9592355Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9592447Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9592785Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9592872Z     response = await func(request)
2025-07-05T16:35:53.9592941Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9593271Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9593374Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9593452Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9593868Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9594008Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9594174Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9594596Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9594715Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9594789Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9595134Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9595265Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9595519Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9595983Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9596062Z     return await future
2025-07-05T16:35:53.9596127Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9596502Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9596592Z     result = context.run(func, *args)
2025-07-05T16:35:53.9596660Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9596997Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9597174Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9597260Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9597754Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9597880Z     results = super().execute(
2025-07-05T16:35:53.9597947Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9598338Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9598426Z     return self._execute_internal(
2025-07-05T16:35:53.9598492Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9598923Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9599068Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9599147Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9599600Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9599682Z     result = conn.execute(
2025-07-05T16:35:53.9599747Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9600132Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9600199Z     return meth(
2025-07-05T16:35:53.9600262Z            ^^^^^
2025-07-05T16:35:53.9600716Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9600818Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9600889Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9601347Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9601429Z     ret = self._execute_context(
2025-07-05T16:35:53.9601496Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9601926Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9602012Z     return self._exec_single_context(
2025-07-05T16:35:53.9602085Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9602527Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9602749Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9603208Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9603385Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9603824Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9603909Z     self.dialect.do_execute(
2025-07-05T16:35:53.9604418Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9604516Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9604806Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9604879Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9604939Z              ^
2025-07-05T16:35:53.9604944Z 
2025-07-05T16:35:53.9605290Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9605517Z FROM "user" 
2025-07-05T16:35:53.9605651Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9605873Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9606063Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9606601Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9606683Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9606743Z              ^
2025-07-05T16:35:53.9606748Z 
2025-07-05T16:35:53.9607087Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9607159Z FROM "user" 
2025-07-05T16:35:53.9607234Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9607360Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9607499Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9607742Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9608105Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9608293Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9608444Z Traceback (most recent call last):
2025-07-05T16:35:53.9609091Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9609249Z     self.dialect.do_execute(
2025-07-05T16:35:53.9609683Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9609778Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9609945Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9610013Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9610073Z              ^
2025-07-05T16:35:53.9610078Z 
2025-07-05T16:35:53.9610083Z 
2025-07-05T16:35:53.9610254Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9610259Z 
2025-07-05T16:35:53.9610345Z Traceback (most recent call last):
2025-07-05T16:35:53.9610699Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9610774Z     yield session
2025-07-05T16:35:53.9611250Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9611500Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9611952Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9612021Z     raise e
2025-07-05T16:35:53.9612452Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9612547Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9612909Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9613119Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9613473Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9613559Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9613907Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9613988Z     response = await func(request)
2025-07-05T16:35:53.9614057Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9614392Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9614490Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9614562Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9614987Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9615123Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9615201Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9615840Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9615967Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9616046Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9616398Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9616521Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9616603Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9617062Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9617142Z     return await future
2025-07-05T16:35:53.9617213Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9617580Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9617665Z     result = context.run(func, *args)
2025-07-05T16:35:53.9617742Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9618084Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9618258Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9618348Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9618700Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9618779Z     results = super().execute(
2025-07-05T16:35:53.9618853Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9619240Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9619327Z     return self._execute_internal(
2025-07-05T16:35:53.9619394Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9619818Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9620130Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9620213Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9620662Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9620744Z     result = conn.execute(
2025-07-05T16:35:53.9620810Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9621188Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9621367Z     return meth(
2025-07-05T16:35:53.9621430Z            ^^^^^
2025-07-05T16:35:53.9621891Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9622003Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9622078Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9622529Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9622616Z     ret = self._execute_context(
2025-07-05T16:35:53.9622682Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9623102Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9623192Z     return self._exec_single_context(
2025-07-05T16:35:53.9623263Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9623705Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9623793Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9624245Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9624431Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9624872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9624952Z     self.dialect.do_execute(
2025-07-05T16:35:53.9625472Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9625569Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9625864Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9625937Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9625998Z              ^
2025-07-05T16:35:53.9626003Z 
2025-07-05T16:35:53.9626345Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9626420Z FROM "user" 
2025-07-05T16:35:53.9626498Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9626627Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9626781Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9626931Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9627275Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9627343Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9627413Z              ^
2025-07-05T16:35:53.9627418Z 
2025-07-05T16:35:53.9627752Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9627815Z FROM "user" 
2025-07-05T16:35:53.9627897Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9628139Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9628281Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9628368Z Traceback (most recent call last):
2025-07-05T16:35:53.9628822Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9628902Z     self.dialect.do_execute(
2025-07-05T16:35:53.9629320Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9629414Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9629678Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9629750Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9629811Z              ^
2025-07-05T16:35:53.9629816Z 
2025-07-05T16:35:53.9629820Z 
2025-07-05T16:35:53.9629984Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9629994Z 
2025-07-05T16:35:53.9630079Z Traceback (most recent call last):
2025-07-05T16:35:53.9630411Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9630478Z     yield session
2025-07-05T16:35:53.9630963Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9631061Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9631501Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9631571Z     raise e
2025-07-05T16:35:53.9632006Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9632103Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9632463Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9632564Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9632916Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9633002Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9633345Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9633426Z     response = await func(request)
2025-07-05T16:35:53.9633492Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9633829Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9633926Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9633998Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9634417Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9634552Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9634632Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9635059Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9635170Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9635246Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9635699Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9635830Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9635906Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9636367Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9636558Z     return await future
2025-07-05T16:35:53.9636624Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9636999Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9637083Z     result = context.run(func, *args)
2025-07-05T16:35:53.9637158Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9637496Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9637666Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9637856Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9638205Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9638285Z     results = super().execute(
2025-07-05T16:35:53.9638361Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9638744Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9638827Z     return self._execute_internal(
2025-07-05T16:35:53.9638898Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9639324Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9639470Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9639557Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9640010Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9640088Z     result = conn.execute(
2025-07-05T16:35:53.9640158Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9640541Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9640608Z     return meth(
2025-07-05T16:35:53.9640677Z            ^^^^^
2025-07-05T16:35:53.9641128Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9641231Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9641308Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9641767Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9641856Z     ret = self._execute_context(
2025-07-05T16:35:53.9641925Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9642344Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9642439Z     return self._exec_single_context(
2025-07-05T16:35:53.9642506Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9642946Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9643033Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9643485Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9643663Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9644106Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9644190Z     self.dialect.do_execute(
2025-07-05T16:35:53.9644600Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9644777Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9645068Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9645140Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9645200Z              ^
2025-07-05T16:35:53.9645205Z 
2025-07-05T16:35:53.9645759Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9645828Z FROM "user" 
2025-07-05T16:35:53.9645914Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9646043Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9646317Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9646815Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9646884Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9646951Z              ^
2025-07-05T16:35:53.9646956Z 
2025-07-05T16:35:53.9647296Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9647360Z FROM "user" 
2025-07-05T16:35:53.9647435Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9647563Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9647706Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9647900Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9648222Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9648465Z _ ERROR at setup of TestConcurrencyAndAsyncOperations.test_file_upload_concurrency _
2025-07-05T16:35:53.9648605Z tests/test_high_impact_coverage.py:843: in setup_admin_user
2025-07-05T16:35:53.9648717Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9648805Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9648949Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9649098Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9649496Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9649564Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9649625Z              ^
2025-07-05T16:35:53.9649630Z 
2025-07-05T16:35:53.9649973Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9650044Z FROM "user" 
2025-07-05T16:35:53.9650119Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9650248Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9650394Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9650475Z Traceback (most recent call last):
2025-07-05T16:35:53.9650941Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9651024Z     self.dialect.do_execute(
2025-07-05T16:35:53.9651434Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9651534Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9651692Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9651767Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9651831Z              ^
2025-07-05T16:35:53.9651836Z 
2025-07-05T16:35:53.9651840Z 
2025-07-05T16:35:53.9652004Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9652009Z 
2025-07-05T16:35:53.9652088Z Traceback (most recent call last):
2025-07-05T16:35:53.9652577Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9652646Z     yield session
2025-07-05T16:35:53.9653116Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9653219Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9653652Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9653725Z     raise e
2025-07-05T16:35:53.9654154Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9654323Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9654692Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9654793Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9655143Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9655238Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9655760Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9655849Z     response = await func(request)
2025-07-05T16:35:53.9655921Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9656256Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9656360Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9656439Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9656852Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9656996Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9657073Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9657495Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9657614Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9657696Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9658042Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9658177Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9658253Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9658709Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9658792Z     return await future
2025-07-05T16:35:53.9658856Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9659232Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9659322Z     result = context.run(func, *args)
2025-07-05T16:35:53.9659391Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9659734Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9659914Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9659998Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9660356Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9660441Z     results = super().execute(
2025-07-05T16:35:53.9660508Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9661022Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9661105Z     return self._execute_internal(
2025-07-05T16:35:53.9661172Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9661633Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9661780Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9661861Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9662313Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9662498Z     result = conn.execute(
2025-07-05T16:35:53.9662564Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9662954Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9663033Z     return meth(
2025-07-05T16:35:53.9663094Z            ^^^^^
2025-07-05T16:35:53.9663552Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9663650Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9663723Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9664179Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9664259Z     ret = self._execute_context(
2025-07-05T16:35:53.9664328Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9664759Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9664844Z     return self._exec_single_context(
2025-07-05T16:35:53.9664913Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9665468Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9665553Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9666014Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9666194Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9666632Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9666721Z     self.dialect.do_execute(
2025-07-05T16:35:53.9667129Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9667221Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9667513Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9667589Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9667648Z              ^
2025-07-05T16:35:53.9667653Z 
2025-07-05T16:35:53.9667998Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9668063Z FROM "user" 
2025-07-05T16:35:53.9668142Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9668278Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9668425Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9668974Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9669049Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9669109Z              ^
2025-07-05T16:35:53.9669114Z 
2025-07-05T16:35:53.9669569Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9669640Z FROM "user" 
2025-07-05T16:35:53.9669717Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9669841Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9669981Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9670221Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9670585Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9670837Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9670924Z Traceback (most recent call last):
2025-07-05T16:35:53.9671378Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9671464Z     self.dialect.do_execute(
2025-07-05T16:35:53.9671882Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9671975Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9672139Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9672207Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9672267Z              ^
2025-07-05T16:35:53.9672272Z 
2025-07-05T16:35:53.9672275Z 
2025-07-05T16:35:53.9672438Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9672453Z 
2025-07-05T16:35:53.9672532Z Traceback (most recent call last):
2025-07-05T16:35:53.9672865Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9672937Z     yield session
2025-07-05T16:35:53.9673408Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9673511Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9673949Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9674017Z     raise e
2025-07-05T16:35:53.9674447Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9674542Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9674907Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9675010Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9675462Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9675556Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9675899Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9675981Z     response = await func(request)
2025-07-05T16:35:53.9676047Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9676383Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9676480Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9676552Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9676979Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9677109Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9677186Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9677607Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9677842Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9677917Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9678269Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9678392Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9678471Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9678929Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9679106Z     return await future
2025-07-05T16:35:53.9679176Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9679549Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9679640Z     result = context.run(func, *args)
2025-07-05T16:35:53.9679714Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9680054Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9680226Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9680322Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9680674Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9680759Z     results = super().execute(
2025-07-05T16:35:53.9680832Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9681214Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9681298Z     return self._execute_internal(
2025-07-05T16:35:53.9681378Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9681804Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9681951Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9682039Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9682486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9682572Z     result = conn.execute(
2025-07-05T16:35:53.9682637Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9683018Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9683093Z     return meth(
2025-07-05T16:35:53.9683154Z            ^^^^^
2025-07-05T16:35:53.9683611Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9683722Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9683796Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9684250Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9684339Z     ret = self._execute_context(
2025-07-05T16:35:53.9684408Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9684828Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9684930Z     return self._exec_single_context(
2025-07-05T16:35:53.9685001Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9685549Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9685641Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9686249Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9686435Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9686874Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9686956Z     self.dialect.do_execute(
2025-07-05T16:35:53.9687365Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9687560Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9687848Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9687922Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9687982Z              ^
2025-07-05T16:35:53.9687988Z 
2025-07-05T16:35:53.9688332Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9688403Z FROM "user" 
2025-07-05T16:35:53.9688480Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9688609Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9688756Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9688916Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9689259Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9689331Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9689397Z              ^
2025-07-05T16:35:53.9689402Z 
2025-07-05T16:35:53.9689734Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9689806Z FROM "user" 
2025-07-05T16:35:53.9689890Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9690017Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9690159Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9690245Z Traceback (most recent call last):
2025-07-05T16:35:53.9690698Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9690777Z     self.dialect.do_execute(
2025-07-05T16:35:53.9691190Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9691284Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9691446Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9691520Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9691581Z              ^
2025-07-05T16:35:53.9691586Z 
2025-07-05T16:35:53.9691596Z 
2025-07-05T16:35:53.9691761Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9691766Z 
2025-07-05T16:35:53.9691855Z Traceback (most recent call last):
2025-07-05T16:35:53.9692191Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9692260Z     yield session
2025-07-05T16:35:53.9692727Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9692826Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9693265Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9693336Z     raise e
2025-07-05T16:35:53.9693768Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9693951Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9694317Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9694413Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9694769Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9694856Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9695200Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9695282Z     response = await func(request)
2025-07-05T16:35:53.9695612Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9695964Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9696066Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9696138Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9696571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9696705Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9696782Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9697208Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9697323Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9697399Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9697762Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9697888Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9697964Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9698438Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9698518Z     return await future
2025-07-05T16:35:53.9698583Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9698955Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9699041Z     result = context.run(func, *args)
2025-07-05T16:35:53.9699110Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9699455Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9699635Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9699718Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9700078Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9700168Z     results = super().execute(
2025-07-05T16:35:53.9700241Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9700626Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9700711Z     return self._execute_internal(
2025-07-05T16:35:53.9700787Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9701213Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9701362Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9701455Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9701900Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9701976Z     result = conn.execute(
2025-07-05T16:35:53.9702179Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9702560Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9702628Z     return meth(
2025-07-05T16:35:53.9702697Z            ^^^^^
2025-07-05T16:35:53.9703156Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9703257Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9703336Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9703790Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9703985Z     ret = self._execute_context(
2025-07-05T16:35:53.9704056Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9704480Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9704575Z     return self._exec_single_context(
2025-07-05T16:35:53.9704643Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9705087Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9705175Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9705738Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9705919Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9706499Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9706601Z     self.dialect.do_execute(
2025-07-05T16:35:53.9707011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9707116Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9707404Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9707472Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9707538Z              ^
2025-07-05T16:35:53.9707544Z 
2025-07-05T16:35:53.9707883Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9707946Z FROM "user" 
2025-07-05T16:35:53.9708028Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9708163Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9708311Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9708808Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9708882Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9708942Z              ^
2025-07-05T16:35:53.9708947Z 
2025-07-05T16:35:53.9709287Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9709350Z FROM "user" 
2025-07-05T16:35:53.9709426Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9709557Z [parameters: {'email_1': 'concurrent_admin@example.com'}]
2025-07-05T16:35:53.9709701Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9709897Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9710223Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9710431Z ___ ERROR at setup of TestESGWorkflowIntegration.test_complete_esg_workflow ____
2025-07-05T16:35:53.9710550Z tests/test_integration_api.py:31: in setup_test_data
2025-07-05T16:35:53.9710794Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9710880Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9711024Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9711172Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9711573Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9711647Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9711708Z              ^
2025-07-05T16:35:53.9711819Z 
2025-07-05T16:35:53.9712167Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9712230Z FROM "user" 
2025-07-05T16:35:53.9712307Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9712408Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9712562Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9712644Z Traceback (most recent call last):
2025-07-05T16:35:53.9713101Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9713192Z     self.dialect.do_execute(
2025-07-05T16:35:53.9713602Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9713700Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9713865Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9713934Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9713996Z              ^
2025-07-05T16:35:53.9714007Z 
2025-07-05T16:35:53.9714011Z 
2025-07-05T16:35:53.9714176Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9714186Z 
2025-07-05T16:35:53.9714267Z Traceback (most recent call last):
2025-07-05T16:35:53.9714609Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9714677Z     yield session
2025-07-05T16:35:53.9715141Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9715246Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9715788Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9715863Z     raise e
2025-07-05T16:35:53.9716303Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9716394Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9716769Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9716869Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9717218Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9717314Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9717653Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9717736Z     response = await func(request)
2025-07-05T16:35:53.9717810Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9718142Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9718244Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9718322Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9718736Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9718991Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9719076Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9719493Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9719614Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9719691Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9720040Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9720275Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9720353Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9720815Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9720904Z     return await future
2025-07-05T16:35:53.9720970Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9721339Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9721431Z     result = context.run(func, *args)
2025-07-05T16:35:53.9721501Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9721841Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9722022Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9722109Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9722456Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9722544Z     results = super().execute(
2025-07-05T16:35:53.9722615Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9722998Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9723086Z     return self._execute_internal(
2025-07-05T16:35:53.9723152Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9723578Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9723731Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9723810Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9724271Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9724349Z     result = conn.execute(
2025-07-05T16:35:53.9724415Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9724798Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9724870Z     return meth(
2025-07-05T16:35:53.9724934Z            ^^^^^
2025-07-05T16:35:53.9725546Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9725683Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9725758Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9726226Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9726315Z     ret = self._execute_context(
2025-07-05T16:35:53.9726381Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9726809Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9726893Z     return self._exec_single_context(
2025-07-05T16:35:53.9727083Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9727536Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9727619Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9728075Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9728253Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9728695Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9728920Z     self.dialect.do_execute(
2025-07-05T16:35:53.9729331Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9729423Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9729721Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9729790Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9729850Z              ^
2025-07-05T16:35:53.9729855Z 
2025-07-05T16:35:53.9730202Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9730267Z FROM "user" 
2025-07-05T16:35:53.9730346Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9730453Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9730602Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9731144Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9731219Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9731280Z              ^
2025-07-05T16:35:53.9731289Z 
2025-07-05T16:35:53.9731625Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9731689Z FROM "user" 
2025-07-05T16:35:53.9731771Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9731870Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9732013Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9732256Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9732621Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9732775Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9732864Z Traceback (most recent call last):
2025-07-05T16:35:53.9733314Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9733399Z     self.dialect.do_execute(
2025-07-05T16:35:53.9733813Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9733906Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9734067Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9734142Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9734204Z              ^
2025-07-05T16:35:53.9734209Z 
2025-07-05T16:35:53.9734213Z 
2025-07-05T16:35:53.9734383Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9734389Z 
2025-07-05T16:35:53.9734478Z Traceback (most recent call last):
2025-07-05T16:35:53.9734812Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9734879Z     yield session
2025-07-05T16:35:53.9735614Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9735720Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9736162Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9736230Z     raise e
2025-07-05T16:35:53.9736660Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9736756Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9737238Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9737335Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9737688Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9737782Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9738129Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9738213Z     response = await func(request)
2025-07-05T16:35:53.9738280Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9738616Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9738713Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9738787Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9739215Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9739347Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9739427Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9739856Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9739969Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9740047Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9740400Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9740524Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9740600Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9741064Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9741140Z     return await future
2025-07-05T16:35:53.9741205Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9741578Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9741691Z     result = context.run(func, *args)
2025-07-05T16:35:53.9741776Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9742121Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9742293Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9742384Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9742735Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9742821Z     results = super().execute(
2025-07-05T16:35:53.9742897Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9743281Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9743364Z     return self._execute_internal(
2025-07-05T16:35:53.9743554Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9743984Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9744129Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9744215Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9744660Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9744736Z     result = conn.execute(
2025-07-05T16:35:53.9744921Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9745301Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9745474Z     return meth(
2025-07-05T16:35:53.9745537Z            ^^^^^
2025-07-05T16:35:53.9745992Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9746102Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9746175Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9746627Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9746718Z     ret = self._execute_context(
2025-07-05T16:35:53.9746786Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9747204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9747297Z     return self._exec_single_context(
2025-07-05T16:35:53.9747364Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9747807Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9747899Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9748350Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9748526Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9748967Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9749045Z     self.dialect.do_execute(
2025-07-05T16:35:53.9749458Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9749554Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9749841Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9749914Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9749975Z              ^
2025-07-05T16:35:53.9749985Z 
2025-07-05T16:35:53.9750324Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9750392Z FROM "user" 
2025-07-05T16:35:53.9750470Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9750571Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9750719Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9750874Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9751219Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9751292Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9751359Z              ^
2025-07-05T16:35:53.9751364Z 
2025-07-05T16:35:53.9751707Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9751889Z FROM "user" 
2025-07-05T16:35:53.9751976Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9752075Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9752218Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9752301Z Traceback (most recent call last):
2025-07-05T16:35:53.9752759Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9752839Z     self.dialect.do_execute(
2025-07-05T16:35:53.9753254Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9753451Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9753611Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9753684Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9753745Z              ^
2025-07-05T16:35:53.9753750Z 
2025-07-05T16:35:53.9753758Z 
2025-07-05T16:35:53.9753921Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9753927Z 
2025-07-05T16:35:53.9754013Z Traceback (most recent call last):
2025-07-05T16:35:53.9754347Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9754414Z     yield session
2025-07-05T16:35:53.9754882Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9754979Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9755515Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9755589Z     raise e
2025-07-05T16:35:53.9756017Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9756116Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9756480Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9756575Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9756928Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9757016Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9757353Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9757449Z     response = await func(request)
2025-07-05T16:35:53.9757515Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9757852Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9757958Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9758039Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9761786Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9761985Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9762067Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9762548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9762677Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9762764Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9763135Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9763264Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9763342Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9763984Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9764063Z     return await future
2025-07-05T16:35:53.9764128Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9764534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9764626Z     result = context.run(func, *args)
2025-07-05T16:35:53.9764695Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9765055Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9765490Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9765582Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9765986Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9766077Z     results = super().execute(
2025-07-05T16:35:53.9766145Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9766546Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9766631Z     return self._execute_internal(
2025-07-05T16:35:53.9766697Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9767135Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9767292Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9767374Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9767830Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9767915Z     result = conn.execute(
2025-07-05T16:35:53.9767986Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9768365Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9768434Z     return meth(
2025-07-05T16:35:53.9768504Z            ^^^^^
2025-07-05T16:35:53.9768961Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9769065Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9769147Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9769601Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9769683Z     ret = self._execute_context(
2025-07-05T16:35:53.9769755Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9770176Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9770269Z     return self._exec_single_context(
2025-07-05T16:35:53.9770344Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9770784Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9770868Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9771327Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9771508Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9771965Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9772046Z     self.dialect.do_execute(
2025-07-05T16:35:53.9772455Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9772676Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9772970Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9773041Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9773108Z              ^
2025-07-05T16:35:53.9773114Z 
2025-07-05T16:35:53.9773461Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9773526Z FROM "user" 
2025-07-05T16:35:53.9773608Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9773814Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9773971Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9774465Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9774550Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9774611Z              ^
2025-07-05T16:35:53.9774616Z 
2025-07-05T16:35:53.9774954Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9775024Z FROM "user" 
2025-07-05T16:35:53.9775107Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9775210Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9775497Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9775769Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9776108Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9776311Z _______ ERROR at setup of TestESGWorkflowIntegration.test_auth_workflow ________
2025-07-05T16:35:53.9776435Z tests/test_integration_api.py:31: in setup_test_data
2025-07-05T16:35:53.9776552Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9776636Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9776779Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9776929Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9777327Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9777402Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9777463Z              ^
2025-07-05T16:35:53.9777472Z 
2025-07-05T16:35:53.9777817Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9777888Z FROM "user" 
2025-07-05T16:35:53.9777965Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9778065Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9778222Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9778309Z Traceback (most recent call last):
2025-07-05T16:35:53.9778781Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9778869Z     self.dialect.do_execute(
2025-07-05T16:35:53.9779285Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9779380Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9779554Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9779622Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9779683Z              ^
2025-07-05T16:35:53.9779688Z 
2025-07-05T16:35:53.9779692Z 
2025-07-05T16:35:53.9779861Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9779993Z 
2025-07-05T16:35:53.9780077Z Traceback (most recent call last):
2025-07-05T16:35:53.9780420Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9780495Z     yield session
2025-07-05T16:35:53.9780959Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9781066Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9781500Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9781676Z     raise e
2025-07-05T16:35:53.9782109Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9782201Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9782628Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9782804Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9783346Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9783482Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9784002Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9784138Z     response = await func(request)
2025-07-05T16:35:53.9784255Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9784812Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9784982Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9785103Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9785960Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9786207Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9786339Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9787047Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9787239Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9787363Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9787916Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9788123Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9788255Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9789054Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9789208Z     return await future
2025-07-05T16:35:53.9789335Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9789997Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9790169Z     result = context.run(func, *args)
2025-07-05T16:35:53.9790291Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9790880Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9791196Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9791355Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9791992Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9792153Z     results = super().execute(
2025-07-05T16:35:53.9792509Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9793232Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9793407Z     return self._execute_internal(
2025-07-05T16:35:53.9793515Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9794291Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9794580Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9794718Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9795975Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9796157Z     result = conn.execute(
2025-07-05T16:35:53.9796274Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9797002Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9797166Z     return meth(
2025-07-05T16:35:53.9797281Z            ^^^^^
2025-07-05T16:35:53.9798135Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9798359Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9798487Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9799352Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9799534Z     ret = self._execute_context(
2025-07-05T16:35:53.9799657Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9800469Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9800649Z     return self._exec_single_context(
2025-07-05T16:35:53.9800788Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9801631Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9801795Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9802630Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9802967Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9803780Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9803940Z     self.dialect.do_execute(
2025-07-05T16:35:53.9804695Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9804864Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9805626Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9805762Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9805867Z              ^
2025-07-05T16:35:53.9805876Z 
2025-07-05T16:35:53.9806488Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9806611Z FROM "user" 
2025-07-05T16:35:53.9806747Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9806927Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9807201Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9808175Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9808306Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9808419Z              ^
2025-07-05T16:35:53.9808656Z 
2025-07-05T16:35:53.9809276Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9809386Z FROM "user" 
2025-07-05T16:35:53.9809521Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9809742Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9810017Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9810456Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9811106Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9811615Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9811773Z Traceback (most recent call last):
2025-07-05T16:35:53.9812695Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9812868Z     self.dialect.do_execute(
2025-07-05T16:35:53.9813639Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9813835Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9814137Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9814281Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9814395Z              ^
2025-07-05T16:35:53.9814405Z 
2025-07-05T16:35:53.9814413Z 
2025-07-05T16:35:53.9814734Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9814749Z 
2025-07-05T16:35:53.9814907Z Traceback (most recent call last):
2025-07-05T16:35:53.9815735Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9815878Z     yield session
2025-07-05T16:35:53.9816761Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9816961Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9817757Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9817907Z     raise e
2025-07-05T16:35:53.9818679Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9818863Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9819551Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9819743Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9820408Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9820594Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9821240Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9821406Z     response = await func(request)
2025-07-05T16:35:53.9821527Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9822260Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9822483Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9822619Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9823428Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9823704Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9823846Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9824896Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9825129Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9825258Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9826120Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9826359Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9826487Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9827569Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9827708Z     return await future
2025-07-05T16:35:53.9827816Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9828504Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9828677Z     result = context.run(func, *args)
2025-07-05T16:35:53.9828796Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9829422Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9829755Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9829912Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9830612Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9830779Z     results = super().execute(
2025-07-05T16:35:53.9830898Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9831630Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9831783Z     return self._execute_internal(
2025-07-05T16:35:53.9831910Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9832720Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9832994Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9833145Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9833980Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9834165Z     result = conn.execute(
2025-07-05T16:35:53.9834294Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9835031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9835176Z     return meth(
2025-07-05T16:35:53.9835283Z            ^^^^^
2025-07-05T16:35:53.9836343Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9836573Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9836709Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9837602Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9837772Z     ret = self._execute_context(
2025-07-05T16:35:53.9837897Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9838705Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9838877Z     return self._exec_single_context(
2025-07-05T16:35:53.9839001Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9839848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9840277Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9841172Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9841538Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9842385Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9842552Z     self.dialect.do_execute(
2025-07-05T16:35:53.9843300Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9843787Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9844321Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9844448Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9844554Z              ^
2025-07-05T16:35:53.9844573Z 
2025-07-05T16:35:53.9845186Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9845306Z FROM "user" 
2025-07-05T16:35:53.9845643Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9845831Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9846109Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9846378Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9846996Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9847142Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9847246Z              ^
2025-07-05T16:35:53.9847254Z 
2025-07-05T16:35:53.9847875Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9848001Z FROM "user" 
2025-07-05T16:35:53.9848141Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9848327Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9848606Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9848760Z Traceback (most recent call last):
2025-07-05T16:35:53.9849604Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9849786Z     self.dialect.do_execute(
2025-07-05T16:35:53.9850549Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9850748Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9851055Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9851182Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9851287Z              ^
2025-07-05T16:35:53.9851296Z 
2025-07-05T16:35:53.9851313Z 
2025-07-05T16:35:53.9851628Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9851639Z 
2025-07-05T16:35:53.9851787Z Traceback (most recent call last):
2025-07-05T16:35:53.9852407Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9852549Z     yield session
2025-07-05T16:35:53.9853411Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9853611Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9854570Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9854718Z     raise e
2025-07-05T16:35:53.9855716Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9856047Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9856450Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9856555Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9856944Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9857039Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9857403Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9857598Z     response = await func(request)
2025-07-05T16:35:53.9857667Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9858011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9858115Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9858193Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9858634Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9858779Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9858863Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9859302Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9859418Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9859501Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9859853Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9859981Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9860064Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9860533Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9860608Z     return await future
2025-07-05T16:35:53.9860680Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9861063Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9861153Z     result = context.run(func, *args)
2025-07-05T16:35:53.9861229Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9861624Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9861808Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9861899Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9862264Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9862361Z     results = super().execute(
2025-07-05T16:35:53.9862429Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9863211Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9863383Z     return self._execute_internal(
2025-07-05T16:35:53.9863507Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9864294Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9864601Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9864752Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9865779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9866188Z     result = conn.execute(
2025-07-05T16:35:53.9866312Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9867048Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9867191Z     return meth(
2025-07-05T16:35:53.9867300Z            ^^^^^
2025-07-05T16:35:53.9868149Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9868348Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9868475Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9869526Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9869684Z     ret = self._execute_context(
2025-07-05T16:35:53.9869796Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9870590Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9870768Z     return self._exec_single_context(
2025-07-05T16:35:53.9870883Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9871695Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9871852Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9872680Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9873023Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9873843Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9873982Z     self.dialect.do_execute(
2025-07-05T16:35:53.9874706Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9874882Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9875589Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9875728Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9875833Z              ^
2025-07-05T16:35:53.9875843Z 
2025-07-05T16:35:53.9876453Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9876571Z FROM "user" 
2025-07-05T16:35:53.9876704Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9876894Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9877163Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9878066Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9878197Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9878306Z              ^
2025-07-05T16:35:53.9878314Z 
2025-07-05T16:35:53.9878918Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9879032Z FROM "user" 
2025-07-05T16:35:53.9879171Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9879365Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9879628Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9879976Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9880582Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9880954Z _______ ERROR at setup of TestESGWorkflowIntegration.test_error_handling _______
2025-07-05T16:35:53.9881185Z tests/test_integration_api.py:31: in setup_test_data
2025-07-05T16:35:53.9881679Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9881834Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9882095Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9882378Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9883098Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9883215Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9883283Z              ^
2025-07-05T16:35:53.9883449Z 
2025-07-05T16:35:53.9883822Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9883901Z FROM "user" 
2025-07-05T16:35:53.9883983Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9884090Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9884264Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9884351Z Traceback (most recent call last):
2025-07-05T16:35:53.9884842Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9884938Z     self.dialect.do_execute(
2025-07-05T16:35:53.9885580Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9885703Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9885883Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9885955Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9886016Z              ^
2025-07-05T16:35:53.9886022Z 
2025-07-05T16:35:53.9886028Z 
2025-07-05T16:35:53.9886204Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9886213Z 
2025-07-05T16:35:53.9886298Z Traceback (most recent call last):
2025-07-05T16:35:53.9886644Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9886721Z     yield session
2025-07-05T16:35:53.9887192Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9887299Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9887754Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9887827Z     raise e
2025-07-05T16:35:53.9888273Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9888366Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9888737Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9888845Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9889221Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9889312Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9889664Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9889750Z     response = await func(request)
2025-07-05T16:35:53.9889817Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9890158Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9890258Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9890329Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9890751Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9891017Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9891100Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9891520Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9891634Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9891714Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9892065Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9892296Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9892377Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9892840Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9892923Z     return await future
2025-07-05T16:35:53.9892995Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9893365Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9893453Z     result = context.run(func, *args)
2025-07-05T16:35:53.9893527Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9893870Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9894048Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9894144Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9894498Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9894585Z     results = super().execute(
2025-07-05T16:35:53.9894658Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9895050Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9895142Z     return self._execute_internal(
2025-07-05T16:35:53.9895207Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9895861Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9896024Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9896105Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9896561Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9896648Z     result = conn.execute(
2025-07-05T16:35:53.9896715Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9897093Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9897173Z     return meth(
2025-07-05T16:35:53.9897233Z            ^^^^^
2025-07-05T16:35:53.9897689Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9897798Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9897869Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9898317Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9898413Z     ret = self._execute_context(
2025-07-05T16:35:53.9898479Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9898897Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9898990Z     return self._exec_single_context(
2025-07-05T16:35:53.9899187Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9899635Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9899718Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9900168Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9900355Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9900795Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9900978Z     self.dialect.do_execute(
2025-07-05T16:35:53.9901395Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9901489Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9901786Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9901866Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9901928Z              ^
2025-07-05T16:35:53.9901933Z 
2025-07-05T16:35:53.9902278Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9902348Z FROM "user" 
2025-07-05T16:35:53.9902425Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9902526Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9902683Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9903230Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9903300Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9903366Z              ^
2025-07-05T16:35:53.9903375Z 
2025-07-05T16:35:53.9903713Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9903779Z FROM "user" 
2025-07-05T16:35:53.9903861Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9903959Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9904102Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9904340Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9904721Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9904879Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9904962Z Traceback (most recent call last):
2025-07-05T16:35:53.9905638Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9905731Z     self.dialect.do_execute(
2025-07-05T16:35:53.9906150Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9906242Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9906408Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9906483Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9906547Z              ^
2025-07-05T16:35:53.9906553Z 
2025-07-05T16:35:53.9906557Z 
2025-07-05T16:35:53.9906728Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9906734Z 
2025-07-05T16:35:53.9906821Z Traceback (most recent call last):
2025-07-05T16:35:53.9907157Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9907226Z     yield session
2025-07-05T16:35:53.9907821Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9907922Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9908357Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9908430Z     raise e
2025-07-05T16:35:53.9908857Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9908948Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9909423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9909519Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9909873Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9909965Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9910299Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9910387Z     response = await func(request)
2025-07-05T16:35:53.9910453Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9910780Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9910882Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9910956Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9911376Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9911515Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9911592Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9912011Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9912128Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9912202Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9912558Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9912683Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9912760Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9913226Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9913300Z     return await future
2025-07-05T16:35:53.9913368Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9913742Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9913832Z     result = context.run(func, *args)
2025-07-05T16:35:53.9913901Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9914241Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9914414Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9914499Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9914851Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9914935Z     results = super().execute(
2025-07-05T16:35:53.9915000Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9915577Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9915667Z     return self._execute_internal(
2025-07-05T16:35:53.9915857Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9916298Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9916445Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9916526Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9916976Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9917057Z     result = conn.execute(
2025-07-05T16:35:53.9917235Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9917617Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9917685Z     return meth(
2025-07-05T16:35:53.9917755Z            ^^^^^
2025-07-05T16:35:53.9918214Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9918318Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9918413Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9918866Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9918947Z     ret = self._execute_context(
2025-07-05T16:35:53.9919019Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9919440Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9919531Z     return self._exec_single_context(
2025-07-05T16:35:53.9919607Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9920044Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9920135Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9920592Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9920771Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9921217Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9921299Z     self.dialect.do_execute(
2025-07-05T16:35:53.9921703Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9921806Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9922105Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9922176Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9922244Z              ^
2025-07-05T16:35:53.9922255Z 
2025-07-05T16:35:53.9922597Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9922665Z FROM "user" 
2025-07-05T16:35:53.9922748Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9922850Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9922998Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9923152Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9923504Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9923581Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9923643Z              ^
2025-07-05T16:35:53.9923647Z 
2025-07-05T16:35:53.9923992Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9924177Z FROM "user" 
2025-07-05T16:35:53.9924255Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9924364Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9924505Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9924587Z Traceback (most recent call last):
2025-07-05T16:35:53.9925047Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9925127Z     self.dialect.do_execute(
2025-07-05T16:35:53.9925723Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9925956Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9926118Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9926187Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9926252Z              ^
2025-07-05T16:35:53.9926258Z 
2025-07-05T16:35:53.9926268Z 
2025-07-05T16:35:53.9926434Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9926439Z 
2025-07-05T16:35:53.9926519Z Traceback (most recent call last):
2025-07-05T16:35:53.9926866Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9926933Z     yield session
2025-07-05T16:35:53.9927396Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9927503Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9927938Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9928008Z     raise e
2025-07-05T16:35:53.9928430Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9928523Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9928889Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9928983Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9929329Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9929421Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9929754Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9929842Z     response = await func(request)
2025-07-05T16:35:53.9929908Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9930235Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9930335Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9930412Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9930824Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9930960Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9931037Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9931453Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9931570Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9931649Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9931993Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9932124Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9932200Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9932771Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9932849Z     return await future
2025-07-05T16:35:53.9932914Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9933277Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9933369Z     result = context.run(func, *args)
2025-07-05T16:35:53.9933437Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9933780Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9934024Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9934106Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9934459Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9934543Z     results = super().execute(
2025-07-05T16:35:53.9934610Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9934997Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9935080Z     return self._execute_internal(
2025-07-05T16:35:53.9935147Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9935755Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9935911Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9935991Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9936445Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9936527Z     result = conn.execute(
2025-07-05T16:35:53.9936593Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9936980Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9937048Z     return meth(
2025-07-05T16:35:53.9937108Z            ^^^^^
2025-07-05T16:35:53.9937569Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9937667Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9937740Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9938204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9938284Z     ret = self._execute_context(
2025-07-05T16:35:53.9938351Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9938782Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9938871Z     return self._exec_single_context(
2025-07-05T16:35:53.9938945Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9939386Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9939468Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9939926Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9940106Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9940548Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9940637Z     self.dialect.do_execute(
2025-07-05T16:35:53.9941040Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9941284Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9941573Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9941642Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9941705Z              ^
2025-07-05T16:35:53.9941710Z 
2025-07-05T16:35:53.9942057Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9942126Z FROM "user" 
2025-07-05T16:35:53.9942208Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9942420Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9942566Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9943058Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9943139Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9943198Z              ^
2025-07-05T16:35:53.9943203Z 
2025-07-05T16:35:53.9943538Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9943608Z FROM "user" 
2025-07-05T16:35:53.9943684Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9943784Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9943922Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9944122Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9944447Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9944643Z ______ ERROR at setup of TestESGWorkflowIntegration.test_data_validation _______
2025-07-05T16:35:53.9944768Z tests/test_integration_api.py:31: in setup_test_data
2025-07-05T16:35:53.9944885Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:53.9944964Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:53.9945114Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:53.9945266Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:53.9945771Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9945850Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9945910Z              ^
2025-07-05T16:35:53.9945920Z 
2025-07-05T16:35:53.9946259Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9946327Z FROM "user" 
2025-07-05T16:35:53.9946403Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9946500Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9946647Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9946739Z Traceback (most recent call last):
2025-07-05T16:35:53.9947191Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9947277Z     self.dialect.do_execute(
2025-07-05T16:35:53.9947682Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9947774Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9947945Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9948013Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9948073Z              ^
2025-07-05T16:35:53.9948078Z 
2025-07-05T16:35:53.9948082Z 
2025-07-05T16:35:53.9948249Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9948374Z 
2025-07-05T16:35:53.9948457Z Traceback (most recent call last):
2025-07-05T16:35:53.9948790Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9948861Z     yield session
2025-07-05T16:35:53.9949320Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9949418Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9949852Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9950021Z     raise e
2025-07-05T16:35:53.9950449Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9950550Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9950911Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9951016Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9951360Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9951447Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9951785Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9951867Z     response = await func(request)
2025-07-05T16:35:53.9951932Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9952268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9952364Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9952435Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9952851Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9952988Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9953064Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9953484Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9953597Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9953676Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9954020Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9954147Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9954233Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9954691Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9954771Z     return await future
2025-07-05T16:35:53.9954840Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9955207Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9955292Z     result = context.run(func, *args)
2025-07-05T16:35:53.9955465Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9955804Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9955976Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9956069Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9956418Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9956496Z     results = super().execute(
2025-07-05T16:35:53.9956683Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9957068Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9957149Z     return self._execute_internal(
2025-07-05T16:35:53.9957219Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9957646Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9957796Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9957875Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9958418Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9958502Z     result = conn.execute(
2025-07-05T16:35:53.9958567Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9958943Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9959022Z     return meth(
2025-07-05T16:35:53.9959088Z            ^^^^^
2025-07-05T16:35:53.9959541Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9959644Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9959714Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9960165Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9960255Z     ret = self._execute_context(
2025-07-05T16:35:53.9960322Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9960743Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9960834Z     return self._exec_single_context(
2025-07-05T16:35:53.9960907Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9961380Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9961472Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9961929Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9962109Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9962553Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9962636Z     self.dialect.do_execute(
2025-07-05T16:35:53.9963043Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9963135Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9963428Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9963505Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9963565Z              ^
2025-07-05T16:35:53.9963571Z 
2025-07-05T16:35:53.9963911Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9963978Z FROM "user" 
2025-07-05T16:35:53.9964055Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9964156Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9964313Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9964855Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9964923Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9964982Z              ^
2025-07-05T16:35:53.9965082Z 
2025-07-05T16:35:53.9965594Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9965666Z FROM "user" 
2025-07-05T16:35:53.9965743Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9965847Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9965989Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9966228Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:53.9966600Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:53.9966875Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:53.9966956Z Traceback (most recent call last):
2025-07-05T16:35:53.9967414Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9967498Z     self.dialect.do_execute(
2025-07-05T16:35:53.9967901Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9967997Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9968157Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9968224Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9968289Z              ^
2025-07-05T16:35:53.9968294Z 
2025-07-05T16:35:53.9968298Z 
2025-07-05T16:35:53.9968466Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9968472Z 
2025-07-05T16:35:53.9968551Z Traceback (most recent call last):
2025-07-05T16:35:53.9968887Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9968958Z     yield session
2025-07-05T16:35:53.9969419Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9969517Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9969943Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9970014Z     raise e
2025-07-05T16:35:53.9970439Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9970527Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9970910Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9971003Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9971355Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9971444Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9971784Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9971871Z     response = await func(request)
2025-07-05T16:35:53.9971944Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9972277Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9972378Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9972450Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9972872Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9973011Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9973085Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9973616Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9973732Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9973807Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9974150Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9974281Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9974357Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9974892Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9974971Z     return await future
2025-07-05T16:35:53.9975035Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9975571Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9975675Z     result = context.run(func, *args)
2025-07-05T16:35:53.9975748Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9976095Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9976268Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9976352Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9976704Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9976788Z     results = super().execute(
2025-07-05T16:35:53.9976853Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9977240Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9977320Z     return self._execute_internal(
2025-07-05T16:35:53.9977392Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9977821Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9977969Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9978049Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9978497Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9978574Z     result = conn.execute(
2025-07-05T16:35:53.9978645Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9979027Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9979094Z     return meth(
2025-07-05T16:35:53.9979153Z            ^^^^^
2025-07-05T16:35:53.9979610Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9979713Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9979784Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9980237Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9980316Z     ret = self._execute_context(
2025-07-05T16:35:53.9980386Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9980805Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:53.9980893Z     return self._exec_single_context(
2025-07-05T16:35:53.9980969Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9981407Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:53.9981611Z     self._handle_dbapi_exception(
2025-07-05T16:35:53.9982079Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:53.9982255Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:53.9982695Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9982780Z     self.dialect.do_execute(
2025-07-05T16:35:53.9983185Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9983388Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9983677Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9983745Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9983810Z              ^
2025-07-05T16:35:53.9983820Z 
2025-07-05T16:35:53.9984161Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9984224Z FROM "user" 
2025-07-05T16:35:53.9984304Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9984411Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9984562Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9984713Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:53.9985062Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:53.9985133Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9985192Z              ^
2025-07-05T16:35:53.9985197Z 
2025-07-05T16:35:53.9985647Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:53.9985719Z FROM "user" 
2025-07-05T16:35:53.9985795Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:53.9985898Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:53.9986042Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:53.9986123Z Traceback (most recent call last):
2025-07-05T16:35:53.9986581Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:53.9986660Z     self.dialect.do_execute(
2025-07-05T16:35:53.9987066Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:53.9987169Z     cursor.execute(statement, parameters)
2025-07-05T16:35:53.9987331Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:53.9987398Z LINE 2: FROM "user" 
2025-07-05T16:35:53.9987465Z              ^
2025-07-05T16:35:53.9987474Z 
2025-07-05T16:35:53.9987478Z 
2025-07-05T16:35:53.9987642Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:53.9987647Z 
2025-07-05T16:35:53.9987726Z Traceback (most recent call last):
2025-07-05T16:35:53.9988065Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:53.9988133Z     yield session
2025-07-05T16:35:53.9988594Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:53.9988697Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:53.9989130Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:53.9989197Z     raise e
2025-07-05T16:35:53.9989628Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:53.9989873Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9990244Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:53.9990338Z     await route.handle(scope, receive, send)
2025-07-05T16:35:53.9990684Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:53.9990777Z     await self.app(scope, receive, send)
2025-07-05T16:35:53.9991112Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:53.9991295Z     response = await func(request)
2025-07-05T16:35:53.9991365Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9991694Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:53.9991792Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:53.9991877Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9992297Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:53.9992433Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:53.9992509Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9992921Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:53.9993037Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:53.9993117Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9993459Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:53.9993588Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:53.9993663Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9994125Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:53.9994210Z     return await future
2025-07-05T16:35:53.9994274Z            ^^^^^^^^^^^^
2025-07-05T16:35:53.9994641Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:53.9994733Z     result = context.run(func, *args)
2025-07-05T16:35:53.9994801Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9995137Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:53.9995319Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:53.9995506Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9995855Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:53.9995946Z     results = super().execute(
2025-07-05T16:35:53.9996011Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9996390Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:53.9996476Z     return self._execute_internal(
2025-07-05T16:35:53.9996542Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9996972Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:53.9997125Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:53.9997204Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9997649Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:53.9997844Z     result = conn.execute(
2025-07-05T16:35:53.9997910Z              ^^^^^^^^^^^^^
2025-07-05T16:35:53.9998296Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:53.9998363Z     return meth(
2025-07-05T16:35:53.9998422Z            ^^^^^
2025-07-05T16:35:53.9998881Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:53.9998979Z     return connection._execute_clauseelement(
2025-07-05T16:35:53.9999051Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:53.9999607Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:53.9999686Z     ret = self._execute_context(
2025-07-05T16:35:53.9999751Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0000178Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0000266Z     return self._exec_single_context(
2025-07-05T16:35:54.0000336Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0000779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0000861Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0001316Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0001491Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0001935Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0002018Z     self.dialect.do_execute(
2025-07-05T16:35:54.0002423Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0002521Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0002812Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0002880Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0002940Z              ^
2025-07-05T16:35:54.0002946Z 
2025-07-05T16:35:54.0003291Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0003353Z FROM "user" 
2025-07-05T16:35:54.0003431Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0003541Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:54.0003688Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0004180Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0004257Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0004318Z              ^
2025-07-05T16:35:54.0004323Z 
2025-07-05T16:35:54.0004658Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0004727Z FROM "user" 
2025-07-05T16:35:54.0004801Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0004900Z [parameters: {'email_1': 'admin@example.com'}]
2025-07-05T16:35:54.0005039Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0005238Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:54.0005845Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0006135Z __________ ERROR at setup of TestChecklistRoutes.test_get_checklists ___________
2025-07-05T16:35:54.0006351Z tests/test_routes_coverage.py:25: in setup_admin_user
2025-07-05T16:35:54.0006611Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:54.0006692Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0006839Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0006989Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:54.0007382Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0007457Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0007624Z              ^
2025-07-05T16:35:54.0007630Z 
2025-07-05T16:35:54.0007968Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0008031Z FROM "user" 
2025-07-05T16:35:54.0008111Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0008228Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0008373Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0008460Z Traceback (most recent call last):
2025-07-05T16:35:54.0008917Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0008998Z     self.dialect.do_execute(
2025-07-05T16:35:54.0009411Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0009503Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0009667Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0009739Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0009799Z              ^
2025-07-05T16:35:54.0009804Z 
2025-07-05T16:35:54.0009808Z 
2025-07-05T16:35:54.0009968Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0009978Z 
2025-07-05T16:35:54.0010064Z Traceback (most recent call last):
2025-07-05T16:35:54.0010393Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0010465Z     yield session
2025-07-05T16:35:54.0010928Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0011026Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0011462Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0011530Z     raise e
2025-07-05T16:35:54.0011958Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0012055Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0012419Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0012524Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0012876Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0012962Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0013301Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0013381Z     response = await func(request)
2025-07-05T16:35:54.0013448Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0013784Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0013883Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0013954Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0014370Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0014590Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0014667Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0015084Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0015195Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0015271Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0015827Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0016080Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0016155Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0016619Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0016699Z     return await future
2025-07-05T16:35:54.0016768Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0017133Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0017219Z     result = context.run(func, *args)
2025-07-05T16:35:54.0017291Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0017628Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0017800Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0017891Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0018241Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0018320Z     results = super().execute(
2025-07-05T16:35:54.0018395Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0018778Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0018859Z     return self._execute_internal(
2025-07-05T16:35:54.0018930Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0019354Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0019500Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0019586Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0020036Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0020112Z     result = conn.execute(
2025-07-05T16:35:54.0020182Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0020556Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0020631Z     return meth(
2025-07-05T16:35:54.0020692Z            ^^^^^
2025-07-05T16:35:54.0021143Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0021246Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0021319Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0021771Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0021861Z     ret = self._execute_context(
2025-07-05T16:35:54.0021928Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0022348Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0022436Z     return self._exec_single_context(
2025-07-05T16:35:54.0022640Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0023077Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0023167Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0023617Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0023792Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0024234Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0024390Z     self.dialect.do_execute(
2025-07-05T16:35:54.0024799Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0024891Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0025182Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0025254Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0025313Z              ^
2025-07-05T16:35:54.0025319Z 
2025-07-05T16:35:54.0025768Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0025838Z FROM "user" 
2025-07-05T16:35:54.0025913Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0026025Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0026173Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0026722Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0026791Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0026855Z              ^
2025-07-05T16:35:54.0026860Z 
2025-07-05T16:35:54.0027199Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0027261Z FROM "user" 
2025-07-05T16:35:54.0027337Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0027450Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0027590Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0027823Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:54.0028197Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0028348Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:54.0028428Z Traceback (most recent call last):
2025-07-05T16:35:54.0028889Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0028968Z     self.dialect.do_execute(
2025-07-05T16:35:54.0029371Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0029467Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0029627Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0029694Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0029759Z              ^
2025-07-05T16:35:54.0029764Z 
2025-07-05T16:35:54.0029772Z 
2025-07-05T16:35:54.0029936Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0029941Z 
2025-07-05T16:35:54.0030020Z Traceback (most recent call last):
2025-07-05T16:35:54.0030359Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0030544Z     yield session
2025-07-05T16:35:54.0031003Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0031105Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0031533Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0031605Z     raise e
2025-07-05T16:35:54.0032031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0032225Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0032591Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0032686Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0033033Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0033130Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0033463Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0033549Z     response = await func(request)
2025-07-05T16:35:54.0033614Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0033941Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0034041Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0034122Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0034533Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0034669Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0034748Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0035166Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0035282Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0035457Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0035804Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0035932Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0036008Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0036465Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0036544Z     return await future
2025-07-05T16:35:54.0036607Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0036972Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0037065Z     result = context.run(func, *args)
2025-07-05T16:35:54.0037132Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0037466Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0037643Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0037725Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0038078Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0038162Z     results = super().execute(
2025-07-05T16:35:54.0038226Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0038614Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0038813Z     return self._execute_internal(
2025-07-05T16:35:54.0038878Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0039315Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0039461Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0039540Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0039986Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0040063Z     result = conn.execute(
2025-07-05T16:35:54.0040229Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0040608Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0040674Z     return meth(
2025-07-05T16:35:54.0040734Z            ^^^^^
2025-07-05T16:35:54.0041194Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0041293Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0041366Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0041820Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0041898Z     ret = self._execute_context(
2025-07-05T16:35:54.0041963Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0042392Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0042481Z     return self._exec_single_context(
2025-07-05T16:35:54.0042548Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0042992Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0043077Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0043534Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0043710Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0044146Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0044230Z     self.dialect.do_execute(
2025-07-05T16:35:54.0044633Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0044732Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0045019Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0045088Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0045156Z              ^
2025-07-05T16:35:54.0045161Z 
2025-07-05T16:35:54.0045682Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0045750Z FROM "user" 
2025-07-05T16:35:54.0045827Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0045946Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0046095Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0046242Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:54.0046590Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0046663Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0046725Z              ^
2025-07-05T16:35:54.0046729Z 
2025-07-05T16:35:54.0047070Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0047258Z FROM "user" 
2025-07-05T16:35:54.0047334Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0047442Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0047587Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0047667Z Traceback (most recent call last):
2025-07-05T16:35:54.0048118Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0048203Z     self.dialect.do_execute(
2025-07-05T16:35:54.0048605Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0048837Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0048999Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0049065Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0049124Z              ^
2025-07-05T16:35:54.0049133Z 
2025-07-05T16:35:54.0049142Z 
2025-07-05T16:35:54.0049304Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0049309Z 
2025-07-05T16:35:54.0049388Z Traceback (most recent call last):
2025-07-05T16:35:54.0049725Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0049792Z     yield session
2025-07-05T16:35:54.0050250Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0050352Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0050784Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0050851Z     raise e
2025-07-05T16:35:54.0051288Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0051382Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0051747Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0051840Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0052196Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0052289Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0052629Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0052715Z     response = await func(request)
2025-07-05T16:35:54.0052787Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0053117Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0053215Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0053295Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0053707Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0053838Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0053919Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0054333Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0054443Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0054526Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0054868Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0055001Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0055163Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0055789Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0055872Z     return await future
2025-07-05T16:35:54.0055936Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0056301Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0056391Z     result = context.run(func, *args)
2025-07-05T16:35:54.0056458Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0056790Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0057087Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0057169Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0057517Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0057610Z     results = super().execute(
2025-07-05T16:35:54.0057675Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0058056Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0058142Z     return self._execute_internal(
2025-07-05T16:35:54.0058207Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0058633Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0058790Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0058868Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0059315Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0059396Z     result = conn.execute(
2025-07-05T16:35:54.0059460Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0059838Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0059906Z     return meth(
2025-07-05T16:35:54.0059966Z            ^^^^^
2025-07-05T16:35:54.0060422Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0060519Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0060590Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0061051Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0061130Z     ret = self._execute_context(
2025-07-05T16:35:54.0061195Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0061657Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0061746Z     return self._exec_single_context(
2025-07-05T16:35:54.0061813Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0062264Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0062345Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0062794Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0062980Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0063417Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0063501Z     self.dialect.do_execute(
2025-07-05T16:35:54.0063904Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0064111Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0064403Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0064470Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0064530Z              ^
2025-07-05T16:35:54.0064535Z 
2025-07-05T16:35:54.0064878Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0064940Z FROM "user" 
2025-07-05T16:35:54.0065093Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0065203Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0065456Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0065952Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0066026Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0066092Z              ^
2025-07-05T16:35:54.0066097Z 
2025-07-05T16:35:54.0066431Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0066493Z FROM "user" 
2025-07-05T16:35:54.0066575Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0066691Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0066838Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0067046Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:54.0067369Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0067554Z _________ ERROR at setup of TestChecklistRoutes.test_create_checklist __________
2025-07-05T16:35:54.0067688Z tests/test_routes_coverage.py:25: in setup_admin_user
2025-07-05T16:35:54.0067804Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:54.0067883Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0068026Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0068179Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:54.0068572Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0068639Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0068711Z              ^
2025-07-05T16:35:54.0068716Z 
2025-07-05T16:35:54.0069051Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0069114Z FROM "user" 
2025-07-05T16:35:54.0069198Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0069312Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0069461Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0069550Z Traceback (most recent call last):
2025-07-05T16:35:54.0070009Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0070092Z     self.dialect.do_execute(
2025-07-05T16:35:54.0070505Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0070597Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0070762Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0070835Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0070895Z              ^
2025-07-05T16:35:54.0070900Z 
2025-07-05T16:35:54.0070903Z 
2025-07-05T16:35:54.0071066Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0071187Z 
2025-07-05T16:35:54.0071276Z Traceback (most recent call last):
2025-07-05T16:35:54.0071610Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0071677Z     yield session
2025-07-05T16:35:54.0072145Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0072244Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0072693Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0072861Z     raise e
2025-07-05T16:35:54.0073288Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0073383Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0073753Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0073849Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0074208Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0074298Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0074636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0074717Z     response = await func(request)
2025-07-05T16:35:54.0074782Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0075119Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0075216Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0075288Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0076007Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0076245Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0076358Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0076790Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0076903Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0076977Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0077330Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0077461Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0077539Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0078001Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0078079Z     return await future
2025-07-05T16:35:54.0078143Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0078517Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0078605Z     result = context.run(func, *args)
2025-07-05T16:35:54.0078675Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0079017Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0079196Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0079284Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0079634Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0079855Z     results = super().execute(
2025-07-05T16:35:54.0079925Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0080307Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0080388Z     return self._execute_internal(
2025-07-05T16:35:54.0080460Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0080882Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0081028Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0081114Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0081662Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0081739Z     result = conn.execute(
2025-07-05T16:35:54.0081811Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0082193Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0082261Z     return meth(
2025-07-05T16:35:54.0082326Z            ^^^^^
2025-07-05T16:35:54.0082776Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0082876Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0082952Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0083402Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0083492Z     ret = self._execute_context(
2025-07-05T16:35:54.0083557Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0083980Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0084072Z     return self._exec_single_context(
2025-07-05T16:35:54.0084139Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0084578Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0084666Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0085118Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0085294Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0085854Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0085940Z     self.dialect.do_execute(
2025-07-05T16:35:54.0086358Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0086493Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0086781Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0086849Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0086915Z              ^
2025-07-05T16:35:54.0086920Z 
2025-07-05T16:35:54.0087261Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0087324Z FROM "user" 
2025-07-05T16:35:54.0087407Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0087518Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0087672Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0088225Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0088295Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0088490Z              ^
2025-07-05T16:35:54.0088495Z 
2025-07-05T16:35:54.0088842Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0088906Z FROM "user" 
2025-07-05T16:35:54.0088989Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0089108Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0089259Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0089498Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:54.0089969Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0090126Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:54.0090211Z Traceback (most recent call last):
2025-07-05T16:35:54.0090679Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0090762Z     self.dialect.do_execute(
2025-07-05T16:35:54.0091175Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0091276Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0091442Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0091513Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0091579Z              ^
2025-07-05T16:35:54.0091588Z 
2025-07-05T16:35:54.0091591Z 
2025-07-05T16:35:54.0091759Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0091764Z 
2025-07-05T16:35:54.0091845Z Traceback (most recent call last):
2025-07-05T16:35:54.0092185Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0092260Z     yield session
2025-07-05T16:35:54.0092729Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0092836Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0093268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0093335Z     raise e
2025-07-05T16:35:54.0093767Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0093863Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0094233Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0094330Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0094681Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0094777Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0095111Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0095195Z     response = await func(request)
2025-07-05T16:35:54.0095268Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0095825Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0095930Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0096014Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0096436Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0096578Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0096783Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0097204Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0097321Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0097401Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0097747Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0097883Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0098083Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0098545Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0098626Z     return await future
2025-07-05T16:35:54.0098690Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0099064Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0099158Z     result = context.run(func, *args)
2025-07-05T16:35:54.0099229Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0099568Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0099748Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0099833Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0100188Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0100278Z     results = super().execute(
2025-07-05T16:35:54.0100346Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0100733Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0100825Z     return self._execute_internal(
2025-07-05T16:35:54.0100891Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0101321Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0101466Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0101546Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0102000Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0102082Z     result = conn.execute(
2025-07-05T16:35:54.0102147Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0102539Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0102606Z     return meth(
2025-07-05T16:35:54.0102668Z            ^^^^^
2025-07-05T16:35:54.0103147Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0103249Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0103321Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0103775Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0103856Z     ret = self._execute_context(
2025-07-05T16:35:54.0103924Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0104352Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0104443Z     return self._exec_single_context(
2025-07-05T16:35:54.0104512Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0104957Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0105126Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0105699Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0105880Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0106320Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0106405Z     self.dialect.do_execute(
2025-07-05T16:35:54.0106812Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0107018Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0107315Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0107384Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0107451Z              ^
2025-07-05T16:35:54.0107457Z 
2025-07-05T16:35:54.0107803Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0107866Z FROM "user" 
2025-07-05T16:35:54.0107944Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0108063Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0108215Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0108364Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:54.0108714Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0108789Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0108849Z              ^
2025-07-05T16:35:54.0108853Z 
2025-07-05T16:35:54.0109187Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0109259Z FROM "user" 
2025-07-05T16:35:54.0109336Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0109446Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0109592Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0109675Z Traceback (most recent call last):
2025-07-05T16:35:54.0110127Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0110212Z     self.dialect.do_execute(
2025-07-05T16:35:54.0110629Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0110723Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0110887Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0110956Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0111021Z              ^
2025-07-05T16:35:54.0111026Z 
2025-07-05T16:35:54.0111030Z 
2025-07-05T16:35:54.0111196Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0111202Z 
2025-07-05T16:35:54.0111283Z Traceback (most recent call last):
2025-07-05T16:35:54.0111621Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0111695Z     yield session
2025-07-05T16:35:54.0112162Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0112271Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0112701Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0112768Z     raise e
2025-07-05T16:35:54.0113202Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0113410Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0113775Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0113876Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0114223Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0114314Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0114649Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0114847Z     response = await func(request)
2025-07-05T16:35:54.0114918Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0115249Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0115450Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0115531Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0115948Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0116082Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0116166Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0116585Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0116698Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0116785Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0117130Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0117259Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0120897Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0121433Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0121517Z     return await future
2025-07-05T16:35:54.0121589Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0121987Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0122081Z     result = context.run(func, *args)
2025-07-05T16:35:54.0122156Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0122519Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0122709Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0122794Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0123173Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0123266Z     results = super().execute(
2025-07-05T16:35:54.0123335Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0123726Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0123816Z     return self._execute_internal(
2025-07-05T16:35:54.0123883Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0124314Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0124475Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0124557Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0125019Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0125265Z     result = conn.execute(
2025-07-05T16:35:54.0125331Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0125958Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0126038Z     return meth(
2025-07-05T16:35:54.0126099Z            ^^^^^
2025-07-05T16:35:54.0126554Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0126663Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0126858Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0127316Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0127402Z     ret = self._execute_context(
2025-07-05T16:35:54.0127467Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0127899Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0127985Z     return self._exec_single_context(
2025-07-05T16:35:54.0128054Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0128498Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0128583Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0129031Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0129232Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0129692Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0129778Z     self.dialect.do_execute(
2025-07-05T16:35:54.0130202Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0130298Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0130590Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0130669Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0130730Z              ^
2025-07-05T16:35:54.0130736Z 
2025-07-05T16:35:54.0131080Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0131159Z FROM "user" 
2025-07-05T16:35:54.0131237Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0131355Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0131514Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0132008Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0132083Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0132150Z              ^
2025-07-05T16:35:54.0132155Z 
2025-07-05T16:35:54.0132497Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0132561Z FROM "user" 
2025-07-05T16:35:54.0132649Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0132760Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0132906Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0133111Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:54.0133443Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0133631Z ________ ERROR at setup of TestChecklistRoutes.test_get_checklist_by_id ________
2025-07-05T16:35:54.0133869Z tests/test_routes_coverage.py:25: in setup_admin_user
2025-07-05T16:35:54.0133988Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:54.0134068Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0134214Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0134371Z ---------------------------- Captured stdout setup -----------------------------
2025-07-05T16:35:54.0134780Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0134927Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0134993Z              ^
2025-07-05T16:35:54.0134997Z 
2025-07-05T16:35:54.0135462Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0135582Z FROM "user" 
2025-07-05T16:35:54.0135683Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0135802Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0135954Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0136038Z Traceback (most recent call last):
2025-07-05T16:35:54.0136513Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0136597Z     self.dialect.do_execute(
2025-07-05T16:35:54.0137018Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0137119Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0137285Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0137358Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0137418Z              ^
2025-07-05T16:35:54.0137423Z 
2025-07-05T16:35:54.0137427Z 
2025-07-05T16:35:54.0137595Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0137604Z 
2025-07-05T16:35:54.0137690Z Traceback (most recent call last):
2025-07-05T16:35:54.0138028Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0138097Z     yield session
2025-07-05T16:35:54.0138565Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0138667Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0139099Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0139179Z     raise e
2025-07-05T16:35:54.0139607Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0139698Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0140070Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0140169Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0140526Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0140616Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0140963Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0141051Z     response = await func(request)
2025-07-05T16:35:54.0141122Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0141457Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0141561Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0141633Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0142182Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0142327Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0142405Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0142831Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0142951Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0143026Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0143483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0143606Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0143682Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0144152Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0144226Z     return await future
2025-07-05T16:35:54.0144291Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0144671Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0144759Z     result = context.run(func, *args)
2025-07-05T16:35:54.0144829Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0145173Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0145458Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0145546Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0145904Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0145993Z     results = super().execute(
2025-07-05T16:35:54.0146060Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0146463Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0146545Z     return self._execute_internal(
2025-07-05T16:35:54.0146611Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0147048Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0147195Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0147280Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0147733Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0147812Z     result = conn.execute(
2025-07-05T16:35:54.0147885Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0148267Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0148333Z     return meth(
2025-07-05T16:35:54.0148403Z            ^^^^^
2025-07-05T16:35:54.0148858Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0148958Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0149037Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0149496Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0149581Z     ret = self._execute_context(
2025-07-05T16:35:54.0149653Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0150080Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0150284Z     return self._exec_single_context(
2025-07-05T16:35:54.0150359Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0150802Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0150885Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0151348Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0151527Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0152074Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0152155Z     self.dialect.do_execute(
2025-07-05T16:35:54.0152570Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0152675Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0152966Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0153036Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0153101Z              ^
2025-07-05T16:35:54.0153107Z 
2025-07-05T16:35:54.0153448Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0153511Z FROM "user" 
2025-07-05T16:35:54.0153593Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0153707Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0153863Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0154407Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0154485Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0154545Z              ^
2025-07-05T16:35:54.0154550Z 
2025-07-05T16:35:54.0154885Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0154954Z FROM "user" 
2025-07-05T16:35:54.0155030Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0155139Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0155290Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0155629Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:54.0156005Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0156162Z ---------------------------- Captured stderr setup -----------------------------
2025-07-05T16:35:54.0156248Z Traceback (most recent call last):
2025-07-05T16:35:54.0156706Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0156794Z     self.dialect.do_execute(
2025-07-05T16:35:54.0157203Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0157296Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0157465Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0157531Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0157596Z              ^
2025-07-05T16:35:54.0157600Z 
2025-07-05T16:35:54.0157604Z 
2025-07-05T16:35:54.0157773Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0157779Z 
2025-07-05T16:35:54.0157858Z Traceback (most recent call last):
2025-07-05T16:35:54.0158192Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0158384Z     yield session
2025-07-05T16:35:54.0158848Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0158952Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0159381Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0159448Z     raise e
2025-07-05T16:35:54.0159876Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0160067Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0160430Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0160532Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0160887Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0160979Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0161314Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0161430Z     response = await func(request)
2025-07-05T16:35:54.0161502Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0161829Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0161927Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0162012Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0162425Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0162558Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0162649Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0163066Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0163178Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0163258Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0163603Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0163727Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0163813Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0164268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0164347Z     return await future
2025-07-05T16:35:54.0164416Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0164781Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0164873Z     result = context.run(func, *args)
2025-07-05T16:35:54.0164944Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0165279Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0165560Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0165645Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0165999Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0166085Z     results = super().execute(
2025-07-05T16:35:54.0166152Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0166535Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0166742Z     return self._execute_internal(
2025-07-05T16:35:54.0166809Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0167237Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0167388Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0167469Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0167922Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0168108Z     result = conn.execute(
2025-07-05T16:35:54.0168173Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0168552Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0168626Z     return meth(
2025-07-05T16:35:54.0168690Z            ^^^^^
2025-07-05T16:35:54.0169143Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0169247Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0169320Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0169774Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0169855Z     ret = self._execute_context(
2025-07-05T16:35:54.0169929Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0170353Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0170437Z     return self._exec_single_context(
2025-07-05T16:35:54.0170510Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0170946Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0171037Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0171490Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0171669Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0172109Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0172188Z     self.dialect.do_execute(
2025-07-05T16:35:54.0172607Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0172705Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0172996Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0173069Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0173135Z              ^
2025-07-05T16:35:54.0173141Z 
2025-07-05T16:35:54.0173480Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0173543Z FROM "user" 
2025-07-05T16:35:54.0173626Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0173739Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0173887Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0174043Z ------------------------------ Captured log setup ------------------------------
2025-07-05T16:35:54.0174393Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0174461Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0174520Z              ^
2025-07-05T16:35:54.0174530Z 
2025-07-05T16:35:54.0174864Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0175013Z FROM "user" 
2025-07-05T16:35:54.0175091Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0175205Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0175504Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0175631Z Traceback (most recent call last):
2025-07-05T16:35:54.0176093Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0176173Z     self.dialect.do_execute(
2025-07-05T16:35:54.0176706Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0176804Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0176965Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0177039Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0177104Z              ^
2025-07-05T16:35:54.0177110Z 
2025-07-05T16:35:54.0177115Z 
2025-07-05T16:35:54.0177278Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0177284Z 
2025-07-05T16:35:54.0177363Z Traceback (most recent call last):
2025-07-05T16:35:54.0177706Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0177773Z     yield session
2025-07-05T16:35:54.0178236Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0178338Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0178765Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0178837Z     raise e
2025-07-05T16:35:54.0179261Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0179354Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0179718Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0179812Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0180162Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0180247Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0180582Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0180674Z     response = await func(request)
2025-07-05T16:35:54.0180740Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0181069Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0181174Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0181245Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0181655Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0181792Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0181869Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0182286Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0182409Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0182484Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0182828Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0182955Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0183181Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0183646Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0183719Z     return await future
2025-07-05T16:35:54.0183784Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0184155Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0184241Z     result = context.run(func, *args)
2025-07-05T16:35:54.0184403Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0184741Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0184914Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0184996Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0185464Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0185548Z     results = super().execute(
2025-07-05T16:35:54.0185615Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0186001Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0186081Z     return self._execute_internal(
2025-07-05T16:35:54.0186149Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0186577Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0186727Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0186808Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0187257Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0187337Z     result = conn.execute(
2025-07-05T16:35:54.0187403Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0187786Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0187851Z     return meth(
2025-07-05T16:35:54.0187912Z            ^^^^^
2025-07-05T16:35:54.0188372Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0188479Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0188559Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0189009Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0189089Z     ret = self._execute_context(
2025-07-05T16:35:54.0189164Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0189582Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0189666Z     return self._exec_single_context(
2025-07-05T16:35:54.0189742Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0190180Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0190263Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0190718Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0190901Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0191336Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0191543Z     self.dialect.do_execute(
2025-07-05T16:35:54.0191948Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0192045Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0192335Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0192403Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0192468Z              ^
2025-07-05T16:35:54.0192473Z 
2025-07-05T16:35:54.0192814Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0192980Z FROM "user" 
2025-07-05T16:35:54.0193058Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0193176Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0193323Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0193825Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0193904Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0193965Z              ^
2025-07-05T16:35:54.0193970Z 
2025-07-05T16:35:54.0194307Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0194374Z FROM "user" 
2025-07-05T16:35:54.0194450Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0194560Z [parameters: {'email_1': 'admin_test@example.com'}]
2025-07-05T16:35:54.0194704Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0194901Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.009s
2025-07-05T16:35:54.0195221Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0195325Z =================================== FAILURES ===================================
2025-07-05T16:35:54.0195562Z _____________________________ test_health_endpoint _____________________________
2025-07-05T16:35:54.0195672Z tests/test_basic_api.py:13: in test_health_endpoint
2025-07-05T16:35:54.0195756Z     assert data["status"] == "healthy"
2025-07-05T16:35:54.0195872Z E   AssertionError: assert 'degraded' == 'healthy'
2025-07-05T16:35:54.0195932Z E     
2025-07-05T16:35:54.0195996Z E     - healthy
2025-07-05T16:35:54.0196064Z E     + degraded
2025-07-05T16:35:54.0196207Z ----------------------------- Captured stdout call -----------------------------
2025-07-05T16:35:54.0196421Z 2025-07-05 16:35:50 - app.main - INFO - [main.py:195] - GET /health - Status: 200 - Duration: 0.023s
2025-07-05T16:35:54.0196683Z 2025-07-05 16:35:50 - httpx - INFO - [_client.py:1773] - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-05T16:35:54.0196823Z ------------------------------ Captured log call -------------------------------
2025-07-05T16:35:54.0196988Z INFO     app.main:main.py:195 GET /health - Status: 200 - Duration: 0.023s
2025-07-05T16:35:54.0197199Z INFO     httpx:_client.py:1773 HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-05T16:35:54.0197389Z _______________ TestEndToEndScenarios.test_complete_user_journey _______________
2025-07-05T16:35:54.0197548Z tests/test_integration_api.py:262: in test_complete_user_journey
2025-07-05T16:35:54.0197659Z     assert response.status_code in [200, 201, 400, 409]
2025-07-05T16:35:54.0197744Z E   assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0197892Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0198036Z ----------------------------- Captured stdout call -----------------------------
2025-07-05T16:35:54.0198428Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0198501Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0198683Z              ^
2025-07-05T16:35:54.0198689Z 
2025-07-05T16:35:54.0199025Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0199089Z FROM "user" 
2025-07-05T16:35:54.0199171Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0199278Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0199421Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0199507Z Traceback (most recent call last):
2025-07-05T16:35:54.0199965Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0200153Z     self.dialect.do_execute(
2025-07-05T16:35:54.0200568Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0200661Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0200827Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0200899Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0200960Z              ^
2025-07-05T16:35:54.0200965Z 
2025-07-05T16:35:54.0200969Z 
2025-07-05T16:35:54.0201133Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0201143Z 
2025-07-05T16:35:54.0201222Z Traceback (most recent call last):
2025-07-05T16:35:54.0201554Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0201626Z     yield session
2025-07-05T16:35:54.0202096Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0202196Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0202645Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0202717Z     raise e
2025-07-05T16:35:54.0203183Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0203283Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0203646Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0203740Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0204092Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0204186Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0204526Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0204609Z     response = await func(request)
2025-07-05T16:35:54.0204676Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0205016Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0205118Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0205190Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0205806Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0205943Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0206022Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0206453Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0206566Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0206642Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0207112Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0207237Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0207314Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0207773Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0207848Z     return await future
2025-07-05T16:35:54.0207915Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0208282Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0208472Z     result = context.run(func, *args)
2025-07-05T16:35:54.0208546Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0208881Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0209057Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0209148Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0209497Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0209578Z     results = super().execute(
2025-07-05T16:35:54.0209649Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0210032Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0210116Z     return self._execute_internal(
2025-07-05T16:35:54.0210192Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0210616Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0210763Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0210852Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0211297Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0211378Z     result = conn.execute(
2025-07-05T16:35:54.0211445Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0211823Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0211896Z     return meth(
2025-07-05T16:35:54.0211957Z            ^^^^^
2025-07-05T16:35:54.0212416Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0212525Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0212598Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0213045Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0213135Z     ret = self._execute_context(
2025-07-05T16:35:54.0213202Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0213620Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0213709Z     return self._exec_single_context(
2025-07-05T16:35:54.0213777Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0214215Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0214306Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0214755Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0214933Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0215589Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0215822Z     self.dialect.do_execute(
2025-07-05T16:35:54.0216217Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0216311Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0216601Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0216673Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0216737Z              ^
2025-07-05T16:35:54.0216844Z 
2025-07-05T16:35:54.0217185Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0217254Z FROM "user" 
2025-07-05T16:35:54.0217331Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0217440Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0217595Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0218139Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0218207Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0218266Z              ^
2025-07-05T16:35:54.0218271Z 
2025-07-05T16:35:54.0218613Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0218675Z FROM "user" 
2025-07-05T16:35:54.0218756Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0218866Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0219010Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0219246Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:54.0219618Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0219768Z ----------------------------- Captured stderr call -----------------------------
2025-07-05T16:35:54.0219851Z Traceback (most recent call last):
2025-07-05T16:35:54.0220309Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0220390Z     self.dialect.do_execute(
2025-07-05T16:35:54.0220798Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0220900Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0221065Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0221132Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0221196Z              ^
2025-07-05T16:35:54.0221205Z 
2025-07-05T16:35:54.0221209Z 
2025-07-05T16:35:54.0221371Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0221376Z 
2025-07-05T16:35:54.0221457Z Traceback (most recent call last):
2025-07-05T16:35:54.0221799Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0221867Z     yield session
2025-07-05T16:35:54.0222326Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0222439Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0222876Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0222946Z     raise e
2025-07-05T16:35:54.0223371Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0223546Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0223909Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0224004Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0224347Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0224439Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0224772Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0224933Z     response = await func(request)
2025-07-05T16:35:54.0225001Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0225327Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0225541Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0225619Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0226029Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0226167Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0226245Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0226658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0226777Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0226857Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0227197Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0227330Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0227404Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0227860Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0227940Z     return await future
2025-07-05T16:35:54.0228004Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0228367Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0228460Z     result = context.run(func, *args)
2025-07-05T16:35:54.0228528Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0228863Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0229047Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0229129Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0229486Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0229569Z     results = super().execute(
2025-07-05T16:35:54.0229634Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0230023Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0230104Z     return self._execute_internal(
2025-07-05T16:35:54.0230171Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0230599Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0230750Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0230830Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0231278Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0231478Z     result = conn.execute(
2025-07-05T16:35:54.0231546Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0231927Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0231995Z     return meth(
2025-07-05T16:35:54.0232054Z            ^^^^^
2025-07-05T16:35:54.0232513Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0232627Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0232709Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0233273Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0233352Z     ret = self._execute_context(
2025-07-05T16:35:54.0233417Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0233841Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0233930Z     return self._exec_single_context(
2025-07-05T16:35:54.0233997Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0234441Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0234523Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0234978Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0235159Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0235716Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0235802Z     self.dialect.do_execute(
2025-07-05T16:35:54.0236210Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0236311Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0236600Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0236668Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0236730Z              ^
2025-07-05T16:35:54.0236736Z 
2025-07-05T16:35:54.0237083Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0237147Z FROM "user" 
2025-07-05T16:35:54.0237235Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0237353Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0237499Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0237647Z ------------------------------ Captured log call -------------------------------
2025-07-05T16:35:54.0238003Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0238076Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0238136Z              ^
2025-07-05T16:35:54.0238141Z 
2025-07-05T16:35:54.0238479Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0238545Z FROM "user" 
2025-07-05T16:35:54.0238621Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0238725Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0238871Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0238956Z Traceback (most recent call last):
2025-07-05T16:35:54.0239402Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0239485Z     self.dialect.do_execute(
2025-07-05T16:35:54.0239891Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0240112Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0240273Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0240340Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0240399Z              ^
2025-07-05T16:35:54.0240404Z 
2025-07-05T16:35:54.0240416Z 
2025-07-05T16:35:54.0240578Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0240584Z 
2025-07-05T16:35:54.0240666Z Traceback (most recent call last):
2025-07-05T16:35:54.0241005Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0241175Z     yield session
2025-07-05T16:35:54.0241636Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0241740Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0242173Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0242237Z     raise e
2025-07-05T16:35:54.0242665Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0242753Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0243118Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0243210Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0243570Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0243659Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0243992Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0244078Z     response = await func(request)
2025-07-05T16:35:54.0244151Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0244479Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0244576Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0244653Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0245065Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0245205Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0245287Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0245804Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0245919Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0246003Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0246345Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0246476Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0246554Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0247008Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0247086Z     return await future
2025-07-05T16:35:54.0247156Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0247522Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0247613Z     result = context.run(func, *args)
2025-07-05T16:35:54.0247682Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0248167Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 23, in register
2025-07-05T16:35:54.0248344Z     existing = db.exec(select(User).where(User.email == user.email)).first()
2025-07-05T16:35:54.0248427Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0248779Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0248864Z     results = super().execute(
2025-07-05T16:35:54.0248930Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0249310Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0249499Z     return self._execute_internal(
2025-07-05T16:35:54.0249564Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0249989Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0250144Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0250223Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0250673Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0250751Z     result = conn.execute(
2025-07-05T16:35:54.0250816Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0251197Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0251274Z     return meth(
2025-07-05T16:35:54.0251334Z            ^^^^^
2025-07-05T16:35:54.0251792Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0251891Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0251967Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0252421Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0252500Z     ret = self._execute_context(
2025-07-05T16:35:54.0252566Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0252994Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0253078Z     return self._exec_single_context(
2025-07-05T16:35:54.0253147Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0253594Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0253676Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0254129Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0254318Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0254758Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0254841Z     self.dialect.do_execute(
2025-07-05T16:35:54.0255245Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0255337Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0255849Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0255926Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0255988Z              ^
2025-07-05T16:35:54.0255993Z 
2025-07-05T16:35:54.0256339Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0256529Z FROM "user" 
2025-07-05T16:35:54.0256608Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0256714Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0256867Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0257360Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/register: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0257428Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0257493Z              ^
2025-07-05T16:35:54.0257497Z 
2025-07-05T16:35:54.0257831Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0257998Z FROM "user" 
2025-07-05T16:35:54.0258080Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0258187Z [parameters: {'email_1': 'journey@example.com'}]
2025-07-05T16:35:54.0258329Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0258539Z INFO     app.main:main.py:195 POST /v1/users/register - Status: 500 - Duration: 0.008s
2025-07-05T16:35:54.0258861Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/register "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0259044Z ________________ TestUserRoutes.test_login_invalid_credentials _________________
2025-07-05T16:35:54.0259218Z tests/test_routes_coverage.py:105: in test_login_invalid_credentials
2025-07-05T16:35:54.0259312Z     assert response.status_code in [401, 422]
2025-07-05T16:35:54.0259384Z E   assert 500 in [401, 422]
2025-07-05T16:35:54.0259526Z E    +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0259683Z ----------------------------- Captured stdout call -----------------------------
2025-07-05T16:35:54.0260077Z 2025-07-05 16:35:52 - app.database - ERROR - [database.py:38] - Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0260152Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0260218Z              ^
2025-07-05T16:35:54.0260223Z 
2025-07-05T16:35:54.0260557Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0260620Z FROM "user" 
2025-07-05T16:35:54.0260703Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0260790Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0260934Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0261019Z Traceback (most recent call last):
2025-07-05T16:35:54.0261500Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0261584Z     self.dialect.do_execute(
2025-07-05T16:35:54.0261995Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0262097Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0262257Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0262330Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0262390Z              ^
2025-07-05T16:35:54.0262395Z 
2025-07-05T16:35:54.0262398Z 
2025-07-05T16:35:54.0262560Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0262566Z 
2025-07-05T16:35:54.0262650Z Traceback (most recent call last):
2025-07-05T16:35:54.0262983Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0263051Z     yield session
2025-07-05T16:35:54.0263520Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0263617Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0264053Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0264222Z     raise e
2025-07-05T16:35:54.0264648Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0264745Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0265105Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0265199Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0265658Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0265863Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0266202Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0266284Z     response = await func(request)
2025-07-05T16:35:54.0266350Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0266689Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0266787Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0266860Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0267278Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0267409Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0267486Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0267910Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0268022Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0268096Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0268447Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0268573Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0268648Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0269106Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0269181Z     return await future
2025-07-05T16:35:54.0269245Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0269617Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0269707Z     result = context.run(func, *args)
2025-07-05T16:35:54.0269776Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0270103Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 41, in login
2025-07-05T16:35:54.0270292Z     user = db.exec(select(User).where(User.email == form_data.username)).first()
2025-07-05T16:35:54.0270376Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0270735Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0270817Z     results = super().execute(
2025-07-05T16:35:54.0270887Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0271270Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0271352Z     return self._execute_internal(
2025-07-05T16:35:54.0271428Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0271858Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0272007Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0272207Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0272653Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0272735Z     result = conn.execute(
2025-07-05T16:35:54.0272805Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0273182Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0273250Z     return meth(
2025-07-05T16:35:54.0273315Z            ^^^^^
2025-07-05T16:35:54.0273772Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0273947Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0274025Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0274476Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0274566Z     ret = self._execute_context(
2025-07-05T16:35:54.0274636Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0275057Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0275146Z     return self._exec_single_context(
2025-07-05T16:35:54.0275217Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0275906Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0276008Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0276483Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0276668Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0277124Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0277204Z     self.dialect.do_execute(
2025-07-05T16:35:54.0277610Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0277708Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0278001Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0278071Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0278136Z              ^
2025-07-05T16:35:54.0278146Z 
2025-07-05T16:35:54.0278487Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0278550Z FROM "user" 
2025-07-05T16:35:54.0278633Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0278719Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0278877Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0279410Z 2025-07-05 16:35:52 - app.main - ERROR - [main.py:291] - HTTP 500 error on POST http://testserver/v1/users/login: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0279479Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0279539Z              ^
2025-07-05T16:35:54.0279545Z 
2025-07-05T16:35:54.0279886Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0279948Z FROM "user" 
2025-07-05T16:35:54.0280028Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0280116Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0280263Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0280491Z 2025-07-05 16:35:52 - app.main - INFO - [main.py:195] - POST /v1/users/login - Status: 500 - Duration: 0.009s
2025-07-05T16:35:54.0280971Z 2025-07-05 16:35:52 - httpx - INFO - [_client.py:1773] - HTTP Request: POST http://testserver/v1/users/login "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0281126Z ----------------------------- Captured stderr call -----------------------------
2025-07-05T16:35:54.0281209Z Traceback (most recent call last):
2025-07-05T16:35:54.0281662Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0281746Z     self.dialect.do_execute(
2025-07-05T16:35:54.0282153Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0282356Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0282519Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0282586Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0282645Z              ^
2025-07-05T16:35:54.0282660Z 
2025-07-05T16:35:54.0282664Z 
2025-07-05T16:35:54.0282829Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0282833Z 
2025-07-05T16:35:54.0282913Z Traceback (most recent call last):
2025-07-05T16:35:54.0283250Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0283318Z     yield session
2025-07-05T16:35:54.0283781Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0283886Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0284321Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0284388Z     raise e
2025-07-05T16:35:54.0284820Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0284911Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0285275Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0285542Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0285949Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0286046Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0286384Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0286472Z     response = await func(request)
2025-07-05T16:35:54.0286543Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0286876Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0286974Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0287054Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0287465Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0287599Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0287684Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0288102Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0288220Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0288298Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0288642Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0288770Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0288846Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0289427Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0289506Z     return await future
2025-07-05T16:35:54.0289571Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0289940Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0290031Z     result = context.run(func, *args)
2025-07-05T16:35:54.0290099Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0290424Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 41, in login
2025-07-05T16:35:54.0290708Z     user = db.exec(select(User).where(User.email == form_data.username)).first()
2025-07-05T16:35:54.0290793Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0291143Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0291236Z     results = super().execute(
2025-07-05T16:35:54.0291303Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0291686Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0291773Z     return self._execute_internal(
2025-07-05T16:35:54.0291839Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0292266Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0292421Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0292503Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0292950Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0293035Z     result = conn.execute(
2025-07-05T16:35:54.0293101Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0293481Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0293548Z     return meth(
2025-07-05T16:35:54.0293609Z            ^^^^^
2025-07-05T16:35:54.0294065Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0294164Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0294236Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0294695Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0294774Z     ret = self._execute_context(
2025-07-05T16:35:54.0294840Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0295268Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0295517Z     return self._exec_single_context(
2025-07-05T16:35:54.0295621Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0296071Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0296156Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0296612Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0296800Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0297239Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0297323Z     self.dialect.do_execute(
2025-07-05T16:35:54.0297730Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0297949Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0298246Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0298314Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0298375Z              ^
2025-07-05T16:35:54.0298380Z 
2025-07-05T16:35:54.0298725Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0298788Z FROM "user" 
2025-07-05T16:35:54.0298969Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0299064Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0299215Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0299365Z ------------------------------ Captured log call -------------------------------
2025-07-05T16:35:54.0299709Z ERROR    app.database:database.py:38 Database session error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0299788Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0299849Z              ^
2025-07-05T16:35:54.0299853Z 
2025-07-05T16:35:54.0300188Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0300257Z FROM "user" 
2025-07-05T16:35:54.0300333Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0300417Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0300566Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0300652Z Traceback (most recent call last):
2025-07-05T16:35:54.0301100Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0301186Z     self.dialect.do_execute(
2025-07-05T16:35:54.0301589Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0301684Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0301851Z psycopg2.errors.UndefinedTable: relation "user" does not exist
2025-07-05T16:35:54.0301918Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0301977Z              ^
2025-07-05T16:35:54.0301982Z 
2025-07-05T16:35:54.0301986Z 
2025-07-05T16:35:54.0302154Z The above exception was the direct cause of the following exception:
2025-07-05T16:35:54.0302159Z 
2025-07-05T16:35:54.0302238Z Traceback (most recent call last):
2025-07-05T16:35:54.0302572Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/database.py", line 33, in get_session
2025-07-05T16:35:54.0302649Z     yield session
2025-07-05T16:35:54.0303108Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/concurrency.py", line 28, in contextmanager_in_threadpool
2025-07-05T16:35:54.0303209Z     yield await run_in_threadpool(cm.__enter__)
2025-07-05T16:35:54.0303643Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2025-07-05T16:35:54.0303710Z     raise e
2025-07-05T16:35:54.0304144Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2025-07-05T16:35:54.0304231Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0304593Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 718, in __call__
2025-07-05T16:35:54.0304692Z     await route.handle(scope, receive, send)
2025-07-05T16:35:54.0305046Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 276, in handle
2025-07-05T16:35:54.0305132Z     await self.app(scope, receive, send)
2025-07-05T16:35:54.0305576Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/routing.py", line 66, in app
2025-07-05T16:35:54.0305776Z     response = await func(request)
2025-07-05T16:35:54.0305847Z                ^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0306177Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 274, in app
2025-07-05T16:35:54.0306276Z     raw_response = await run_endpoint_function(
2025-07-05T16:35:54.0306353Z                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0306764Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/fastapi/routing.py", line 193, in run_endpoint_function
2025-07-05T16:35:54.0306895Z     return await run_in_threadpool(dependant.call, **values)
2025-07-05T16:35:54.0307128Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0307547Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/starlette/concurrency.py", line 41, in run_in_threadpool
2025-07-05T16:35:54.0307666Z     return await anyio.to_thread.run_sync(func, *args)
2025-07-05T16:35:54.0307754Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0308100Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/to_thread.py", line 33, in run_sync
2025-07-05T16:35:54.0308223Z     return await get_asynclib().run_sync_in_worker_thread(
2025-07-05T16:35:54.0308305Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0308756Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
2025-07-05T16:35:54.0308829Z     return await future
2025-07-05T16:35:54.0308902Z            ^^^^^^^^^^^^
2025-07-05T16:35:54.0309270Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 807, in run
2025-07-05T16:35:54.0309362Z     result = context.run(func, *args)
2025-07-05T16:35:54.0309430Z              ^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0309753Z   File "/home/runner/work/esg-checklist-ai/esg-checklist-ai/backend/app/routers/users.py", line 41, in login
2025-07-05T16:35:54.0309938Z     user = db.exec(select(User).where(User.email == form_data.username)).first()
2025-07-05T16:35:54.0310023Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0310369Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 68, in exec
2025-07-05T16:35:54.0310452Z     results = super().execute(
2025-07-05T16:35:54.0310518Z               ^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0310899Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
2025-07-05T16:35:54.0310988Z     return self._execute_internal(
2025-07-05T16:35:54.0311053Z            ^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0311480Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
2025-07-05T16:35:54.0311634Z     result: Result[Any] = compile_state_cls.orm_execute_statement(
2025-07-05T16:35:54.0311715Z                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0312157Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
2025-07-05T16:35:54.0312240Z     result = conn.execute(
2025-07-05T16:35:54.0312307Z              ^^^^^^^^^^^^^
2025-07-05T16:35:54.0312686Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
2025-07-05T16:35:54.0312762Z     return meth(
2025-07-05T16:35:54.0312823Z            ^^^^^
2025-07-05T16:35:54.0313271Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
2025-07-05T16:35:54.0313375Z     return connection._execute_clauseelement(
2025-07-05T16:35:54.0313448Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0313986Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
2025-07-05T16:35:54.0314073Z     ret = self._execute_context(
2025-07-05T16:35:54.0314138Z           ^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0314562Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
2025-07-05T16:35:54.0314647Z     return self._exec_single_context(
2025-07-05T16:35:54.0314714Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-07-05T16:35:54.0315155Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
2025-07-05T16:35:54.0315314Z     self._handle_dbapi_exception(
2025-07-05T16:35:54.0315866Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
2025-07-05T16:35:54.0316056Z     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
2025-07-05T16:35:54.0316495Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
2025-07-05T16:35:54.0316574Z     self.dialect.do_execute(
2025-07-05T16:35:54.0316983Z   File "/opt/hostedtoolcache/Python/3.12.11/x64/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
2025-07-05T16:35:54.0317076Z     cursor.execute(statement, parameters)
2025-07-05T16:35:54.0317371Z sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0317443Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0317503Z              ^
2025-07-05T16:35:54.0317508Z 
2025-07-05T16:35:54.0317845Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0317917Z FROM "user" 
2025-07-05T16:35:54.0317998Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0318085Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0318236Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0318713Z ERROR    app.main:main.py:291 HTTP 500 error on POST http://testserver/v1/users/login: Database error: (psycopg2.errors.UndefinedTable) relation "user" does not exist
2025-07-05T16:35:54.0318781Z LINE 2: FROM "user" 
2025-07-05T16:35:54.0318846Z              ^
2025-07-05T16:35:54.0318851Z 
2025-07-05T16:35:54.0319184Z [SQL: SELECT "user".id, "user".username, "user".email, "user".password_hash, "user".role, "user".is_active, "user".last_login, "user".created_at 
2025-07-05T16:35:54.0319252Z FROM "user" 
2025-07-05T16:35:54.0319332Z WHERE "user".email = %(email_1)s]
2025-07-05T16:35:54.0319417Z [parameters: {'email_1': 'nonexistent'}]
2025-07-05T16:35:54.0319559Z (Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-05T16:35:54.0319746Z INFO     app.main:main.py:195 POST /v1/users/login - Status: 500 - Duration: 0.009s
2025-07-05T16:35:54.0320065Z INFO     httpx:_client.py:1773 HTTP Request: POST http://testserver/v1/users/login "HTTP/1.1 500 Internal Server Error"
2025-07-05T16:35:54.0320071Z 
2025-07-05T16:35:54.0320230Z ---------- coverage: platform linux, python 3.12.11-final-0 ----------
2025-07-05T16:35:54.0320335Z Name                                 Stmts   Miss  Cover   Missing
2025-07-05T16:35:54.0320447Z ------------------------------------------------------------------
2025-07-05T16:35:54.0320554Z app/__init__.py                          0      0   100%
2025-07-05T16:35:54.0320666Z app/ai/__init__.py                       0      0   100%
2025-07-05T16:35:54.0320928Z app/ai/scorer.py                       129     84    35%   36-39, 55, 60-64, 127-137, 140, 142, 144, 148-201, 242-281, 294-369, 378, 386-390, 394-399
2025-07-05T16:35:54.0321062Z app/auth.py                             60     25    58%   37, 41, 46-51, 60-77, 89, 94, 115-125
2025-07-05T16:35:54.0321421Z app/config.py                          198     37    81%   17, 153, 158, 163, 168, 173, 178, 183, 188, 218, 223, 228, 233, 248-249, 257-282, 285, 290, 300, 305, 365, 477
2025-07-05T16:35:54.0321563Z app/create_tables.py                     6      6     0%   1-10
2025-07-05T16:35:54.0321694Z app/database.py                         38     11    71%   49-51, 56-63
2025-07-05T16:35:54.0321914Z app/main.py                            167     35    79%   68, 70, 89-93, 99-100, 111-122, 132-135, 150, 162, 307-308, 323-324, 354, 362, 391, 395-397, 409
2025-07-05T16:35:54.0322035Z app/models.py                          192      1    99%   11
2025-07-05T16:35:54.0322253Z app/routers/__init__.py                  0      0   100%
2025-07-05T16:35:54.0322691Z app/routers/admin_checklists.py        335    221    34%   45-49, 54-56, 61-63, 78-86, 91-93, 98-100, 145-149, 154-156, 169-175, 180-182, 212-292, 310-366, 383-427, 445-504, 522-562, 580-604, 626-659, 677-704, 721-739, 755-775
2025-07-05T16:35:54.0323009Z app/routers/admin_users.py             245    172    30%   37-41, 46-48, 53-56, 70-78, 83-87, 122-124, 143-203, 220-235, 252-292, 310-364, 381-408, 426-447, 464-484, 500-522
2025-07-05T16:35:54.0323219Z app/routers/analytics.py                54     26    52%   23, 29-32, 39-47, 59-67, 77-85, 95-105, 115-125, 134-144
2025-07-05T16:35:54.0323431Z app/routers/checklists.py              224    181    19%   48-74, 82, 97-156, 165-171, 180, 197-395, 409-519
2025-07-05T16:35:54.0323605Z app/routers/export.py                  145    125    14%   26-87, 100-184, 196-273, 286-367
2025-07-05T16:35:54.0323786Z app/routers/notifications.py            28     15    46%   19-23, 44-50, 64-75
2025-07-05T16:35:54.0324119Z app/routers/realtime_analytics.py      144    105    27%   36-40, 43-45, 48-67, 76-84, 93-109, 120-146, 159-192, 204-234, 246-272, 281-321, 333-356, 368-399, 410-416
2025-07-05T16:35:54.0324320Z app/routers/reviews.py                  80     41    49%   19-24, 62-68, 87-110, 133-161, 180-182, 206-208
2025-07-05T16:35:54.0324499Z app/routers/submissions.py              34     21    38%   22-45, 56-64, 81-89
2025-07-05T16:35:54.0324786Z app/routers/uploads.py                 298    268    10%   52-88, 145-181, 251-311, 374-425, 483-521, 576-607, 670-721, 764-805, 844-873, 914-955, 1002-1057
2025-07-05T16:35:54.0324950Z app/routers/users.py                    37     16    57%   24-35, 42-52, 57, 63, 69
2025-07-05T16:35:54.0325066Z app/schemas.py                          36      0   100%
2025-07-05T16:35:54.0325524Z app/services/realtime_analytics.py     100     77    23%   51-84, 98-131, 137-194, 213-250, 256-311, 324-338, 342-373, 392, 413-433, 444, 457
2025-07-05T16:35:54.0325685Z app/utils/__init__.py                    0      0   100%
2025-07-05T16:35:54.0325911Z app/utils/ai.py                        138     62    55%   10-12, 40-67, 77-99, 111-112, 115-116, 122-131, 137-142, 226-227, 245, 339, 366-370, 376
2025-07-05T16:35:54.0326068Z app/utils/audit.py                      59     36    39%   76, 109, 142, 175, 211-226, 268-316
2025-07-05T16:35:54.0326230Z app/utils/email.py                      62     36    42%   39-69, 81-154, 165-179, 190, 202
2025-07-05T16:35:54.0326368Z app/utils/emailer.py                    41     41     0%   1-70
2025-07-05T16:35:54.0326568Z app/utils/file_security.py              75     46    39%   70, 78, 101-117, 135-162, 178-183, 203-227, 243-260
2025-07-05T16:35:54.0326728Z app/utils/notification_emailer.py       36     36     0%   5-127
2025-07-05T16:35:54.0326901Z app/utils/notifications.py              36     26    28%   39-73, 91-116, 140-146
2025-07-05T16:35:54.0327012Z ------------------------------------------------------------------
2025-07-05T16:35:54.0327114Z TOTAL                                 2997   1750    42%
2025-07-05T16:35:54.0327201Z Coverage HTML written to dir htmlcov
2025-07-05T16:35:54.0327294Z Coverage XML written to file coverage.xml
2025-07-05T16:35:54.0327299Z 
2025-07-05T16:35:54.0327443Z Required test coverage of 39% reached. Total coverage: 41.61%
2025-07-05T16:35:54.0327688Z =========================== short test summary info ============================
2025-07-05T16:35:54.0327990Z FAILED tests/test_basic_api.py::test_health_endpoint - AssertionError: assert 'degraded' == 'healthy'
2025-07-05T16:35:54.0328055Z   
2025-07-05T16:35:54.0328125Z   - healthy
2025-07-05T16:35:54.0328187Z   + degraded
2025-07-05T16:35:54.0328553Z FAILED tests/test_integration_api.py::TestEndToEndScenarios::test_complete_user_journey - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0328700Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0329009Z FAILED tests/test_routes_coverage.py::TestUserRoutes::test_login_invalid_credentials - assert 500 in [401, 422]
2025-07-05T16:35:54.0329243Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0329641Z ERROR tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_admin_endpoints_coverage - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0329777Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0330162Z ERROR tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_post_endpoints_coverage - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0330291Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0330666Z ERROR tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_file_upload_endpoints - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0330796Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0331169Z ERROR tests/test_comprehensive_coverage.py::TestRouterEndpoints::test_submission_endpoints - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0331307Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0331666Z ERROR tests/test_high_impact_coverage.py::TestUploadsRouter::test_file_upload_various_types - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0331799Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0332153Z ERROR tests/test_high_impact_coverage.py::TestUploadsRouter::test_file_upload_edge_cases - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0332279Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0332624Z ERROR tests/test_high_impact_coverage.py::TestUploadsRouter::test_get_uploads_endpoints - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0332757Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0333126Z ERROR tests/test_high_impact_coverage.py::TestUploadsRouter::test_upload_management_endpoints - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0333261Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0333649Z ERROR tests/test_high_impact_coverage.py::TestExportRouter::test_export_checklist_various_formats - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0333784Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0334120Z ERROR tests/test_high_impact_coverage.py::TestExportRouter::test_export_submissions - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0334255Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0334581Z ERROR tests/test_high_impact_coverage.py::TestExportRouter::test_export_analytics - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0334710Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0335055Z ERROR tests/test_high_impact_coverage.py::TestExportRouter::test_export_error_handling - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0335188Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0335765Z ERROR tests/test_high_impact_coverage.py::TestAdminChecklistsRouter::test_admin_checklist_crud - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0335908Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0336436Z ERROR tests/test_high_impact_coverage.py::TestAdminChecklistsRouter::test_checklist_item_management - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0336564Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0336951Z ERROR tests/test_high_impact_coverage.py::TestAdminChecklistsRouter::test_checklist_publishing - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0337078Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0337435Z ERROR tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_admin_user_management - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0337668Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0338023Z ERROR tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_user_role_management - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0338153Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0338525Z ERROR tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_user_password_management - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0338660Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0339026Z ERROR tests/test_high_impact_coverage.py::TestAdminUsersRouter::test_user_activity_monitoring - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0339154Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0339558Z ERROR tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_malformed_requests - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0339691Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0340097Z ERROR tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_permission_boundaries - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0340230Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0340652Z ERROR tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_rate_limiting_simulation - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0340781Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0341191Z ERROR tests/test_high_impact_coverage.py::TestErrorHandlingAndEdgeCases::test_large_payload_handling - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0341320Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0341792Z ERROR tests/test_high_impact_coverage.py::TestConcurrencyAndAsyncOperations::test_concurrent_checklist_operations - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0341932Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0342380Z ERROR tests/test_high_impact_coverage.py::TestConcurrencyAndAsyncOperations::test_file_upload_concurrency - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0342521Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0342914Z ERROR tests/test_integration_api.py::TestESGWorkflowIntegration::test_complete_esg_workflow - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0343042Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0343394Z ERROR tests/test_integration_api.py::TestESGWorkflowIntegration::test_auth_workflow - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0343530Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0343878Z ERROR tests/test_integration_api.py::TestESGWorkflowIntegration::test_error_handling - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0344011Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0344367Z ERROR tests/test_integration_api.py::TestESGWorkflowIntegration::test_data_validation - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0344597Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0344915Z ERROR tests/test_routes_coverage.py::TestChecklistRoutes::test_get_checklists - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0345052Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0345475Z ERROR tests/test_routes_coverage.py::TestChecklistRoutes::test_create_checklist - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0345607Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0345941Z ERROR tests/test_routes_coverage.py::TestChecklistRoutes::test_get_checklist_by_id - assert 500 in [200, 201, 400, 409]
2025-07-05T16:35:54.0346181Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-07-05T16:35:54.0346316Z =================== 3 failed, 46 passed, 32 errors in 3.59s ====================
2025-07-05T16:35:54.2548674Z ##[error]Process completed with exit code 1.
